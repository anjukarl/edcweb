"use strict";var dG=Object.defineProperty,hG=Object.defineProperties,fG=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,pG=Object.prototype.hasOwnProperty,gG=Object.prototype.propertyIsEnumerable,aN=(Xe,ye,R)=>ye in Xe?dG(Xe,ye,{enumerable:!0,configurable:!0,writable:!0,value:R}):Xe[ye]=R,lN=(Xe,ye)=>{for(var R in ye||(ye={}))pG.call(ye,R)&&aN(Xe,R,ye[R]);if(oN)for(var R of oN(ye))gG.call(ye,R)&&aN(Xe,R,ye[R]);return Xe},uN=(Xe,ye)=>hG(Xe,fG(ye));(self.webpackChunkedcweb=self.webpackChunkedcweb||[]).push([[179],{2011:(Xe,ye,R)=>{R.d(ye,{Dh:()=>ce,GT:()=>ve,cc:()=>De,hO:()=>qe,on:()=>G,pX:()=>le,xv:()=>fe});var u=R(5e3),X=R(127),P=R(5813);Xe=R.hmd(Xe);const ae=["ngOnDestroy"],le=(me,ke,He,Le={})=>new Proxy(me,{get:(Je,Ae)=>He.runOutsideAngular(()=>{var tt;if(me[Ae])return(null===(tt=null==Le?void 0:Le.spy)||void 0===tt?void 0:tt.get)&&Le.spy.get(Ae,me[Ae]),me[Ae];if(ae.indexOf(Ae)>-1)return()=>{};const Ke=ke.toPromise().then(we=>{const Z=we&&we[Ae];return"function"==typeof Z?Z.bind(we):Z&&Z.then?Z.then(te=>He.run(()=>te)):He.run(()=>Z)});return new Proxy(()=>{},{get:(we,Z)=>Ke[Z],apply:(we,Z,te)=>Ke.then(he=>{var _e;const Oe=he&&he(...te);return(null===(_e=null==Le?void 0:Le.spy)||void 0===_e?void 0:_e.apply)&&Le.spy.apply(Ae,te,Oe),Oe})})})}),ve=(me,ke)=>{ke.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Le=>{Object.defineProperty(me.prototype,Le,Object.getOwnPropertyDescriptor(He.prototype||He,Le))})})};class ie{constructor(ke){return ke}}const ce=new u.OlP("angularfire2.app.options"),fe=new u.OlP("angularfire2.app.name");function G(me,ke,He){const Je="object"==typeof He&&He||{};Je.name=Je.name||"string"==typeof He&&He||"[DEFAULT]";const tt=X.Z.apps.filter(Ke=>Ke&&Ke.name===Je.name)[0]||ke.runOutsideAngular(()=>X.Z.initializeApp(me,Je));try{JSON.stringify(me)!==JSON.stringify(tt.options)&&K("error",`${tt.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ke){}return new ie(tt)}const K=(me,...ke)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[me](...ke)},ne={provide:ie,useFactory:G,deps:[ce,u.R0b,[new u.FiY,fe]]};let qe=(()=>{class me{constructor(He){X.Z.registerVersion("angularfire",P.q4.full,"core"),X.Z.registerVersion("angularfire",P.q4.full,"app-compat"),X.Z.registerVersion("angular",u.q4F.full,He.toString())}static initializeApp(He,Le){return{ngModule:me,providers:[{provide:ce,useValue:He},{provide:fe,useValue:Le}]}}}return me.\u0275fac=function(He){return new(He||me)(u.LFG(u.Lbi))},me.\u0275mod=u.oAB({type:me}),me.\u0275inj=u.cJS({providers:[ne]}),me})();function De(me,ke,He,Le,Je){const[,Ae,tt]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===me)||[];if(Ae)return function Re(me,ke){try{return me.toString()===ke.toString()}catch(He){return me===ke}}(Je,tt)||(pe("error",`${ke} was already initialized on the ${He} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Je,was:tt})),Ae;{const Ke=Le();return globalThis.\u0275AngularfireInstanceCache.push([me,Ke,Je]),Ke}}const je=!!Xe.hot,pe=(me,...ke)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[me](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Xe,ye,R)=>{R.d(ye,{q4:()=>Kd,iC:()=>da,fc:()=>Xl,HU:()=>dl,vb:()=>ca,JM:()=>Do});var u=R(5e3),X=R(5867),P=R(5861),ae=R(9681),le=R(2090),ve=R(4859),ie=R(1877),ce=R(8766);const fe="@firebase/installations",G="0.5.12",ne=`w:${G}`,qe="FIS_v2",ke=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(D){return D instanceof le.ZR&&D.code.includes("request-failed")}function Le({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Je(D){return{token:D.token,requestStatus:2,expiresIn:he(D.expiresIn),creationTime:Date.now()}}function Ae(D,S){return tt.apply(this,arguments)}function tt(){return(tt=(0,P.Z)(function*(D,S){const L=(yield S.json()).error;return ke.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ke({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function we(D,{refreshToken:S}){const k=Ke(D);return k.append("Authorization",function _e(D){return`${qe} ${D}`}(S)),k}function Z(D){return te.apply(this,arguments)}function te(){return(te=(0,P.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function he(D){return Number(D.replace("s","000"))}function Oe(D,S){return se.apply(this,arguments)}function se(){return(se=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:k}){const L=Le(D),Y=Ke(D),oe=S.getImmediate({optional:!0});if(oe){const dt=yield oe.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Ue={method:"POST",headers:Y,body:JSON.stringify({fid:k,authVersion:qe,appId:D.appId,sdkVersion:ne})},ct=yield Z(()=>fetch(L,Ue));if(ct.ok){const dt=yield ct.json();return{fid:dt.fid||k,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Je(dt.authToken)}}throw yield Ae("Create Installation",ct)})).apply(this,arguments)}function yt(D){return new Promise(S=>{setTimeout(S,D)})}const Dn=/^[cdef][\w-]{21}$/;function It(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const k=function In(D){return function Ft(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Dn.test(k)?k:""}catch(D){return""}}function nn(D){return`${D.appName}!${D.appId}`}const yr=new Map;function hn(D,S){const k=nn(D);rr(k,S),function Us(D,S){const k=function Kt(){return!jr&&"BroadcastChannel"in self&&(jr=new BroadcastChannel("[Firebase] FID Change"),jr.onmessage=D=>{rr(D.data.key,D.data.fid)}),jr}();k&&k.postMessage({key:D,fid:S}),function Rn(){0===yr.size&&jr&&(jr.close(),jr=null)}()}(k,S)}function rr(D,S){const k=yr.get(D);if(k)for(const L of k)L(S)}let jr=null;const xr="firebase-installations-store";let Pe=null;function lt(){return Pe||(Pe=(0,ce.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(xr)}})),Pe}function Pn(D,S){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,P.Z)(function*(D,S){const k=nn(D),Y=(yield lt()).transaction(xr,"readwrite"),oe=Y.objectStore(xr),Ee=yield oe.get(k);return yield oe.put(S,k),yield Y.done,(!Ee||Ee.fid!==S.fid)&&hn(D,S.fid),S})).apply(this,arguments)}function rn(D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,P.Z)(function*(D){const S=nn(D),L=(yield lt()).transaction(xr,"readwrite");yield L.objectStore(xr).delete(S),yield L.done})).apply(this,arguments)}function uo(D,S){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,P.Z)(function*(D,S){const k=nn(D),Y=(yield lt()).transaction(xr,"readwrite"),oe=Y.objectStore(xr),Ee=yield oe.get(k),Ue=S(Ee);return void 0===Ue?yield oe.delete(k):yield oe.put(Ue,k),yield Y.done,Ue&&(!Ee||Ee.fid!==Ue.fid)&&hn(D,Ue.fid),Ue})).apply(this,arguments)}function Tn(D){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)(function*(D){let S;const k=yield uo(D.appConfig,L=>{const Y=kl(L),oe=Yt(D,Y);return S=oe.registrationPromise,oe.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function kl(D){return fn(D||{fid:It(),registrationStatus:0})}function Yt(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ke.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},L=function at(D,S){return vt.apply(this,arguments)}(D,k);return{installationEntry:k,registrationPromise:L}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Bs(D)}:{installationEntry:S}}function vt(){return(vt=(0,P.Z)(function*(D,S){try{const k=yield Oe(D,S);return Pn(D.appConfig,k)}catch(k){throw He(k)&&409===k.customData.serverCode?yield rn(D.appConfig):yield Pn(D.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Bs(D){return ji.apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*(D){let S=yield Ht(D.appConfig);for(;1===S.registrationStatus;)yield yt(100),S=yield Ht(D.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:L}=yield Tn(D);return L||k}return S})).apply(this,arguments)}function Ht(D){return uo(D,S=>{if(!S)throw ke.create("installation-not-found");return fn(S)})}function fn(D){return function zt(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function fi(D,S){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:S},k){const L=Hi(D,k),Y=we(D,k),oe=S.getImmediate({optional:!0});if(oe){const dt=yield oe.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Ue={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ne,appId:D.appId}})},ct=yield Z(()=>fetch(L,Ue));if(ct.ok)return Je(yield ct.json());throw yield Ae("Generate Auth Token",ct)})).apply(this,arguments)}function Hi(D,{fid:S}){return`${Le(D)}/${S}/authTokens:generate`}function j(D){return z.apply(this,arguments)}function z(){return(z=(0,P.Z)(function*(D,S=!1){let k;const L=yield uo(D.appConfig,oe=>{if(!bt(oe))throw ke.create("not-registered");const Ee=oe.authToken;if(!S&&Qt(Ee))return oe;if(1===Ee.requestStatus)return k=B(D,S),oe;{if(!navigator.onLine)throw ke.create("app-offline");const Ue=Xr(oe);return k=xe(D,Ue),Ue}});return k?yield k:L.authToken})).apply(this,arguments)}function B(D,S){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*(D,S){let k=yield W(D.appConfig);for(;1===k.authToken.requestStatus;)yield yt(100),k=yield W(D.appConfig);const L=k.authToken;return 0===L.requestStatus?j(D,S):L})).apply(this,arguments)}function W(D){return uo(D,S=>{if(!bt(S))throw ke.create("not-registered");return function Lt(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function xe(D,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,P.Z)(function*(D,S){try{const k=yield fi(D,S),L=Object.assign(Object.assign({},S),{authToken:k});return yield Pn(D.appConfig,L),k}catch(k){if(!He(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const L=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Pn(D.appConfig,L)}else yield rn(D.appConfig);throw k}})).apply(this,arguments)}function bt(D){return void 0!==D&&2===D.registrationStatus}function Qt(D){return 2===D.requestStatus&&!function an(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function Xr(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function ps(){return(ps=(0,P.Z)(function*(D){const S=D,{installationEntry:k,registrationPromise:L}=yield Tn(S);return L?L.catch(console.error):j(S).catch(console.error),k.fid})).apply(this,arguments)}function qo(){return(qo=(0,P.Z)(function*(D,S=!1){const k=D;return yield $n(k),(yield j(k,S)).token})).apply(this,arguments)}function $n(D){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,P.Z)(function*(D){const{registrationPromise:S}=yield Tn(D);S&&(yield S)})).apply(this,arguments)}function co(D){return ke.create("missing-app-config-values",{valueName:D})}const Jr="installations",Pt=D=>{const S=D.getProvider("app").getImmediate(),k=function br(D){if(!D||!D.options)throw co("App Configuration");if(!D.name)throw co("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!D.options[k])throw co(k);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},sn=D=>{const S=D.getProvider("app").getImmediate(),k=(0,ae._getProvider)(S,Jr).getImmediate();return{getId:()=>function $i(D){return ps.apply(this,arguments)}(k),getToken:Y=>function Go(D){return qo.apply(this,arguments)}(k,Y)}};(function cr(){(0,ae._registerComponent)(new ve.wA(Jr,Pt,"PUBLIC")),(0,ae._registerComponent)(new ve.wA("installations-internal",sn,"PRIVATE"))})(),(0,ae.registerVersion)(fe,G),(0,ae.registerVersion)(fe,G,"esm2017");const wr="@firebase/remote-config",vn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Mg{constructor(S,k,L,Y){this.client=S,this.storage=k,this.storageCache=L,this.logger=Y}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-k,Y=L<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${Y}.`),Y}fetch(S){var k=this;return(0,P.Z)(function*(){const[L,Y]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(Y&&k.isCachedDataFresh(S.cacheMaxAgeMillis,L))return Y;S.eTag=Y&&Y.eTag;const oe=yield k.client.fetch(S),Ee=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ee.push(k.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ee),oe})()}}function ff(D=navigator){return D.languages&&D.languages[0]||D.language}class Si{constructor(S,k,L,Y,oe,Ee){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=L,this.projectId=Y,this.apiKey=oe,this.appId=Ee}fetch(S){var k=this;return(0,P.Z)(function*(){var L,Y,oe;const[Ee,Ue]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},ht={sdk_version:k.sdkVersion,app_instance_id:Ee,app_instance_id_token:Ue,app_id:k.appId,language_code:ff()},kn={method:"POST",headers:Mt,body:JSON.stringify(ht)},fr=fetch(dt,kn),Ri=new Promise((To,ns)=>{S.signal.addEventListener(()=>{const eu=new Error("The operation was aborted.");eu.name="AbortError",ns(eu)})});let ha;try{yield Promise.race([fr,Ri]),ha=yield fr}catch(To){let ns="fetch-client-network";throw"AbortError"===(null===(L=To)||void 0===L?void 0:L.name)&&(ns="fetch-timeout"),vn.create(ns,{originalErrorMessage:null===(Y=To)||void 0===Y?void 0:Y.message})}let ro=ha.status;const Is=ha.headers.get("ETag")||void 0;let Pi,Io;if(200===ha.status){let To;try{To=yield ha.json()}catch(ns){throw vn.create("fetch-client-parse",{originalErrorMessage:null===(oe=ns)||void 0===oe?void 0:oe.message})}Pi=To.entries,Io=To.state}if("INSTANCE_STATE_UNSPECIFIED"===Io?ro=500:"NO_CHANGE"===Io?ro=304:("NO_TEMPLATE"===Io||"EMPTY_CONFIG"===Io)&&(Pi={}),304!==ro&&200!==ro)throw vn.create("fetch-status",{httpStatus:ro});return{status:ro,eTag:Is,config:Pi}})()}}class Za{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,P.Z)(function*(){const L=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,L)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:L}){var Y=this;return(0,P.Z)(function*(){yield function pf(D,S){return new Promise((k,L)=>{const Y=Math.max(S-Date.now(),0),oe=setTimeout(k,Y);D.addEventListener(()=>{clearTimeout(oe),L(vn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const oe=yield Y.client.fetch(S);return yield Y.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function xg(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(oe))throw oe;const Ee={throttleEndTimeMillis:Date.now()+(0,le.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(Ee),Y.attemptFetch(S,Ee)}})()}}class mf{constructor(S,k,L,Y,oe){this.app=S,this._client=k,this._storageCache=L,this._storage=Y,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function za(D,S){var k;const L=D.target.error||void 0;return vn.create(S,{originalErrorMessage:L&&(null===(k=L)||void 0===k?void 0:k.message)})}const Wo="app_namespace_store";class Gu{constructor(S,k,L,Y=function Dd(){return new Promise((D,S)=>{var k;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Y=>{S(za(Y,"storage-open"))},L.onsuccess=Y=>{D(Y.target.result)},L.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Wo,{keyPath:"compositeKey"})}}catch(L){S(vn.create("storage-open",{originalErrorMessage:null===(k=L)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,P.Z)(function*(){const L=yield k.openDbPromise;return new Promise((Y,oe)=>{var Ee;const ct=L.transaction([Wo],"readonly").objectStore(Wo),dt=k.createCompositeKey(S);try{const Mt=ct.get(dt);Mt.onerror=ht=>{oe(za(ht,"storage-get"))},Mt.onsuccess=ht=>{const kn=ht.target.result;Y(kn?kn.value:void 0)}}catch(Mt){oe(vn.create("storage-get",{originalErrorMessage:null===(Ee=Mt)||void 0===Ee?void 0:Ee.message}))}})})()}set(S,k){var L=this;return(0,P.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((oe,Ee)=>{var Ue;const dt=Y.transaction([Wo],"readwrite").objectStore(Wo),Mt=L.createCompositeKey(S);try{const ht=dt.put({compositeKey:Mt,value:k});ht.onerror=kn=>{Ee(za(kn,"storage-set"))},ht.onsuccess=()=>{oe()}}catch(ht){Ee(vn.create("storage-set",{originalErrorMessage:null===(Ue=ht)||void 0===Ue?void 0:Ue.message}))}})})()}delete(S){var k=this;return(0,P.Z)(function*(){const L=yield k.openDbPromise;return new Promise((Y,oe)=>{var Ee;const ct=L.transaction([Wo],"readwrite").objectStore(Wo),dt=k.createCompositeKey(S);try{const Mt=ct.delete(dt);Mt.onerror=ht=>{oe(za(ht,"storage-delete"))},Mt.onsuccess=()=>{Y()}}catch(Mt){oe(vn.create("storage-delete",{originalErrorMessage:null===(Ee=Mt)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Id{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,P.Z)(function*(){const k=S.storage.getLastFetchStatus(),L=S.storage.getLastSuccessfulFetchTimestampMillis(),Y=S.storage.getActiveConfig(),oe=yield k;oe&&(S.lastFetchStatus=oe);const Ee=yield L;Ee&&(S.lastSuccessfulFetchTimestampMillis=Ee);const Ue=yield Y;Ue&&(S.activeConfig=Ue)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Td(){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,P.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}!function kg(){(0,ae._registerComponent)(new ve.wA("remote-config",function D(S,{instanceIdentifier:k}){const L=S.getProvider("app").getImmediate(),Y=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vn.create("registration-window");if(!(0,le.hl)())throw vn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ee,appId:Ue}=L.options;if(!oe)throw vn.create("registration-project-id");if(!Ee)throw vn.create("registration-api-key");if(!Ue)throw vn.create("registration-app-id");const ct=new Gu(Ue,L.name,k=k||"firebase"),dt=new Id(ct),Mt=new ie.Yd(wr);Mt.logLevel=ie.in.ERROR;const ht=new Si(Y,ae.SDK_VERSION,k,oe,Ee,Ue),kn=new Za(ht,ct),fr=new Mg(kn,ct,dt,Mt),Ri=new mf(L,fr,dt,ct,Mt);return function pn(D){const S=(0,le.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ri),Ri},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(wr,"0.3.11"),(0,ae.registerVersion)(wr,"0.3.11","esm2017")}();const Sd="/firebase-messaging-sw.js",fo="/firebase-cloud-messaging-push-scope",Pl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",po="google.c.a.c_id",_f="google.c.a.c_l",Ad="google.c.a.ts",Ai="google.c.a.e";var qs=(()=>{return(D=qs||(qs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",qs;var D})();function Mi(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zi(D){const k=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(k),Y=new Uint8Array(L.length);for(let oe=0;oe<L.length;++oe)Y[oe]=L.charCodeAt(oe);return Y}const $r="fcm_token_details_db",Md="fcm_token_object_Store";function Nl(D){return xd.apply(this,arguments)}function xd(){return xd=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes($r))return null;let S=null;return(yield(0,ce.X3)($r,5,{upgrade:(L=(0,P.Z)(function*(Y,oe,Ee,Ue){var ct;if(oe<2||!Y.objectStoreNames.contains(Md))return;const dt=Ue.objectStore(Md),Mt=yield dt.index("fcmSenderId").get(D);if(yield dt.clear(),Mt)if(2===oe){const ht=Mt;if(!ht.auth||!ht.p256dh||!ht.endpoint)return;S={token:ht.fcmToken,createTime:null!==(ct=ht.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:ht.auth,p256dh:ht.p256dh,endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:"string"==typeof ht.vapidKey?ht.vapidKey:Mi(ht.vapidKey)}}}else if(3===oe){const ht=Mt;S={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Mi(ht.auth),p256dh:Mi(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Mi(ht.vapidKey)}}}else if(4===oe){const ht=Mt;S={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Mi(ht.auth),p256dh:Mi(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Mi(ht.vapidKey)}}}}),function(oe,Ee,Ue,ct){return L.apply(this,arguments)})})).close(),yield(0,ce.Lj)($r),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),Qa(S)?S:null;var L}),xd.apply(this,arguments)}function Qa(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const zi="firebase-messaging-store";let Zs=null;function Sn(){return Zs||(Zs=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(zi)}})),Zs}function Od(D){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(D){const S=Gr(D),L=yield(yield Sn()).transaction(zi).objectStore(zi).get(S);if(L)return L;{const Y=yield Nl(D.appConfig.senderId);if(Y)return yield ys(D,Y),Y}})).apply(this,arguments)}function ys(D,S){return Er.apply(this,arguments)}function Er(){return(Er=(0,P.Z)(function*(D,S){const k=Gr(D),Y=(yield Sn()).transaction(zi,"readwrite");return yield Y.objectStore(zi).put(S,k),yield Y.done,S})).apply(this,arguments)}function mi(D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,P.Z)(function*(D){const S=Gr(D),L=(yield Sn()).transaction(zi,"readwrite");yield L.objectStore(zi).delete(S),yield L.done})).apply(this,arguments)}function Gr({appConfig:D}){return D.appId}const Qn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ko(D,S){return zu.apply(this,arguments)}function zu(){return(zu=(0,P.Z)(function*(D,S){var k;const L=yield Yo(D),Y=Xa(S),oe={method:"POST",headers:L,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(mo(D.appConfig),oe)).json()}catch(Ue){throw Qn.create("token-subscribe-failed",{errorInfo:null===(k=Ue)||void 0===k?void 0:k.toString()})}if(Ee.error)throw Qn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Qn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Cr(D,S){return go.apply(this,arguments)}function go(){return(go=(0,P.Z)(function*(D,S){var k;const L=yield Yo(D),Y=Xa(S.subscriptionOptions),oe={method:"PATCH",headers:L,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(`${mo(D.appConfig)}/${S.token}`,oe)).json()}catch(Ue){throw Qn.create("token-update-failed",{errorInfo:null===(k=Ue)||void 0===k?void 0:k.toString()})}if(Ee.error)throw Qn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Qn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function Ws(D,S){return _t.apply(this,arguments)}function _t(){return(_t=(0,P.Z)(function*(D,S){var k;const Y={method:"DELETE",headers:yield Yo(D)};try{const Ee=yield(yield fetch(`${mo(D.appConfig)}/${S}`,Y)).json();if(Ee.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(oe){throw Qn.create("token-unsubscribe-failed",{errorInfo:null===(k=oe)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function mo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Yo(D){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,P.Z)(function*({appConfig:D,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Xa({p256dh:D,auth:S,endpoint:k,vapidKey:L}){const Y={web:{endpoint:k,auth:S,p256dh:D}};return L!==Pl&&(Y.web.applicationPubKey=L),Y}const Wu=6048e5;function Fl(D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(D){const S=yield Ir(D.swRegistration,D.vapidKey),k={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Mi(S.getKey("auth")),p256dh:Mi(S.getKey("p256dh"))},L=yield Od(D.firebaseDependencies);if(L){if(Ll(L.subscriptionOptions,k))return Date.now()>=L.createTime+Wu?kd(D,{token:L.token,createTime:Date.now(),subscriptionOptions:k}):L.token;try{yield Ws(D.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Xo(D.firebaseDependencies,k)}return Xo(D.firebaseDependencies,k)})).apply(this,arguments)}function Ie(D){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(D){const S=yield Od(D.firebaseDependencies);S&&(yield Ws(D.firebaseDependencies,S.token),yield mi(D.firebaseDependencies));const k=yield D.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function kd(D,S){return gn.apply(this,arguments)}function gn(){return(gn=(0,P.Z)(function*(D,S){try{const k=yield Cr(D.firebaseDependencies,S),L=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield ys(D.firebaseDependencies,L),k}catch(k){throw yield Ie(D),k}})).apply(this,arguments)}function Xo(D,S){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.Z)(function*(D,S){const L={token:yield Ko(D,S),createTime:Date.now(),subscriptionOptions:S};return yield ys(D,L),L.token})).apply(this,arguments)}function Ir(D,S){return vs.apply(this,arguments)}function vs(){return(vs=(0,P.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zi(S)})})).apply(this,arguments)}function Ll(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Vl(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Rd(D,S){if(!S.notification)return;D.notification={};const k=S.notification.title;k&&(D.notification.title=k);const L=S.notification.body;L&&(D.notification.body=L);const Y=S.notification.image;Y&&(D.notification.image=Y)}(S,D),function Jo(D,S){!S.data||(D.data=S.data)}(S,D),function _o(D,S){var k,L,Y,oe,Ee;if(!S.fcmOptions&&!(null===(k=S.notification)||void 0===k?void 0:k.click_action))return;D.fcmOptions={};const Ue=null!==(Y=null===(L=S.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==Y?Y:null===(oe=S.notification)||void 0===oe?void 0:oe.click_action;Ue&&(D.fcmOptions.link=Ue);const ct=null===(Ee=S.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(S,D),S}function ir(D){return"object"==typeof D&&!!D&&po in D}function xi(D,S){const k=[];for(let L=0;L<D.length;L++)k.push(D.charAt(L)),L<S.length&&k.push(S.charAt(L));return k.join("")}function Ki(D){return Qn.create("missing-app-config-values",{valueName:D})}xi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Oi{constructor(S,k,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Ul(D){if(!D||!D.options)throw Ki("App Configuration Object");if(!D.name)throw Ki("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=D;for(const L of S)if(!k[L])throw Ki(L);return{appName:D.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:Y,installations:k,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Pd(D){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(D){var S;try{D.swRegistration=yield navigator.serviceWorker.register(Sd,{scope:fo}),D.swRegistration.update().catch(()=>{})}catch(k){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function yf(D,S){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Pd(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function ta(D,S){return yo.apply(this,arguments)}function yo(){return(yo=(0,P.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=Pl)})).apply(this,arguments)}function el(){return(el=(0,P.Z)(function*(D,S){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield ta(D,null==S?void 0:S.vapidKey),yield yf(D,null==S?void 0:S.serviceWorkerRegistration),Fl(D)})).apply(this,arguments)}function Bl(D,S,k){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,P.Z)(function*(D,S,k){const L=ra(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:k[po],message_name:k[_f],message_time:k[Ad],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ra(D){switch(D){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tl(){return(tl=(0,P.Z)(function*(D,S){const k=S.data;if(!k.isFirebaseMessaging)return;D.onMessageHandler&&k.messageType===qs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Vl(k)):D.onMessageHandler.next(Vl(k)));const L=k.data;ir(L)&&"1"===L[Ai]&&(yield Bl(D,k.messageType,L))})).apply(this,arguments)}const jl="@firebase/messaging",Hl=D=>{const S=new Oi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function vf(D,S){return tl.apply(this,arguments)}(S,k)),S},Nd=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:L=>function na(D,S){return el.apply(this,arguments)}(S,L)}};function Xn(){return dr.apply(this,arguments)}function dr(){return(dr=(0,P.Z)(function*(){try{yield(0,le.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pg(){(0,ae._registerComponent)(new ve.wA("messaging",Hl,"PUBLIC")),(0,ae._registerComponent)(new ve.wA("messaging-internal",Nd,"PRIVATE")),(0,ae.registerVersion)(jl,"0.9.16"),(0,ae.registerVersion)(jl,"0.9.16","esm2017")}();const Ys="analytics",$l="firebase_id",Ld="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bs="https://www.googletagmanager.com/gtag/js",Mn=new ie.Yd("@firebase/analytics");function Df(D){return Promise.all(D.map(S=>S.catch(k=>k)))}function Vd(D,S){const k=document.createElement("script");k.src=`${bs}?l=${D}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Ud(D,S,k,L,Y,oe){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,P.Z)(function*(D,S,k,L,Y,oe){const Ee=L[Y];try{if(Ee)yield S[Ee];else{const ct=(yield Df(k)).find(dt=>dt.measurementId===Y);ct&&(yield S[ct.appId])}}catch(Ue){Mn.error(Ue)}D("config",Y,oe)})).apply(this,arguments)}function Bd(D,S,k,L,Y){return If.apply(this,arguments)}function If(){return(If=(0,P.Z)(function*(D,S,k,L,Y){try{let oe=[];if(Y&&Y.send_to){let Ee=Y.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Ue=yield Df(k);for(const ct of Ee){const dt=Ue.find(ht=>ht.measurementId===ct),Mt=dt&&S[dt.appId];if(!Mt){oe=[];break}oe.push(Mt)}}0===oe.length&&(oe=Object.values(S)),yield Promise.all(oe),D("event",L,Y||{})}catch(oe){Mn.error(oe)}})).apply(this,arguments)}function un(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(bs))return S;return null}const Tr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$d=new class sl{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ol(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Qs(D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,P.Z)(function*(D){var S;const{appId:k,apiKey:L}=D,Y={method:"GET",headers:ol(L)},oe=Ld.replace("{app-id}",k),Ee=yield fetch(oe,Y);if(200!==Ee.status&&304!==Ee.status){let Ue="";try{const ct=yield Ee.json();(null===(S=ct.error)||void 0===S?void 0:S.message)&&(Ue=ct.error.message)}catch(ct){}throw Tr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Ue})}return Ee.json()})).apply(this,arguments)}function hr(D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(D,S=$d,k){const{appId:L,apiKey:Y,measurementId:oe}=D.options;if(!L)throw Tr.create("no-app-id");if(!Y){if(oe)return{measurementId:oe,appId:L};throw Tr.create("no-api-key")}const Ee=S.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Ju;return setTimeout((0,P.Z)(function*(){Ue.abort()}),void 0!==k?k:6e4),Gd({appId:L,apiKey:Y,measurementId:oe},Ee,Ue,S)})).apply(this,arguments)}function Gd(D,S,k){return al.apply(this,arguments)}function al(){return(al=(0,P.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:k},L,Y=$d){var oe,Ee;const{appId:Ue,measurementId:ct}=D;try{yield ws(L,S)}catch(dt){if(ct)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(oe=dt)||void 0===oe?void 0:oe.message}]`),{appId:Ue,measurementId:ct};throw dt}try{const dt=yield Qs(D);return Y.deleteThrottleMetadata(Ue),dt}catch(dt){const Mt=dt;if(!Xs(Mt)){if(Y.deleteThrottleMetadata(Ue),ct)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null==Mt?void 0:Mt.message}]`),{appId:Ue,measurementId:ct};throw dt}const ht=503===Number(null===(Ee=null==Mt?void 0:Mt.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,le.$s)(k,Y.intervalMillis,30):(0,le.$s)(k,Y.intervalMillis),kn={throttleEndTimeMillis:Date.now()+ht,backoffCount:k+1};return Y.setThrottleMetadata(Ue,kn),Mn.debug(`Calling attemptFetch again in ${ht} millis`),Gd(D,kn,L,Y)}})).apply(this,arguments)}function ws(D,S){return new Promise((k,L)=>{const Y=Math.max(S-Date.now(),0),oe=setTimeout(k,Y);D.addEventListener(()=>{clearTimeout(oe),L(Tr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Xs(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Ju{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let ia,Vn;function Or(){return(Or=(0,P.Z)(function*(D,S,k,L,Y){if(Y&&Y.global)D("event",k,L);else{const oe=yield S;D("event",k,Object.assign(Object.assign({},L),{send_to:oe}))}})).apply(this,arguments)}function _i(D){Vn=D}function Zd(D){ia=D}function yi(){return Es.apply(this,arguments)}function Es(){return(Es=(0,P.Z)(function*(){var D;if(!(0,le.hl)())return Mn.warn(Tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(S){return Mn.warn(Tr.create("indexeddb-unavailable",{errorInfo:null===(D=S)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Xi(){return(Xi=(0,P.Z)(function*(D,S,k,L,Y,oe,Ee){var Ue;const ct=hr(D);ct.then(fr=>{k[fr.measurementId]=fr.appId,D.options.measurementId&&fr.measurementId!==D.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fr=>Mn.error(fr)),S.push(ct);const dt=yi().then(fr=>{if(fr)return L.getId()}),[Mt,ht]=yield Promise.all([ct,dt]);un()||Vd(oe,Mt.measurementId),Vn&&(Y("consent","default",Vn),_i(void 0)),Y("js",new Date);const kn=null!==(Ue=null==Ee?void 0:Ee.config)&&void 0!==Ue?Ue:{};return kn.origin="firebase",kn.update=!0,null!=ht&&(kn[$l]=ht),Y("config",Mt.measurementId,kn),ia&&(Y("set",ia),Zd(void 0)),Mt.measurementId})).apply(this,arguments)}class zl{constructor(S){this.app=S}_delete(){return delete $t[this.app.options.appId],Promise.resolve()}}let $t={},eo=[];const Ji={};let to,Cs,sa="dataLayer",ul=!1;function zd(D,S,k){!function Wl(){const D=[];if((0,le.ru)()&&D.push("This is a browser extension environment."),(0,le.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),k=Tr.create("invalid-analytics-context",{errorInfo:S});Mn.warn(k.message)}}();const L=D.options.appId;if(!L)throw Tr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Tr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$t[L])throw Tr.create("already-exists",{id:L});if(!ul){!function ql(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(sa);const{wrappedGtag:oe,gtagCore:Ee}=function Zl(D,S,k,L,Y){let oe=function(...Ee){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(oe=window[Y]),window[Y]=function il(D,S,k,L){function oe(){return(oe=(0,P.Z)(function*(Ee,Ue,ct){try{"event"===Ee?yield Bd(D,S,k,Ue,ct):"config"===Ee?yield Ud(D,S,k,L,Ue,ct):"consent"===Ee?D("consent","update",ct):D("set",Ue)}catch(dt){Mn.error(dt)}})).apply(this,arguments)}return function Y(Ee,Ue,ct){return oe.apply(this,arguments)}}(oe,D,S,k),{gtagCore:oe,wrappedGtag:window[Y]}}($t,eo,Ji,sa,"gtag");Cs=oe,to=Ee,ul=!0}return $t[L]=function nc(D,S,k,L,Y,oe,Ee){return Xi.apply(this,arguments)}(D,eo,Ji,S,to,sa,k),new zl(D)}function Tf(){return oa.apply(this,arguments)}function oa(){return(oa=(0,P.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}const Wd="@firebase/analytics";!function bn(){(0,ae._registerComponent)(new ve.wA(Ys,(S,{options:k})=>zd(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ae._registerComponent)(new ve.wA("analytics-internal",function D(S){try{const k=S.getProvider(Ys).getImmediate();return{logEvent:(L,Y,oe)=>function la(D,S,k,L){D=(0,le.m9)(D),function Qi(D,S,k,L,Y){return Or.apply(this,arguments)}(Cs,$t[D.app.options.appId],S,k,L).catch(Y=>Mn.error(Y))}(k,L,Y,oe)}}catch(k){throw Tr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ae.registerVersion)(Wd,"0.8.0"),(0,ae.registerVersion)(Wd,"0.8.0","esm2017")}();var rc=R(4408),ua=R(7565);const oc=new class sc extends ua.v{}(class ic extends rc.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(S,k,L):S.flush(this)}});var lc=R(4986),Lg=R(8505),no=R(5363),ei=R(9468);const Kd=new u.GfV("7.4.1"),Co="__angularfire_symbol__analyticsIsSupportedValue",uc="__angularfire_symbol__analyticsIsSupported",cc="__angularfire_symbol__remoteConfigIsSupportedValue",Yd="__angularfire_symbol__remoteConfigIsSupported",Qd="__angularfire_symbol__messagingIsSupportedValue",dc="__angularfire_symbol__messagingIsSupported";function Do(D,S,k){if(S){if(1===S.length)return S[0];const oe=S.filter(Ee=>Ee.app===k);if(1===oe.length)return oe[0]}return k.container.getProvider(D).getImmediate({optional:!0})}globalThis[uc]||(globalThis[uc]=Tf().then(D=>globalThis[Co]=D).catch(()=>globalThis[Co]=!1)),globalThis[dc]||(globalThis[dc]=Xn().then(D=>globalThis[Qd]=D).catch(()=>globalThis[Qd]=!1)),globalThis[Yd]||(globalThis[Yd]=Td().then(D=>globalThis[cc]=D).catch(()=>globalThis[cc]=!1));const ca=(D,S)=>{const k=S?[S]:(0,X.C6)(),L=[];return k.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Ee=>{L.includes(Ee)||L.push(Ee)})}),L};function ti(){}class Ds{constructor(S,k=oc){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,L){const Y=this.zone;return this.delegate.schedule(function(Ee){Y.runGuarded(()=>{S.apply(this,[Ee])})},k,L)}}class Ql{constructor(S){this.zone=S,this.task=null}call(S,k){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ti,{},ti,ti)),k.pipe((0,Lg.b)({next:L,complete:L,error:L})).subscribe(S).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dl=(()=>{class D{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Ds(Zone.current)),this.insideAngular=k.run(()=>new Ds(Zone.current,lc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(k){return new(k||D)(u.LFG(u.R0b))},D.\u0275prov=u.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ts(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Xl(D){return D.pipe((0,no.Q)(ts().outsideAngular))}function da(D){return ts(),function hl(D){return function(k){return(k=k.lift(new Ql(D.ngZone))).pipe((0,ei.R)(D.outsideAngular),(0,no.Q)(D.insideAngular))}}(ts())(D)}},2090:(Xe,ye,R)=>{R.d(ye,{$s:()=>zt,BH:()=>qe,G6:()=>Ke,L:()=>ce,LL:()=>se,Mn:()=>Ae,Sg:()=>De,UG:()=>pe,US:()=>ve,ZB:()=>K,ZR:()=>Oe,b$:()=>He,d:()=>Le,eu:()=>Z,hl:()=>we,jU:()=>me,m9:()=>Hi,ne:()=>lt,pd:()=>xr,r3:()=>ui,ru:()=>ke,tV:()=>fe,uI:()=>je,vZ:()=>jr,w1:()=>Je,xO:()=>fs,xb:()=>rr,z$:()=>Re,zI:()=>te,zd:()=>di});const ae=function(j){const z=[];let B=0;for(let $=0;$<j.length;$++){let W=j.charCodeAt($);W<128?z[B++]=W:W<2048?(z[B++]=W>>6|192,z[B++]=63&W|128):55296==(64512&W)&&$+1<j.length&&56320==(64512&j.charCodeAt($+1))?(W=65536+((1023&W)<<10)+(1023&j.charCodeAt(++$)),z[B++]=W>>18|240,z[B++]=W>>12&63|128,z[B++]=W>>6&63|128,z[B++]=63&W|128):(z[B++]=W>>12|224,z[B++]=W>>6&63|128,z[B++]=63&W|128)}return z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,z){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let W=0;W<j.length;W+=3){const xe=j[W],Ze=W+1<j.length,bt=Ze?j[W+1]:0,Qt=W+2<j.length,an=Qt?j[W+2]:0;let $i=(15&bt)<<2|an>>6,ps=63&an;Qt||(ps=64,Ze||($i=64)),$.push(B[xe>>2],B[(3&xe)<<4|bt>>4],B[$i],B[ps])}return $.join("")},encodeString(j,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(j):this.encodeByteArray(ae(j),z)},decodeString(j,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(j):function(j){const z=[];let B=0,$=0;for(;B<j.length;){const W=j[B++];if(W<128)z[$++]=String.fromCharCode(W);else if(W>191&&W<224){const xe=j[B++];z[$++]=String.fromCharCode((31&W)<<6|63&xe)}else if(W>239&&W<365){const Qt=((7&W)<<18|(63&j[B++])<<12|(63&j[B++])<<6|63&j[B++])-65536;z[$++]=String.fromCharCode(55296+(Qt>>10)),z[$++]=String.fromCharCode(56320+(1023&Qt))}else{const xe=j[B++],Ze=j[B++];z[$++]=String.fromCharCode((15&W)<<12|(63&xe)<<6|63&Ze)}}return z.join("")}(this.decodeStringToByteArray(j,z))},decodeStringToByteArray(j,z){this.init_();const B=z?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let W=0;W<j.length;){const xe=B[j.charAt(W++)],bt=W<j.length?B[j.charAt(W)]:0;++W;const an=W<j.length?B[j.charAt(W)]:64;++W;const Lt=W<j.length?B[j.charAt(W)]:64;if(++W,null==xe||null==bt||null==an||null==Lt)throw Error();$.push(xe<<2|bt>>4),64!==an&&($.push(bt<<4&240|an>>2),64!==Lt&&$.push(an<<6&192|Lt))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const z=ae(j);return ve.encodeByteArray(z,!0)}(j).replace(/\./g,"")},fe=function(j){try{return ve.decodeString(j,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(j,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return z}for(const B in z)!z.hasOwnProperty(B)||!ne(B)||(j[B]=K(j[B],z[B]));return j}function ne(j){return"__proto__"!==j}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,B)=>{this.resolve=z,this.reject=B})}wrapCallback(z){return(B,$)=>{B?this.reject(B):this.resolve($),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(B):z(B,$))}}}function De(j,z){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=z||"demo-project",W=j.iat||0,xe=j.sub||j.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:W,exp:W+3600,auth_time:W,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Ze)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function me(){return"object"==typeof self&&self.self===self}function ke(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function He(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return Re().indexOf("Electron/")>=0}function Je(){const j=Re();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ae(){return Re().indexOf("MSAppHost/")>=0}function Ke(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){return"object"==typeof indexedDB}function Z(){return new Promise((j,z)=>{try{let B=!0;const $="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open($);W.onsuccess=()=>{W.result.close(),B||self.indexedDB.deleteDatabase($),j(!0)},W.onupgradeneeded=()=>{B=!1},W.onerror=()=>{var xe;z((null===(xe=W.error)||void 0===xe?void 0:xe.message)||"")}}catch(B){z(B)}})}function te(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(z,B,$){super(B),this.code=z,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(z,B,$){this.service=z,this.serviceName=B,this.errors=$}create(z,...B){const $=B[0]||{},W=`${this.service}/${z}`,xe=this.errors[z],Ze=xe?function yt(j,z){return j.replace(Ft,(B,$)=>{const W=z[$];return null!=W?String(W):`<${$}?>`})}(xe,$):"Error";return new Oe(W,`${this.serviceName}: ${Ze} (${W}).`,$)}}const Ft=/\{\$([^}]+)}/g;function ui(j,z){return Object.prototype.hasOwnProperty.call(j,z)}function rr(j){for(const z in j)if(Object.prototype.hasOwnProperty.call(j,z))return!1;return!0}function jr(j,z){if(j===z)return!0;const B=Object.keys(j),$=Object.keys(z);for(const W of B){if(!$.includes(W))return!1;const xe=j[W],Ze=z[W];if(Kt(xe)&&Kt(Ze)){if(!jr(xe,Ze))return!1}else if(xe!==Ze)return!1}for(const W of $)if(!B.includes(W))return!1;return!0}function Kt(j){return null!==j&&"object"==typeof j}function fs(j){const z=[];for(const[B,$]of Object.entries(j))Array.isArray($)?$.forEach(W=>{z.push(encodeURIComponent(B)+"="+encodeURIComponent(W))}):z.push(encodeURIComponent(B)+"="+encodeURIComponent($));return z.length?"&"+z.join("&"):""}function di(j){const z={};return j.replace(/^\?/,"").split("&").forEach($=>{if($){const[W,xe]=$.split("=");z[decodeURIComponent(W)]=decodeURIComponent(xe)}}),z}function xr(j){const z=j.indexOf("?");if(!z)return"";const B=j.indexOf("#",z);return j.substring(z,B>0?B:void 0)}function lt(j,z){const B=new Pn(j,z);return B.subscribe.bind(B)}class Pn{constructor(z,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{z(this)}).catch($=>{this.error($)})}next(z){this.forEachObserver(B=>{B.next(z)})}error(z){this.forEachObserver(B=>{B.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,B,$){let W;if(void 0===z&&void 0===B&&void 0===$)throw new Error("Missing Observer.");W=function rn(j,z){if("object"!=typeof j||null===j)return!1;for(const B of z)if(B in j&&"function"==typeof j[B])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:B,complete:$},void 0===W.next&&(W.next=Bi),void 0===W.error&&(W.error=Bi),void 0===W.complete&&(W.complete=Bi);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(Ze){}}),this.observers.push(W),xe}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,z)}sendOne(z,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{B(this.observers[z])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bi(){}function zt(j,z=1e3,B=2){const $=z*Math.pow(B,j),W=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+W)}function Hi(j){return j&&j._delegate?j._delegate:j}},6158:(Xe,ye,R)=>{var u=R(5e3);let X=null;function P(){return X}const ie=new u.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function fe(){return(0,u.LFG)(K)}()},providedIn:"platform"}),n})();const G=new u.OlP("Location Initialized");let K=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function qe(){return new K((0,u.LFG)(ie))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function me(n){const e=(0,u.LFG)(ie).location;return new He((0,u.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const ke=new u.OlP("appBaseHref");let He=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(ke,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+je(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+je(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(ke,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Je=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ke(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ke(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=De,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(u.LFG(pe),u.LFG(ce))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ae(){return new Je((0,u.LFG)(pe),(0,u.LFG)(ce))}()},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}var te=(()=>((te=te||{})[te.Zero=0]="Zero",te[te.One=1]="One",te[te.Two=2]="Two",te[te.Few=3]="Few",te[te.Many=4]="Many",te[te.Other=5]="Other",te))();const di=u.kL8;class Xt{}let vn=(()=>{class n extends Xt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(di(r||this.locale)(t)){case te.Zero:return"zero";case te.One:return"one";case te.Two:return"two";case te.Few:return"few";case te.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),_s=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ho{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ho(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const p=r.get(a);r.move(p,c),Zo(p,i)}});for(let i=0,a=r.length;i<a;i++){const p=r.get(i).context;p.index=i,p.count=a,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Zo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Zo(n,e){n.context.$implicit=e.item}let Ln=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function bd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class qa{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Hr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),gi=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new qa(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Hr,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Rl=(()=>{class n{constructor(t,r,i){i._addDefault(new qa(t,r))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Hr,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})();class pf{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class xg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Za=new xg,gf=new pf;let $u=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return Za;if((0,u.F4k)(t))return gf;throw function Si(n,e){return new u.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})(),Ai=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:Xt,useClass:vn}]}),n})();const qi="browser";function Ya(n){return"server"===n}let Qa=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Rg((0,u.LFG)(ie),window)}),n})();class Rg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=En(this.window.history)||En(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function En(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zs extends class Od extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){X||(X=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Er(){return ys=ys||document.querySelector("base"),ys?ys.getAttribute("href"):null}();return null==t?null:function Wi(n){mi=mi||document.createElement("a"),mi.setAttribute("href",n);const e=mi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function $a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let mi,ys=null;const Gr=new u.OlP("TRANSITION_ID"),Qn=[{provide:u.ip1,useFactory:function qr(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Gr,ie,u.zs3],multi:!0}];class Ko{static init(){(0,u.VLi)(new Ko)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Cr=new u.OlP("EventManagerPlugins");let go=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cr),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ws{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let _t=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),mo=(()=>{class n extends _t{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Yo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Yo))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Yo(n){P().remove(n)}const Dr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xa=/%COMP%/g;function gn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?gn(n,i,t):(i=i.replace(Xa,n),t.push(i))}return t}function Xo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ir=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Rd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Jo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=gn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(go),u.LFG(mo),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Dr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Dr[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Dr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xo(r)):this.eventManager.addEventListener(e,t,Xo(r))}}class Rd extends vs{constructor(e,t,r,i){super(e),this.component=r;const a=gn(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Vt(n){return"_ngcontent-%COMP%".replace(Xa,n)}(i+"-"+r.id),this.hostAttr=function kd(n){return"_nghost-%COMP%".replace(Xa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Jo extends vs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=gn(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _o=(()=>{class n extends Ws{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ir=["alt","control","meta","shift"],Ul={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ki={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Oi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Pd=(()=>{class n extends Ws{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(ir.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),c+=_+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function ea(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ki.hasOwnProperty(e)&&(e=Ki[e]))}return Ul[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ir.forEach(a=>{a!=i&&Oi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const na=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:qi},{provide:u.g9A,useValue:function yf(){zs.makeCurrent(),Ko.init()},multi:!0},{provide:ie,useFactory:function ta(){return(0,u.RDi)(document),document},deps:[]}]),el=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Ja(){return new u.qLn},deps:[]},{provide:Cr,useClass:_o,multi:!0,deps:[ie,u.R0b,u.Lbi]},{provide:Cr,useClass:Pd,multi:!0,deps:[ie]},{provide:Ir,useClass:Ir,deps:[go,mo,u.AFp]},{provide:u.FYo,useExisting:Ir},{provide:_t,useExisting:mo},{provide:mo,useClass:mo,deps:[ie]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:go,useClass:go,deps:[Cr,u.R0b]},{provide:class Sn{},useClass:zu,deps:[]}];let Bl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Gr,useExisting:u.AFp},Qn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:el,imports:[Ai,u.hGG]}),n})();"undefined"!=typeof window&&window;var un=R(8996),Jn=R(8306);const{isArray:Tr}=Array,{getPrototypeOf:jd,prototype:Hd,keys:sl}=Object;function $d(n){if(1===n.length){const e=n[0];if(Tr(e))return{args:e,keys:null};if(function ol(n){return n&&"object"==typeof n&&jd(n)===Hd}(e)){const t=sl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Qs=R(8421),Yi=R(3269),hr=R(5403),Ct=R(4004);const{isArray:Gd}=Array;function ws(n){return(0,Ct.U)(e=>function al(n,e){return Gd(e)?n(...e):n(e)}(n,e))}function Xs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let ia=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Qi=(()=>{class n extends ia{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Or=new u.OlP("NgValueAccessor"),qd={provide:Or,useExisting:(0,u.Gpc)(()=>ll),multi:!0},tc=new u.OlP("CompositionEventMode");let ll=(()=>{class n extends ia{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bo(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(tc,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([qd]),u.qOj]}),n})();function Js(n){return null==n||0===n.length}function wo(n){return null!=n&&"number"==typeof n.length}const Vn=new u.OlP("NgValidators"),_i=new u.OlP("NgAsyncValidators"),Zd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class yi{static min(e){return function Es(n){return e=>{if(Js(e.value)||Js(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function nc(n){return e=>{if(Js(e.value)||Js(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Xi(n){return Js(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function zl(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function $t(n){return Js(n.value)||Zd.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function eo(n){return e=>Js(e.value)||!wo(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ji(n){return e=>wo(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sa(n){if(!n)return es;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Js(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Kl(e)}static composeAsync(e){return Tf(e)}}function es(n){return null}function to(n){return null!=n}function Cs(n){const e=(0,u.QGY)(n)?(0,un.D)(n):n;return(0,u.CqO)(e),e}function ul(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function xn(n,e){return e.map(t=>t(n))}function zd(n){return n.map(e=>function Wl(n){return!n.validate}(e)?e:t=>e.validate(t))}function Kl(n){if(!n)return null;const e=n.filter(to);return 0==e.length?null:function(t){return ul(xn(t,e))}}function cl(n){return null!=n?Kl(zd(n)):null}function Tf(n){if(!n)return null;const e=n.filter(to);return 0==e.length?null:function(t){return function Ju(...n){const e=(0,Yi.jO)(n),{args:t,keys:r}=$d(n),i=new Jn.y(a=>{const{length:c}=t;if(!c)return void a.complete();const p=new Array(c);let _=c,w=c;for(let I=0;I<c;I++){let M=!1;(0,Qs.Xf)(t[I]).subscribe(new hr.Q(a,N=>{M||(M=!0,w--),p[I]=N},()=>_--,void 0,()=>{(!_||!M)&&(w||a.next(r?Xs(r,p):p),a.complete())}))}});return e?i.pipe(ws(e)):i}(xn(t,e).map(Cs)).pipe((0,Ct.U)(ul))}}function oa(n){return null!=n?Tf(zd(n)):null}function Sf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Eo(n){return n._rawValidators}function Ng(n){return n._rawAsyncValidators}function On(n){return n?Array.isArray(n)?n:[n]:[]}function aa(n,e){return Array.isArray(n)?n.includes(e):n===e}function la(n,e){const t=On(e);return On(n).forEach(i=>{aa(t,i)||t.push(i)}),t}function Fg(n,e){return On(e).filter(t=>!aa(n,t))}class Wd{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oa(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class mn extends Wd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bn extends Wd{get formDirective(){return null}get path(){return null}}class rc{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let sc=(()=>{class n extends rc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mn,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),oc=(()=>{class n extends rc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bn,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function ca(n,e){dl(n,e),e.valueAccessor.writeValue(n.value),function hc(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Xl(n,e)})}(n,e),function Jl(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ki(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Xl(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ql(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ti(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ts(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ds(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dl(n,e){const t=Eo(n);null!==e.validator?n.setValidators(Sf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ng(n);null!==e.asyncValidator?n.setAsyncValidators(Sf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ds(e._rawValidators,i),Ds(e._rawAsyncValidators,i)}function ts(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Eo(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Ng(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Ds(e._rawValidators,r),Ds(e._rawAsyncValidators,r),t}function Xl(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function da(n,e){dl(n,e)}function k(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Y(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ue="VALID",ct="INVALID",dt="PENDING",Mt="DISABLED";function kn(n){return(ro(n)?n.validators:n)||null}function fr(n){return Array.isArray(n)?cl(n):n||null}function Ri(n,e){return(ro(e)?e.asyncValidators:n)||null}function ha(n){return Array.isArray(n)?oa(n):n||null}function ro(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Is=n=>n instanceof pc,Pi=n=>n instanceof Jd;function To(n){return Is(n)?n.value:n.getRawValue()}function ns(n,e){const t=Pi(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function eu(n,e){Pi(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class xf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=fr(this._rawValidators),this._composedAsyncValidatorFn=ha(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ue}get invalid(){return this.status===ct}get pending(){return this.status==dt}get disabled(){return this.status===Mt}get enabled(){return this.status!==Mt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=fr(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ha(e)}addValidators(e){this.setValidators(la(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(la(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fg(e,this._rawAsyncValidators))}hasValidator(e){return aa(this._rawValidators,e)}hasAsyncValidator(e){return aa(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mt,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ue,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ue||this.status===dt)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mt:Ue}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dt,this._hasOwnPendingAsyncValidator=!0;const t=Cs(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ht(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Pi(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof Of)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Mt:this.errors?ct:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dt)?dt:this._anyControlsHaveStatus(ct)?ct:Ue}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ro(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pc extends xf{constructor(e=null,t,r){super(kn(t),Ri(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Y(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Y(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Jd extends xf{constructor(e,t,r){super(kn(t),Ri(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){eu(this,e),Object.keys(e).forEach(r=>{ns(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=To(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Of extends xf{constructor(e,t,r){super(kn(t),Ri(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){eu(this,e),e.forEach((r,i)=>{ns(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>To(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const eh={provide:bn,useExisting:(0,u.Gpc)(()=>Ts)},fl=(()=>Promise.resolve(null))();let Ts=(()=>{class n extends bn{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new u.vpe,this.form=new Jd({},cl(t),oa(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ca(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),Y(this._directives,t)})}addFormGroup(t){fl.then(()=>{const r=this._findContainer(t.path),i=new Jd({});da(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,k(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vn,10),u.Y36(_i,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([eh]),u.qOj]}),n})(),Pf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),pa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const jg=new u.OlP("NgModelWithFormControlWarning"),$y={provide:bn,useExisting:(0,u.Gpc)(()=>ga)};let ga=(()=>{class n extends bn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ts(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ca(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ti(t.control||null,t,!1),Y(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,k(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ti(r||null,t),Is(i)&&(ca(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);da(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function hl(n,e){return ts(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dl(this.form,this),this._oldForm&&ts(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vn,10),u.Y36(_i,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([$y]),u.qOj,u.TTD]}),n})();const Hg={provide:mn,useExisting:(0,u.Gpc)(()=>rs)};let rs=(()=>{class n extends mn{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function L(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===ll?t=a:function S(n){return Object.getPrototypeOf(n.constructor)===Qi}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function D(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Do(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(bn,13),u.Y36(Vn,10),u.Y36(_i,10),u.Y36(Or,10),u.Y36(jg,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Hg]),u.qOj,u.TTD]}),n})(),zw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[pa]]}),n})(),ni=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[zw]}),n})();var on=R(2011);function pt(...n){const e=(0,Yi.yG)(n);return(0,un.D)(n,e)}var iu=R(4986),kr=R(4482);function oh(n,e=iu.z){return(0,kr.e)((t,r)=>{let i=null,a=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,I=e.now();if(I<w)return i=this.schedule(void 0,w-I),void r.add(i);p()}t.subscribe(new hr.Q(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}function Gn(n,e){return(0,kr.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new hr.Q(r,_=>{null==i||i.unsubscribe();let w=0;const I=a++;(0,Qs.Xf)(n(_,I)).subscribe(i=new hr.Q(r,M=>r.next(e?e(_,M,I,w++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var Un=R(5813),Gf=R(3942),ge=R(5861),vi=R(9681),Dt=R(2090),su=R(4859);const pl="firebasestorage.googleapis.com",Qg="storageBucket";class Bn extends Dt.ZR{constructor(e,t){super(Zf(e),`Firebase Storage: ${t} (${Zf(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bn.prototype)}_codeEquals(e){return Zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Zf(n){return"storage/"+n}function gl(){return new Bn("unknown","An unknown error occurred, please check the error payload for server response.")}function em(){return new Bn("canceled","User canceled the upload/download.")}function Ic(){return new Bn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ou(n){return new Bn("invalid-argument",n)}function So(){return new Bn("app-deleted","The Firebase app was deleted.")}function Ss(n){return new Bn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zr(n,e){return new Bn("invalid-format","String does not match format '"+n+"': "+e)}function _a(n){throw new Bn("internal-error","Internal error: "+n)}class Sr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Sr.makeFromUrl(e,t)}catch(i){return new Sr(e,"")}if(""===r.path)return r;throw function nv(n){return new Bn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Be){Be.path_=decodeURIComponent(Be.path)}const M=t.replace(/[.]/g,"\\."),$e=[{regex:p,indices:{bucket:1,path:3},postModify:function a(Be){"/"===Be.path.charAt(Be.path.length-1)&&(Be.path_=Be.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===pl?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Be=0;Be<$e.length;Be++){const wt=$e[Be],xt=wt.regex.exec(e);if(xt){let Br=xt[wt.indices.path];Br||(Br=""),r=new Sr(xt[wt.indices.bucket],Br),wt.postModify(r);break}}if(null==r)throw function tv(n){return new Bn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Ww{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ri(n){return"string"==typeof n||n instanceof String}function ah(n){return lh()&&n instanceof Blob}function lh(){return"undefined"!=typeof Blob}function Sc(n,e,t,r){if(r<e)throw ou(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ou(`Invalid value for '${n}'. Expected ${t} or less.`)}function As(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function uh(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var or=(()=>{return(n=or||(or={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",or;var n})();class ya{constructor(e,t,r,i,a,c,p,_,w,I,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=I,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function Wf(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==p){const _=gl();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?So():em():function Jg(){return new Bn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new va(!1,null,!0)):this.backoffId_=function is(n,e,t){let r=1,i=null,a=null,c=!1,p=0;function _(){return 2===p}let w=!1;function I(...ue){w||(w=!0,e.apply(null,ue))}function M(ue){i=setTimeout(()=>{i=null,n(V,_())},ue)}function N(){a&&clearTimeout(a)}function V(ue,...Ge){if(w)return void N();if(ue)return N(),void I.call(null,ue,...Ge);if(_()||c)return N(),void I.call(null,ue,...Ge);let $e;r<64&&(r*=2),1===p?(p=2,$e=0):$e=1e3*(r+Math.random()),M($e)}let H=!1;function ee(ue){H||(H=!0,N(),!w&&(null!==i?(ue||(p=2),clearTimeout(i),M(0)):ue||(p=1)))}return M(0),a=setTimeout(()=>{c=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new va(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const p=a.getErrorCode()===or.NO_ERROR,_=a.getStatus();if(!p||this.isRetryStatusCode_(_)){const I=a.getErrorCode()===or.ABORT;return void r(!1,new va(!1,null,I))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new va(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Tc(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class va{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Kf(...n){const e=function rv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(lh())return new Blob(n);throw new Bn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ac{constructor(e,t){this.data=e,this.contentType=t||null}}function y(n,e){switch(n){case bi.RAW:return new Ac(f(e));case bi.BASE64:case bi.BASE64URL:return new Ac(b(n,e));case bi.DATA_URL:return new Ac(function x(n){const e=new T(n);return e.base64?b(bi.BASE64,e.rest):function g(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Zr(bi.DATA_URL,"Malformed data URL.")}return f(e)}(e.rest)}(e),function U(n){return new T(n).contentType}(e))}throw gl()}function f(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function b(n,e){switch(n){case bi.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Zr(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bi.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Zr(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sv(n){return atob(n)}(e)}catch(i){throw Zr(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class T{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Zr(bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function J(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Te{constructor(e,t){let r=0,i="";ah(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ah(this.data_)){const i=function iv(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Te(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Te(r,!0)}}static getBlob(...e){if(lh()){const t=e.map(r=>r instanceof Te?r.data_:r);return new Te(Kf.apply(null,t))}{const t=e.map(c=>ri(c)?y(bi.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[a++]=c[p]}),new Te(i,!0)}}uploadData(){return this.data_}}function Se(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function im(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Bt(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pr(n,e){return e}class jn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||pr}}let Mo=null;function xo(){if(Mo)return Mo;const n=[];n.push(new jn("bucket")),n.push(new jn("generation")),n.push(new jn("metageneration")),n.push(new jn("name","fullPath",!0));const t=new jn("name");t.xform=function e(a,c){return function ch(n){return!ri(n)||n.length<2?n:Bt(n)}(c)},n.push(t);const i=new jn("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new jn("timeCreated")),n.push(new jn("updated")),n.push(new jn("md5Hash",null,!0)),n.push(new jn("cacheControl",null,!0)),n.push(new jn("contentDisposition",null,!0)),n.push(new jn("contentEncoding",null,!0)),n.push(new jn("contentLanguage",null,!0)),n.push(new jn("contentType",null,!0)),n.push(new jn("metadata","customMetadata",!0)),Mo=n,Mo}function xc(n,e,t){const r=Se(e);return null===r?null:function dh(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function Mc(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Sr(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function _l(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const yl="prefixes";class ba{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Oo(n){if(!n)throw gl()}function fh(n,e){return function t(r,i){const a=xc(n,i,e);return Oo(null!==a),a}}function Oc(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function ev(){return new Bn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Dc(){return new Bn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Jy(n){return new Bn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Xg(n){return new Bn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Qf(n){const e=Oc(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function Xy(n){return new Bn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function av(n,e,t){const i=As(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new ba(i,"GET",fh(n,t),c);return p.errorHandler=Qf(e),p}function pI(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=As(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,I=new ba(p,"GET",function Kw(n,e){return function t(r,i){const a=function ov(n,e,t){const r=Se(t);return null===r?null:function hh(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[yl])for(const i of t[yl]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new Sr(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Sr(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Oo(null!==a),a}}(n,e.bucket),w);return I.urlParams=a,I.errorHandler=Oc(e),I}function Xw(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function mI(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class um{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function cm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Oo(!1)}return Oo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const t0={STATE_CHANGED:"state_changed"},wi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dm(n){switch(n){case"running":case"pausing":case"canceling":return wi.RUNNING;case"paused":return wi.PAUSED;case"success":return wi.SUCCESS;case"canceled":return wi.CANCELED;default:return wi.ERROR}}class hm{constructor(e,t,r){if(function rm(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Ei(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class uv extends class vI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=or.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=or.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=or.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw _a("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _a("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _a("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw _a("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _a("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Rr(){return new uv}class hv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=xo(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function _I(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=Xw(e,r,i),p={name:c.fullPath},_=As(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=_l(c,t),H=new ba(_,"POST",function V(ee){let ue;cm(ee);try{ue=ee.getResponseHeader("X-Goog-Upload-URL")}catch(Ge){Oo(!1)}return Oo(ri(ue)),ue},n.maxUploadRetryTime);return H.urlParams=p,H.headers=I,H.body=M,H.errorHandler=Oc(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rr,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function yI(n,e,t,r){const _=new ba(t,"POST",function a(w){const I=cm(w,["active","final"]);let M=null;try{M=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Oo(!1)}M||Oo(!1);const N=Number(M);return Oo(!isNaN(N)),new um(N,r.size(),"final"===I)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Oc(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Rr,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new um(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function Rt(n,e,t,r,i,a,c,p){const _=new um(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function zf(){return new Bn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let I=w;i>0&&(I=Math.min(I,i));const M=_.current,H={"X-Goog-Upload-Command":I===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ee=r.slice(M,M+I);if(null===ee)throw Ic();const $e=new ba(t,"POST",function ue(Be,wt){const xt=cm(Be,["active","final"]),en=_.current+I,Br=r.size();let Ho;return Ho="final"===xt?fh(e,a)(Be,wt):null,new um(en,Br,"final"===xt,Ho)},e.maxUploadRetryTime);return $e.headers=H,$e.body=ee.uploadData(),$e.progressCallback=p||null,$e.errorHandler=Oc(n),$e}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Rr,i,a);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=av(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Rr,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Jw(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let $e="";for(let Be=0;Be<2;Be++)$e+=Math.random().toString().slice(2);return $e}();c["Content-Type"]="multipart/related; boundary="+_;const w=Xw(e,r,i),I=_l(w,t),V=Te.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw Ic();const H={name:w.fullPath},ee=As(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,Qe=new ba(ee,"POST",fh(n,t),Ge);return Qe.urlParams=H,Qe.headers=c,Qe.body=V.uploadData(),Qe.errorHandler=Oc(e),Qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rr,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=em(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=dm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new hm(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(dm(this._state)){case wi.SUCCESS:Ei(this._resolve.bind(null,this.snapshot))();break;case wi.CANCELED:case wi.ERROR:Ei(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(dm(this._state)){case wi.RUNNING:case wi.PAUSED:e.next&&Ei(e.next.bind(e,this.snapshot))();break;case wi.SUCCESS:e.complete&&Ei(e.complete.bind(e))();break;default:e.error&&Ei(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ph{constructor(e,t){this._service=e,this._location=t instanceof Sr?t:Sr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ph(e,t)}get root(){const e=new Sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bt(this._location.path)}get storage(){return this._service}get parent(){const e=function et(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Sr(this._location.bucket,e);return new ph(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ss(e)}}function r0(n,e,t){return gv.apply(this,arguments)}function gv(){return(gv=(0,ge.Z)(function*(n,e,t){const i=yield s0(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield r0(n,e,i.nextPageToken))})).apply(this,arguments)}function s0(n,e){null!=e&&"number"==typeof e.maxResults&&Sc("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=pI(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Rr)}function Nx(n){n._throwIfRoot("getDownloadURL");const e=function ko(n,e,t){const i=As(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new ba(i,"GET",function kx(n,e){return function t(r,i){const a=xc(n,i,e);return Oo(null!==a),function Yf(n,e,t,r){const i=Se(e);if(null===i||!ri(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const M=n.fullPath;return As("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+uh({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=Qf(e),p}(n.storage,n._location,xo());return n.storage.makeRequestWithTokens(e,Rr).then(t=>{if(null===t)throw function nm(){return new Bn("no-download-url","The given file does not have any download URLs.")}();return t})}function EI(n,e){const t=function ot(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Sr(n._location.bucket,t);return new ph(n.storage,r)}function u0(n,e){if(n instanceof c0){const t=n;if(null==t._bucket)throw function tm(){return new Bn("no-default-bucket","No default bucket found. Did you set the '"+Qg+"' property when initializing the app?")}();const r=new ph(t,t._bucket);return null!=e?u0(r,e):r}return void 0!==e?EI(n,e):n}function mv(n,e){if(e&&function a0(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof c0)return function l0(n,e){return new ph(n,e)}(n,e);throw ou("To use ref(service, url), the first argument must be a Storage instance.")}return u0(n,e)}function CI(n,e){const t=null==e?void 0:e[Qg];return null==t?null:Sr.makeFromBucketSpec(t,n)}class c0{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=pl,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Sr.makeFromBucketSpec(i,this._host):CI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Sr.makeFromBucketSpec(this._url,e):CI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Sc("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Sc("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ph(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Ww(So());{const a=function am(n,e,t,r,i,a){const c=uh(n.urlParams),p=n.url+c,_=Object.assign({},n.headers);return function ml(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function sm(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function Ao(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function om(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new ya(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const DI="@firebase/storage";function mm(n,e){return mv(n=(0,Dt.m9)(n),e)}function MI(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new c0(t,r,i,e,vi.SDK_VERSION)}!function g0(){(0,vi._registerComponent)(new su.wA("storage",MI,"PUBLIC").setMultipleInstances(!0)),(0,vi.registerVersion)(DI,"0.9.9",""),(0,vi.registerVersion)(DI,"0.9.9","esm2017")}();class _m{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class m0{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _m(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _m(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new _m(c,this,this._ref)):{next:t.next?c=>t.next(new _m(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class gh{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ss(e,this._service))}get items(){return this._delegate.items.map(e=>new ss(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ss{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function AI(n,e){return EI(n,e)}(this._delegate,e);return new ss(t,this.storage)}get root(){return new ss(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ss(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new m0(function Lx(n,e,t){return function fv(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hv(n,new Te(e),t)}(n=(0,Dt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=bi.RAW,r){this._throwIfRoot("putString");const i=y(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new m0(new hv(this._delegate,new Te(i.data,!0),a),this)}listAll(){return function d0(n){return function Px(n){const e={prefixes:[],items:[]};return r0(n,e).then(()=>e)}(n=(0,Dt.m9)(n))}(this._delegate).then(e=>new gh(e,this.storage))}list(e){return function SI(n,e){return s0(n=(0,Dt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new gh(t,this.storage))}getMetadata(){return function au(n){return function bI(n){n._throwIfRoot("getMetadata");const e=av(n.storage,n._location,xo());return n.storage.makeRequestWithTokens(e,Rr)}(n=(0,Dt.m9)(n))}(this._delegate)}updateMetadata(e){return function _v(n,e){return function o0(n,e){n._throwIfRoot("updateMetadata");const t=function gI(n,e,t,r){const a=As(e.fullServerUrl(),n.host,n._protocol),p=_l(t,r),w=n.maxOperationRetryTime,I=new ba(a,"PATCH",fh(n,r),w);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=p,I.errorHandler=Qf(e),I}(n.storage,n._location,e,xo());return n.storage.makeRequestWithTokens(t,Rr)}(n=(0,Dt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function yv(n){return Nx(n=(0,Dt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function h0(n){return function wI(n){n._throwIfRoot("deleteObject");const e=function Qw(n,e){const r=As(e.fullServerUrl(),n.host,n._protocol),p=new ba(r,"DELETE",function c(_,w){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=Qf(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rr)}(n=(0,Dt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ss(e)}}class ym{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Rc(e))throw ou("ref() expected a child path but got a URL, use refFromURL instead.");return new ss(mm(this._delegate,e),this)}refFromURL(e){if(!Rc(e))throw ou("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Sr.makeFromUrl(e,this._delegate.host)}catch(t){throw ou("refFromUrl() expected a valid full URL but got an invalid one.")}return new ss(mm(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function f0(n,e,t,r={}){!function Fx(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Dt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Rc(n){return/^[A-Za-z]+:\/\//.test(n)}function _0(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ym(t,r)}!function y0(n){const e={TaskState:wi,TaskEvent:t0,StringFormat:bi,Storage:ym,Reference:ss};n.INTERNAL.registerComponent(new su.wA("storage-compat",_0,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Gf.Z),R(5867);var vl=R(1877);const NI=new Map,FI={activated:!1,tokenObservers:[]},bv={initialized:!1,enabled:!1};function Pr(n){return NI.get(n)||FI}function Ro(n,e){NI.set(n,e)}function wm(){return bv}class D0{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Dt.BH,yield function I0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qn=new Dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function T0(n){if(!Pr(n).activated)throw qn.create("use-before-activation",{appName:n.name})}function Em(n,e){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,ge.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const V=yield c.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const p={method:"POST",body:JSON.stringify(e),headers:a};let _,w;try{_=yield fetch(n,p)}catch(V){throw qn.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==_.status)throw qn.create("fetch-status-error",{httpStatus:_.status});try{w=yield _.json()}catch(V){throw qn.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const I=w.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw qn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const M=1e3*Number(I[1]),N=Date.now();return{token:w.token,expireTimeMillis:N+M,issuedAtTimeMillis:N}})).apply(this,arguments)}function Iv(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const lu="firebase-app-check-store";let Dm=null;function Im(){return Dm||(Dm=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(qn.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(lu,{keyPath:"compositeKey"})}}catch(r){e(qn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Dm)}function A0(){return(A0=(0,ge.Z)(function*(n,e){const r=(yield Im()).transaction(lu,"readwrite"),a=r.objectStore(lu).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;p(qn.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const vh=new vl.Yd("@firebase/app-check");function wa(n,e){return(0,Dt.hl)()?function S0(n,e){return function Tm(n,e){return A0.apply(this,arguments)}(function Sv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function O0(){return wm().enabled}function ZI(){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,ge.Z)(function*(){const n=wm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mv={error:"UNKNOWN_ERROR"};function ep(n){return Dt.US.encodeString(JSON.stringify(n),!1)}function xm(n){return tp.apply(this,arguments)}function tp(){return(tp=(0,ge.Z)(function*(n,e=!1){const t=n.app;T0(t);const r=Pr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Pm(_)&&(i=_)}if(!e&&i&&Pm(i))return{token:i.token};let p,c=!1;if(O0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Em(Iv(t,yield ZI()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const _=yield r.exchangeTokenPromise;return yield wa(t,_),Ro(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?vh.warn(_.message):vh.error(_),a=_}return i?(p={token:i.token},Ro(t,Object.assign(Object.assign({},r),{token:i})),yield wa(t,i)):p=WI(a),c&&Rm(t,p),p})).apply(this,arguments)}function km(n,e){const t=Pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ro(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function xv(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function zI(n){const{app:e}=n;return new D0((0,ge.Z)(function*(){let r;if(r=Pr(e).token?yield xm(n,!0):yield xm(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ro(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Rm(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Pm(n){return n.expireTimeMillis-Date.now()>0}function WI(n){return{token:ep(Mv),error:n}}class R0{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)km(this.app,t.next);return Promise.resolve()}}const G0="app-check-internal";!function q0(){(0,vi._registerComponent)(new su.wA("app-check",n=>function bh(n,e){return new R0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(G0).initialize()})),(0,vi._registerComponent)(new su.wA(G0,n=>function P0(n){return{getToken:e=>xm(n,e),addTokenListener:e=>function Om(n,e,t,r){const{app:i}=n,a=Pr(i),c={next:t,error:r,type:e};if(Ro(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Pm(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),xv(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>xv(n))}(n,"INTERNAL",e),removeTokenListener:e=>km(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vi.registerVersion)("@firebase/app-check","0.5.11")}();class os{constructor(){return(0,Un.vb)("app-check")}}"undefined"!=typeof window&&window;var Q0=R(127);function np(n){const e=function sT(n){return new Jn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(oh(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function bl(n){return{getDownloadURL:()=>pt(void 0).pipe(Un.fc,Gn(()=>n.getDownloadURL()),Un.iC),getMetadata:()=>pt(void 0).pipe(Un.fc,Gn(()=>n.getMetadata()),Un.iC),delete:()=>(0,un.D)(n.delete()),child:e=>bl(n.child(e)),updateMetadata:e=>(0,un.D)(n.updateMetadata(e)),put:(e,t)=>np(n.put(e,t)),putString:(e,t,r)=>np(n.putString(e,t,r)),list:e=>(0,un.D)(n.list(e)),listAll:()=>(0,un.D)(n.listAll())}}const oT=new u.OlP("angularfire2.storageBucket"),rp=new u.OlP("angularfire2.storage.maxUploadRetryTime"),aT=new u.OlP("angularfire2.storage.maxOperationRetryTime"),lT=new u.OlP("angularfire2.storage.use-emulator");let Pv=(()=>{class n{constructor(t,r,i,a,c,p,_,w,I,M){const N=(0,on.on)(t,c,r);this.storage=(0,on.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const V=c.runOutsideAngular(()=>N.storage(i||void 0)),H=I;return H&&V.useEmulator(...H),_&&V.setMaxUploadRetryTime(_),w&&V.setMaxOperationRetryTime(w),V},[_,w])}ref(t){return bl(this.storage.ref(t))}refFromURL(t){return bl(this.storage.refFromURL(t))}upload(t,r,i){return bl(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(on.Dh),u.LFG(on.xv,8),u.LFG(oT,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Un.HU),u.LFG(rp,8),u.LFG(aT,8),u.LFG(lT,8),u.LFG(os,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ip=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),Ci=(()=>{class n{constructor(){Q0.Z.registerVersion("angularfire",Un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Pv],imports:[ip]}),n})();var Ea=R(8189);function as(...n){return function Vm(){return(0,Ea.J)(1)}()((0,un.D)(n,(0,Yi.yG)(n)))}function Po(...n){const e=(0,Yi.yG)(n);return(0,kr.e)((t,r)=>{(e?as(n,t,e):as(n,t)).subscribe(r)})}function uu(){return(0,kr.e)((n,e)=>{let t,r=!1;n.subscribe(new hr.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Eh(n,e,t,r,i){return(a,c)=>{let p=t,_=e,w=0;a.subscribe(new hr.Q(c,I=>{const M=w++;_=p?n(_,I,M):(p=!0,I),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function Ca(n,e){return(0,kr.e)(Eh(n,e,arguments.length>=2,!0))}var Da=R(4671);function Pc(n,e=Da.y){return n=null!=n?n:Ch,(0,kr.e)((t,r)=>{let i,a=!0;t.subscribe(new hr.Q(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}function Ch(n,e){return n===e}function zr(n,e){return(0,kr.e)((t,r)=>{let i=0;t.subscribe(new hr.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}R(1121);var nt,Dh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ia={},Um=Um||{},Ot=Dh||self;function op(){}function Bm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ih(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jm="closure_uid_"+(1e9*Math.random()>>>0),uT=0;function J0(n,e,t){return n.call.apply(n.bind,arguments)}function cT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Wr(n,e,t){return(Wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?J0:cT).apply(null,arguments)}function ap(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ii(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function cu(){this.s=this.s,this.o=this.o}var dT={};cu.prototype.s=!1,cu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function X0(n){return Object.prototype.hasOwnProperty.call(n,jm)&&n[jm]||(n[jm]=++uT)}(this);delete dT[n]}},cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},tE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function fT(n){return Array.prototype.concat.apply([],arguments)}function Fv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Th(n){return/^[\s\xa0]*$/.test(n)}var ls,Hm=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ni(n,e){return-1!=n.indexOf(e)}function nE(n,e){return n<e?-1:n>e?1:0}e:{var pT=Ot.navigator;if(pT){var rE=pT.userAgent;if(rE){ls=rE;break e}}ls=""}function $m(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gT(n){const e={};for(const t in n)e[t]=n[t];return e}var iE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nc(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<iE.length;a++)t=iE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Lv(n){return Lv[" "](n),n}Lv[" "]=op;var Gm,n,mT=Ni(ls,"Opera"),Fc=Ni(ls,"Trident")||Ni(ls,"MSIE"),lp=Ni(ls,"Edge"),Vv=lp||Fc,Uv=Ni(ls,"Gecko")&&!(Ni(ls.toLowerCase(),"webkit")&&!Ni(ls,"Edge"))&&!(Ni(ls,"Trident")||Ni(ls,"MSIE"))&&!Ni(ls,"Edge"),_T=Ni(ls.toLowerCase(),"webkit")&&!Ni(ls,"Edge");function oE(){var n=Ot.document;return n?n.documentMode:void 0}e:{var Bv="",jv=(n=ls,Uv?/rv:([^\);]+)(\)|;)/.exec(n):lp?/Edge\/([\d\.]+)/.exec(n):Fc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_T?/WebKit\/(\S+)/.exec(n):mT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(jv&&(Bv=jv?jv[1]:""),Fc){var qm=oE();if(null!=qm&&qm>parseFloat(Bv)){Gm=String(qm);break e}}Gm=Bv}var yT={};var Yx=Ot.document&&Fc&&(oE()||parseInt(Gm,10))||void 0,Hv=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",op,e),Ot.removeEventListener("test",op,e)}catch(t){}return n}();function Di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Wm(n,e){if(Di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Uv){e:{try{Lv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:up[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wm.Z.h.call(this)}}Di.prototype.h=function(){this.defaultPrevented=!0},ii(Wm,Di);var up={2:"touch",3:"pen",4:"mouse"};Wm.prototype.h=function(){Wm.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sh="closure_listenable_"+(1e6*Math.random()|0),$v=0;function Gv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++$v,this.ca=this.fa=!1}function Km(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ah(n){this.src=n,this.g={},this.h=0}function cp(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Nv(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Km(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ym(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Ah.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Ym(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Gv(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var lE="closure_lm_"+(1e6*Math.random()|0),qv={};function Qm(n,e,t,r,i){if(r&&r.once)return Zv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Qm(n,e[a],t,r,i);return null}return t=n_(t),n&&n[Sh]?n.N(e,t,Ih(r)?!!r.capture:!!r,i):Xm(n,e,t,!1,r,i)}function Xm(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Ih(i)?!!i.capture:!!i,p=t_(n);if(p||(n[lE]=p=new Ah(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function vT(){var e=Wv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Hv||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(zv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Zv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Zv(n,e[a],t,r,i);return null}return t=n_(t),n&&n[Sh]?n.O(e,t,Ih(r)?!!r.capture:!!r,i):Xm(n,e,t,!0,r,i)}function Jm(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Jm(n,e[a],t,r,i);else r=Ih(r)?!!r.capture:!!r,t=n_(t),n&&n[Sh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ym(a=n.g[e],t,r,i))&&(Km(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=t_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ym(e,t,r,i)),(t=-1<n?e[n]:null)&&e_(t))}function e_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Sh])cp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=t_(e))?(cp(t,n),0==t.h&&(t.src=null,e[lE]=null)):Km(n)}}}function zv(n){return n in qv?qv[n]:qv[n]="on"+n}function Wv(n,e){if(n.ca)n=!0;else{e=new Wm(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&e_(n),n=t.call(r,e)}return n}function t_(n){return(n=n[lE])instanceof Ah?n:null}var Kv="__closure_events_fn_"+(1e9*Math.random()>>>0);function n_(n){return"function"==typeof n?n:(n[Kv]||(n[Kv]=function(e){return n.handleEvent(e)}),n[Kv])}function Nr(){cu.call(this),this.i=new Ah(this),this.P=this,this.I=null}function Fr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Di(e,n);else if(e instanceof Di)e.target=e.target||n;else{var i=e;Nc(e=new Di(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=dp(c,r,!0,e)&&i}if(i=dp(c=e.g=n,r,!0,e)&&i,i=dp(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=dp(c=e.g=t[a],r,!1,e)&&i}function dp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&cp(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}ii(Nr,cu),Nr.prototype[Sh]=!0,Nr.prototype.removeEventListener=function(n,e,t,r){Jm(this,n,e,t,r)},Nr.prototype.M=function(){if(Nr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Km(t[r]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Nr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Yv=Ot.JSON.stringify;function uE(){var n=Jv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var i_,Qv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Xv,n=>n.reset());class Xv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dE(n){Ot.setTimeout(()=>{throw n},0)}function r_(n,e){i_||function hE(){var n=Ot.Promise.resolve(void 0);i_=function(){n.then(fE)}}(),s_||(i_(),s_=!0),Jv.add(n,e)}var s_=!1,Jv=new class cE{constructor(){this.h=this.g=null}add(e,t){const r=Qv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fE(){for(var n;n=uE();){try{n.h.call(n.g)}catch(t){dE(t)}var e=Qv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}s_=!1}function hp(n,e){Nr.call(this),this.h=n||1,this.g=e||Ot,this.j=Wr(this.kb,this),this.l=Date.now()}function pE(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function eb(n,e,t){if("function"==typeof n)t&&(n=Wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function gE(n){n.g=eb(()=>{n.g=null,n.i&&(n.i=!1,gE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ii(hp,Nr),(nt=hp.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fr(this,"tick"),this.da&&(pE(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){hp.Z.M.call(this),pE(this),delete this.g};class mE extends cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gE(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fp(n){cu.call(this),this.h=n,this.g={}}ii(fp,cu);var Ar=[];function tb(n,e,t,r){Array.isArray(t)||(t&&(Ar[0]=t.toString()),t=Ar);for(var i=0;i<t.length;i++){var a=Qm(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function _E(n){$m(n.g,function(e,t){this.g.hasOwnProperty(t)&&e_(e)},n),n.g={}}function o_(){this.g=!0}function Lc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Mh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Yv(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}fp.prototype.M=function(){fp.Z.M.call(this),_E(this)},fp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},o_.prototype.Aa=function(){this.g=!1},o_.prototype.info=function(){};var Vc={},bE=null;function pp(){return bE=bE||new Nr}function wE(n){Di.call(this,Vc.Ma,n)}function xh(n){const e=pp();Fr(e,new wE(e,n))}function wT(n,e){Di.call(this,Vc.STAT_EVENT,n),this.stat=e}function si(n){const e=pp();Fr(e,new wT(e,n))}function a_(n,e){Di.call(this,Vc.Na,n),this.size=e}function us(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}Vc.Ma="serverreachability",ii(wE,Di),Vc.STAT_EVENT="statevent",ii(wT,Di),Vc.Na="timingevent",ii(a_,Di);var l_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},EE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function so(){}function ao(){}so.prototype.h=null;var rb,Oh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function u_(){Di.call(this,"d")}function nb(){Di.call(this,"c")}function c_(){}function gp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new fp(this),this.P=mp,this.W=new hp(n=Vv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new d_}function d_(){this.i=null,this.g="",this.h=!1}ii(u_,Di),ii(nb,Di),ii(c_,so),c_.prototype.g=function(){return new XMLHttpRequest},c_.prototype.i=function(){return{}},rb=new c_;var mp=45e3,ib={},_p={};function sb(n,e,t){n.K=1,n.v=y_(El(e)),n.s=t,n.U=!0,ob(n,null)}function ob(n,e){n.F=Date.now(),kh(n),n.A=El(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),hb(t.h,"t",r),n.C=0,t=n.l.H,n.h=new d_,n.g=FT(n.l,t?e:null,!n.s),0<n.O&&(n.L=new mE(Wr(n.Ia,n,n.g),n.O)),tb(n.V,n.g,"readystatechange",n.gb),e=n.H?gT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xh(1),function yE(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),_=0;_<p.length;_++){var w=p[_].split("=");if(1<w.length){var I=w[0];w=w[1];var M=I.split("_");c=2<=M.length&&"type"==M[1]?c+(I+"=")+w+"&":c+(I+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ab(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yp(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=ET(n,t),i==_p){4==e&&(n.o=4,si(14),r=!1),Lc(n.j,n.m,null,"[Incomplete Response]");break}if(i==ib){n.o=4,si(15),Lc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Lc(n.j,n.m,i,null),h_(n,i)}ab(n)&&i!=_p&&i!=ib&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,si(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),T_(e),e.L=!0,si(11))):(Lc(n.j,n.m,t,"[Invalid Chunked Response]"),hu(n),du(n))}function ET(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_p:(t=Number(e.substring(t,r)),isNaN(t)?ib:(r+=1)+t>e.length?_p:(e=e.substr(r,t),n.C=r+t,e))}function kh(n){n.Y=Date.now()+n.P,lb(n,n.P)}function lb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=us(Wr(n.eb,n),e)}function Rh(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function du(n){0==n.l.G||n.I||jE(n.l,n)}function hu(n){Rh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pE(n.W),_E(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function h_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||fb(t.i,n)))if(t.I=n.N,!n.J&&fb(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=us(Wr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Mp(t),Tp(t)}I_(t),si(18)}if(1>=OE(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Fh(t,11)}else if((n.J||t.g==n)&&Mp(t),!Th(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const I=w[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const M=w[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const H=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var a=r.i;!a.g&&(Ni(H,"spdy")||Ni(H,"quic")||Ni(H,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(gu(a,a.h),a.h=null))}if(r.D){const ee=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.sa=ee,Zn(r.F,r.D,ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=NT(r,r.H?r.la:null,r.W),c.J){MT(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(Rh(p),kh(p)),r.g=c}else wb(r);0<t.l.length&&_u(t)}else"stop"!=w[0]&&"close"!=w[0]||Fh(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Fh(t,7):D_(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}xh(4)}catch(w){}}function f_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bm(n)||"string"==typeof n)tE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Bm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function CE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Bm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Uc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Uc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function p_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];fu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)fu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function fu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=gp.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==Dl(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const I=Dl(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>I)&&(3!=I||Vv||this.g&&(this.h.h||this.g.ga()||Nh(this.g)))){this.I||4!=I||7==e||xh(8==e||0>=M?3:2),Rh(this);var t=this.g.ba();this.N=t;t:if(ab(this)){var r=Nh(this.g);n="";var i=r.length,a=4==Dl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hu(this),du(this);var c="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function bT(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Th(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,si(12),hu(this),du(this);break e}Lc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,h_(this,t)}this.U?(yp(this,I,c),Vv&&this.i&&3==I&&(tb(this.V,this.W,"tick",this.fb),this.W.start())):(Lc(this.j,this.m,c,null),h_(this,c)),4==I&&hu(this),this.i&&!this.I&&(4==I?jE(this.l,this):(this.i=!1,kh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,si(12)):(this.o=0,si(13)),hu(this),du(this)}}}catch(I){}},nt.fb=function(){if(this.g){var n=Dl(this.g),e=this.g.ga();this.C<e.length&&(Rh(this),yp(this,n,e),this.i&&4!=n&&kh(this))}},nt.cancel=function(){this.I=!0,hu(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xh(3),si(17)),hu(this),this.o=2,du(this)):lb(this,this.Y-n)},(nt=Uc.prototype).R=function(){p_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return p_(this),this.g.concat()},nt.get=function(n,e){return fu(this.h,n)?this.h[n]:e},nt.set=function(n,e){fu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var ub=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bc){this.g=void 0!==e?e:n.g,g_(this,n.j),this.s=n.s,m_(this,n.i),__(this,n.m),this.l=n.l,e=n.h;var t=new Ph;t.i=e.i,e.g&&(t.g=new Uc(e.g),t.h=e.h),IE(this,t),this.o=n.o}else n&&(t=String(n).match(ub))?(this.g=!!e,g_(this,t[1]||"",!0),this.s=vp(t[2]||""),m_(this,t[3]||"",!0),__(this,t[4]),this.l=vp(t[5]||"",!0),IE(this,t[6]||"",!0),this.o=vp(t[7]||"")):(this.g=!!e,this.h=new Ph(null,this.g))}function El(n){return new Bc(n)}function g_(n,e,t){n.j=t?vp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function m_(n,e,t){n.i=t?vp(e,!0):e}function __(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function IE(n,e,t){e instanceof Ph?(n.h=e,function AE(n,e){e&&!n.j&&(Cl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(cb(this,r),hb(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=bp(e,AT)),n.h=new Ph(e,n.g))}function Zn(n,e,t){n.h.set(e,t)}function y_(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function vp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,IT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function IT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bp(e,TE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bp(e,TE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(bp(t,"/"==t.charAt(0)?ST:TT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bp(t,SE)),n.join("")};var TE=/[#\/\?@]/g,TT=/[#\?:]/g,ST=/[#\?]/g,AT=/[#\?@]/g,SE=/#/g;function Ph(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cl(n){n.g||(n.g=new Uc,n.h=0,n.i&&function DE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cb(n,e){Cl(n),e=jc(n,e),fu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,fu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&p_(n)))}function db(n,e){return Cl(n),e=jc(n,e),fu(n.g.h,e)}function hb(n,e,t){cb(n,e),0<t.length&&(n.i=null,n.g.set(jc(n,e),Fv(t)),n.h+=t.length)}function jc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function v_(n){this.l=n||xE,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Ph.prototype).add=function(n,e){Cl(this),this.i=null,n=jc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Cl(this),this.g.forEach(function(t,r){tE(t,function(i){n.call(e,i,r,this)},this)},this)},nt.T=function(){Cl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},nt.R=function(n){Cl(this);var e=[];if("string"==typeof n)db(this,n)&&(e=fT(e,this.g.get(jc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fT(e,n[t])}return e},nt.set=function(n,e){return Cl(this),this.i=null,db(this,n=jc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var xE=10;function pu(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OE(n){return n.h?1:n.g?n.g.size:0}function fb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gu(n,e){n.g?n.g.add(e):n.h=e}function MT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function b_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Fv(n.i)}function kE(){}function RE(){this.g=new kE}function PE(n,e,t){const r=t||"";try{f_(n,function(i,a){let c=i;Ih(i)&&(c=Yv(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gt(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function wp(n){this.l=n.$b||null,this.j=n.ib||!1}function w_(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=pb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}v_.prototype.cancel=function(){if(this.i=b_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},kE.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},kE.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},ii(wp,so),wp.prototype.g=function(){return new w_(this.l,this.j)},wp.prototype.i=function(n){return function(){return n}}({}),ii(w_,Nr);var pb=0;function Ep(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Cp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,mu(n)}function mu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=w_.prototype).open=function(n,e){if(this.readyState!=pb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,mu(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cp(this)),this.readyState=pb},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,mu(this)),this.g&&(this.readyState=3,mu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ep(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cp(this):mu(this),3==this.readyState&&Ep(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,Cp(this))},nt.Ta=function(n){this.g&&(this.response=n,Cp(this))},nt.ha=function(){this.g&&Cp(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(w_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var E_=Ot.JSON.parse;function Ut(n){Nr.call(this),this.headers=new Uc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xT,this.K=this.L=!1}ii(Ut,Nr);var xT="",NE=/^https?$/i,OT=["POST","PUT"];function FE(n){return"content-type"==n.toLowerCase()}function gb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mb(n),C_(n)}function mb(n){n.D||(n.D=!0,Fr(n,"complete"),Fr(n,"error"))}function _b(n){if(n.h&&void 0!==Um&&(!n.C[1]||4!=Dl(n)||2!=n.ba()))if(n.v&&4==Dl(n))eb(n.Fa,0,n);else if(Fr(n,"readystatechange"),4==Dl(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(ub)[1]||null;if(!i&&Ot.self&&Ot.self.location){var a=Ot.self.location.protocol;i=a.substr(0,a.length-1)}r=!NE.test(i?i.toLowerCase():"")}t=r}if(t)Fr(n,"complete"),Fr(n,"success");else{n.m=6;try{var c=2<Dl(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",mb(n)}}finally{C_(n)}}}function C_(n,e){if(n.g){LE(n);const t=n.g,r=n.C[0]?op:null;n.g=null,n.C=null,e||Fr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function LE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Dl(n){return n.g?n.g.readyState:0}function Nh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yb(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function RT(n){let e="";return $m(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zn(n,e,t))}function Dp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ip(n){this.za=0,this.l=[],this.h=new o_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dp("baseRetryDelayMs",5e3,n),this.$a=Dp("retryDelaySeedMs",1e4,n),this.Ya=Dp("forwardChannelMaxRetries",2,n),this.ra=Dp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new v_(n&&n.concurrentRequestLimit),this.Ca=new RE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function D_(n){if(vb(n),3==n.G){var e=n.V++,t=El(n.F);Zn(t,"SID",n.J),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),Ap(n,t),(e=new gp(n,n.h,e,void 0)).K=2,e.v=y_(El(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=FT(e.l,null),e.g.ea(e.v)),e.F=Date.now(),kh(e)}PT(n)}function Tp(n){n.g&&(T_(n),n.g.cancel(),n.g=null)}function vb(n){Tp(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),Mp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function bb(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&_u(n)}function _u(n){pu(n.i)||n.m||(n.m=!0,r_(n.Ha,n),n.C=0)}function VE(n,e){var t;t=e?e.m:n.V++;const r=El(n.F);Zn(r,"SID",n.J),Zn(r,"RID",t),Zn(r,"AID",n.U),Ap(n,r),n.o&&n.s&&yb(r,n.o,n.s),t=new gp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=UE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gu(n.i,t),sb(t,r,e)}function Ap(n,e){n.j&&f_({},function(t,r){Zn(e,r,t)})}function UE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Wr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let w=i[_].h;const I=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),p=!1;else try{PE(I,c,"req"+w+"_")}catch(M){r&&r(I)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function wb(n){n.g||n.u||(n.Y=1,r_(n.Ga,n),n.A=0)}function I_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=us(Wr(n.Ga,n),HE(n,n.A)),n.A++,0))}function T_(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function BE(n){n.g=new gp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=El(n.oa);Zn(e,"RID","rpc"),Zn(e,"SID",n.J),Zn(e,"CI",n.N?"0":"1"),Zn(e,"AID",n.U),Ap(n,e),Zn(e,"TYPE","xmlhttp"),n.o&&n.s&&yb(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=y_(El(e)),t.s=null,t.U=!0,ob(t,n)}function Mp(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function jE(n,e){var t=null;if(n.g==e){Mp(n),T_(n),n.g=null;var r=2}else{if(!fb(n.i,e))return;t=e.D,MT(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Fr(r=pp(),new a_(r,t,e,i)),_u(n)}else wb(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Sp(n,e){return!(OE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=us(Wr(n.Ha,n,e),HE(n,n.C)),n.C++,0)))}(n,e)||2==r&&I_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Fh(n,5);break;case 4:Fh(n,10);break;case 3:Fh(n,6);break;default:Fh(n,2)}}function HE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Fh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Wr(n.jb,n);t||(t=new Bc("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||g_(t,"https"),y_(t)),function Qx(n,e){const t=new o_;if(Ot.Image){const r=new Image;r.onload=ap(gt,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ap(gt,t,r,"TestLoadImage: error",!1,e),r.onabort=ap(gt,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ap(gt,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else si(2);n.G=0,n.j&&n.j.va(e),PT(n),vb(n)}function PT(n){n.G=0,n.I=-1,n.j&&((0!=b_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Fv(n.l),n.l.length=0),n.j.ua())}function NT(n,e,t){let r=function CT(n){return n instanceof Bc?El(n):new Bc(n,void 0)}(t);if(""!=r.i)e&&m_(r,e+"."+r.i),__(r,r.m);else{const i=Ot.location;r=function DT(n,e,t,r){var i=new Bc(null,void 0);return n&&g_(i,n),e&&m_(i,e),t&&__(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&$m(n.aa,function(i,a){Zn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Zn(r,e,t),Zn(r,"VER",n.ma),Ap(n,r),r}function FT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ut(t&&n.Ba&&!n.qa?new wp({ib:!0}):n.qa)).L=n.H,e}function Eb(){}function Hc(){if(Fc&&!(10<=Number(Yx)))throw Error("Environmental error: no available transport.")}function xs(n,e){Nr.call(this),this.g=new Ip(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Th(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Th(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ta(this)}function $E(n){u_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cb(){nb.call(this),this.status=1}function Ta(n){this.g=n}(nt=Ut.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rb.g(),this.C=function oo(n){return n.h||(n.h=n.i())}(this.u?this.u:rb),this.g.onreadystatechange=Wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void gb(this,a)}n=t||"";const i=new Uc(this.headers);r&&f_(r,function(a,c){i.set(c,a)}),r=function hT(n){e:{var e=FE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=Nv(OT,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{LE(this),0<this.B&&((this.K=function kT(n){return Fc&&function aE(){return function sE(n){var e=yT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Hm(String(Gm)).split("."),t=Hm("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=nE(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||nE(0==i[2].length,0==a[2].length)||nE(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wr(this.pa,this)):this.A=eb(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){gb(this,a)}},nt.pa=function(){void 0!==Um&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fr(this,"complete"),Fr(this,"abort"),C_(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),C_(this,!0)),Ut.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?_b(this):this.cb())},nt.cb=function(){_b(this)},nt.ba=function(){try{return 2<Dl(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),E_(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Ip.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new gp(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=gT(a),Nc(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=UE(this,i,e),Zn(t=El(this.F),"RID",n),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),Ap(this,t),this.o&&a&&yb(t,this.o,a),gu(this.i,i),this.Ra&&Zn(t,"TYPE","init"),this.ja?(Zn(t,"$req",e),Zn(t,"SID","null"),i.$=!0,sb(i,t,null)):sb(i,t,e),this.G=2}}else 3==this.G&&(n?VE(this,n):0==this.l.length||pu(this.i)||VE(this))},nt.Ga=function(){if(this.u=null,BE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=us(Wr(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,si(10),Tp(this),BE(this))},nt.ab=function(){null!=this.v&&(this.v=null,Tp(this),I_(this),si(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),si(2)):(this.h.info("Failed to ping google.com"),si(1))},(nt=Eb.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},Hc.prototype.g=function(n,e){return new xs(n,e)},ii(xs,Nr),xs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),r_(Wr(n.hb,n,e))),si(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=NT(n,null,n.W),_u(n)},xs.prototype.close=function(){D_(this.g)},xs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,bb(this.g,e)}else this.v?((e={}).__data__=Yv(n),bb(this.g,e)):bb(this.g,n)},xs.prototype.M=function(){this.g.j=null,delete this.j,D_(this.g),delete this.g,xs.Z.M.call(this)},ii($E,u_),ii(Cb,nb),ii(Ta,Eb),Ta.prototype.xa=function(){Fr(this.g,"a")},Ta.prototype.wa=function(n){Fr(this.g,new $E(n))},Ta.prototype.va=function(n){Fr(this.g,new Cb(n))},Ta.prototype.ua=function(){Fr(this.g,"b")},Hc.prototype.createWebChannel=Hc.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,l_.NO_ERROR=0,l_.TIMEOUT=8,l_.HTTP_ERROR=6,EE.COMPLETE="complete",ao.EventType=Oh,Oh.OPEN="a",Oh.CLOSE="b",Oh.ERROR="c",Oh.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,Ut.prototype.listenOnce=Ut.prototype.O,Ut.prototype.getLastError=Ut.prototype.La,Ut.prototype.getLastErrorCode=Ut.prototype.Da,Ut.prototype.getStatus=Ut.prototype.ba,Ut.prototype.getResponseJson=Ut.prototype.Qa,Ut.prototype.getResponseText=Ut.prototype.ga,Ut.prototype.send=Ut.prototype.ea;var LT=Ia.createWebChannelTransport=function(){return new Hc},VT=Ia.getStatEventTarget=function(){return pp()},Db=Ia.ErrorCode=l_,UT=Ia.EventType=EE,BT=Ia.Event=Vc,Ib=Ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jT=Ia.FetchXmlHttpFactory=wp,S_=Ia.WebChannel=ao,Lh=Ia.XhrIo=Ut;const GE="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let Vh="9.9.0";const Il=new vl.Yd("@firebase/firestore");function Tb(){return Il.logLevel}function Ne(n,...e){if(Il.logLevel<=vl.in.DEBUG){const t=e.map(A_);Il.debug(`Firestore (${Vh}): ${n}`,...t)}}function ar(n,...e){if(Il.logLevel<=vl.in.ERROR){const t=e.map(A_);Il.error(`Firestore (${Vh}): ${n}`,...t)}}function xp(n,...e){if(Il.logLevel<=vl.in.WARN){const t=e.map(A_);Il.warn(`Firestore (${Vh}): ${n}`,...t)}}function A_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Vh}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function St(n,e){n||rt()}function Ye(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ZE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $T{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class GT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qT{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Vr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const w=c;e.enqueueRetryable((0,ge.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Vr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new ZE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Lr(e)}}class ZT{constructor(e,t,r){this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ZT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.p=t.token,new zE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function WE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class KE{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=WE(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function $c(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function YE(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new zn(0,0))}static max(){return new Tt(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gc{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Gc{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const QE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Gc{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return QE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Me(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new Me(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(qt.fromString(e))}static fromName(e){return new ze(qt.fromString(e).popFirst(5))}static empty(){return new ze(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new qt(e.slice()))}}class M_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Op(n){return n.fields.find(e=>2===e.kind)}function qc(n){return n.fields.filter(e=>2!==e.kind)}M_.UNKNOWN_ID=-1;class kp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rp(0,cs.min())}}function Sb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new zn(t+1,0):new zn(t,r));return new cs(i,ze.empty(),e)}function XE(n){return new cs(n.readTime,n.key,-1)}class cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cs(Tt.min(),ze.empty(),-1)}static max(){return new cs(Tt.max(),ze.empty(),-1)}}function JE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function yu(n){return vu.apply(this,arguments)}function vu(){return vu=(0,ge.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==eC)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),vu.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const a=e.length,c=new Array(a);let p=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(I=>{c[w]=I,++p,p===a&&r(c)},I=>i(I))}})}static doWhile(e,t){return new re((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class x_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Vr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Pp(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=O_(r.target.error);this.T.reject(new Pp(e,i))}}static open(e,t,r,i){try{return new x_(t,e.transaction(i,r))}catch(a){throw new Pp(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YT(t)}}class Sa{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Sa.v((0,Dt.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Zc(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Dt.hl)())return!1;if(Sa.S())return!0;const e=(0,Dt.z$)(),t=Sa.v(e),r=0<t&&t<10,i=Sa.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Pp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Me(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Pp(e,p))},a.onupgradeneeded=c=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ge.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.k(e);const _=x_.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(I=>(_.R(),I)).catch(I=>(_.abort(I),re.reject(I))).toPromise();return w.catch(()=>{}),yield _.A,w}catch(_){const w=_,I="FirebaseError"!==w.name&&p<3;if(Ne("SimpleDb","Transaction failed with error:",w.message,"Retrying:",I),a.close(),!I)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tC{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Zc(this.$.delete())}}class Pp extends Me{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bu(n){return"IndexedDbTransactionError"===n.name}class YT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zc(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Zc(this.store.add(e))}get(e){return Zc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Zc(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Zc(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new re((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,c,p)=>p.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new re((r,i)=>{t.onerror=a=>{const c=O_(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}G(e,t){const r=[];return new re((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new tC(p),w=t(p.primaryKey,p.value,_);if(w instanceof re){const I=w.catch(M=>(_.done(),re.reject(M)));r.push(I)}_.isDone?i():null===_.U?p.continue():p.continue(_.U)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zc(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=O_(r.target.error);t(i)}})}let Ab=!1;function O_(n){const e=Sa.v((0,Dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ab||(Ab=!0,setTimeout(()=>{throw r},0)),r}}return n}class Mb{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){bu(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield yu(r)}yield t.Z(1)}))}}class k_{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return re.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ne("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(p=>{i-=p,r.add(c)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,a)).next(p=>(Ne("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=XE(a);JE(c,r)>0&&(r=c)}),new cs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Kr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function nC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Kr.ot=-1;class lr{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new R_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new R_(this.root,e,this.comparator,!1)}getReverseIterator(){return new R_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new R_(this.root,e,this.comparator,!0)}}class R_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:oi.RED,this.left=null!=i?i:oi.EMPTY,this.right=null!=a?a:oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new oi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return oi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rC(this.data.getIterator())}getIteratorFrom(e){return new rC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class rC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Np(n){return n.hasNext()?n.getNext():void 0}class Os{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Os([])}unionWith(e){let t=new _n(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $c(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const iC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(n){if(St(!!n),"string"==typeof n){let e=0;const t=iC.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Eu(n){return"string"==typeof n?Wn.fromBase64String(n):Wn.fromUint8Array(n)}function Ob(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XT(n){const e=n.mapValue.fields.__previous_value__;return Ob(e)?XT(e):e}function Bh(n){const e=ks(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class Xx{constructor(e,t,r,i,a,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}function zc(n){return null==n}function Fp(n){return 0===n&&1/n==-1/0}function sC(n){return"number"==typeof n&&Number.isInteger(n)&&!Fp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Cu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},P_={nullValue:"NULL_VALUE"};function Wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ob(n)?4:Pb(n)?9007199254740991:10:rt()}function Ma(n,e){if(n===e)return!0;const t=Wc(n);if(t!==Wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bh(n).isEqual(Bh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ks(r.timestampValue),c=ks(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Eu(n.bytesValue).isEqual(Eu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gr(r.geoPointValue.latitude)===gr(i.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gr(r.integerValue)===gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=gr(r.doubleValue),c=gr(i.doubleValue);return a===c?Fp(a)===Fp(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return $c(n.arrayValue.values||[],e.arrayValue.values||[],Ma);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(nC(a)!==nC(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!Ma(a[p],c[p])))return!1;return!0}(n,e);default:return rt()}var i}function Lp(n,e){return void 0!==(n.values||[]).find(t=>Ma(t,e))}function Du(n,e){if(n===e)return 0;const t=Wc(n),r=Wc(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=gr(i.integerValue||i.doubleValue),p=gr(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return oC(n.timestampValue,e.timestampValue);case 4:return oC(Bh(n),Bh(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Eu(i),p=Eu(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let _=0;_<c.length&&_<p.length;_++){const w=Nt(c[_],p[_]);if(0!==w)return w}return Nt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Nt(gr(i.latitude),gr(a.latitude));return 0!==c?c:Nt(gr(i.longitude),gr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let _=0;_<c.length&&_<p.length;++_){const w=Du(c[_],p[_]);if(w)return w}return Nt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Cu.mapValue&&a===Cu.mapValue)return 0;if(i===Cu.mapValue)return 1;if(a===Cu.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=a.fields||{},w=Object.keys(_);p.sort(),w.sort();for(let I=0;I<p.length&&I<w.length;++I){const M=Nt(p[I],w[I]);if(0!==M)return M;const N=Du(c[p[I]],_[w[I]]);if(0!==N)return N}return Nt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw rt()}}function oC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=ks(n),r=ks(e),i=Nt(t.seconds,r.seconds);return 0!==i?i:Nt(t.nanos,r.nanos)}function jh(n){return Kc(n)}function Kc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ks(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Eu(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Kc(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${Kc(r.fields[p])}`;return a+"}"}(n.mapValue):rt();var e}function Iu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function N_(n){return!!n&&"integerValue"in n}function Hh(n){return!!n&&"arrayValue"in n}function kb(n){return!!n&&"nullValue"in n}function Rb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vp(n){return!!n&&"mapValue"in n}function Up(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Up(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Up(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Pb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function JT(n){return"nullValue"in n?P_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Iu(Aa.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function eS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Iu(Aa.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cu:rt()}function aC(n,e){const t=Du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lC(n,e){const t=Du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Up(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Up(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ma(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new mr(Up(this.value))}}function uC(n){const e=[];return wu(n.fields,(t,r)=>{const i=new er([t]);if(Vp(r)){const a=uC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Os(e)}class wn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new wn(e,0,Tt.min(),Tt.min(),mr.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new wn(e,2,t,Tt.min(),mr.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Tt.min(),mr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xa{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.ut=null}}function cC(n,e=null,t=[],r=[],i=null,a=null,c=null){return new xa(n,e,t,r,i,a,c)}function Oa(n){const e=Ye(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+jh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jh(r)).join(",")),e.ut=t}return e.ut}function jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!pC(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ma(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!B_(n.startAt,e.startAt)&&B_(n.endAt,e.endAt)}function F_(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function L_(n,e){return n.filters.filter(t=>t instanceof ai&&t.field.isEqual(e))}function Hp(n,e,t){let r=P_,i=!0;for(const a of L_(n,e)){let c=P_,p=!0;switch(a.op){case"<":case"<=":c=JT(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,p=!1;break;case"!=":case"not-in":c=P_}aC({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];aC({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function $p(n,e,t){let r=Cu,i=!0;for(const a of L_(n,e)){let c=Cu,p=!0;switch(a.op){case">=":case">":c=eS(a.value),p=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,p=!1;break;case"!=":case"not-in":c=Cu}lC({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];lC({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new tS(e,t,r):"array-contains"===t?new fC(e,r):"in"===t?new nS(e,r):"not-in"===t?new rS(e,r):"array-contains-any"===t?new Jx(e,r):new ai(e,t,r)}static ct(e,t,r){return"in"===t?new dC(e,r):new hC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Du(t,this.value)):null!==t&&Wc(this.value)===Wc(t)&&this.at(Du(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tS extends ai{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.at(t)}}class dC extends ai{constructor(e,t){super(e,"in",t),this.keys=V_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hC extends ai{constructor(e,t){super(e,"not-in",t),this.keys=V_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function V_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class fC extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hh(t)&&Lp(t.arrayValue,this.value)}}class nS extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lp(this.value.arrayValue,t)}}class rS extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lp(this.value.arrayValue,t)}}class Jx extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lp(this.value.arrayValue,r))}}class ka{constructor(e,t){this.position=e,this.inclusive=t}}class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function pC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function U_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):Du(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function B_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ma(n.position[t],e.position[t]))return!1;return!0}class Tl{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.lt=null,this.ft=null}}function gC(n,e,t,r,i,a,c,p){return new Tl(n,e,t,r,i,a,c,p)}function $h(n){return new Tl(n)}function j_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Gp(n){for(const e of n.filters)if(e.ht())return e.field;return null}function H_(n){return null!==n.collectionGroup}function Yc(n){const e=Ye(n);if(null===e.lt){e.lt=[];const t=Gp(e),r=j_(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Tu(t)),e.lt.push(new Tu(er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Tu(er.keyField(),a))}}}return e.lt}function Rs(n){const e=Ye(n);if(!e.ft)if("F"===e.limitType)e.ft=cC(e.path,e.collectionGroup,Yc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Yc(e))t.push(new Tu(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ka(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ka(e.startAt.position,e.startAt.inclusive):null;e.ft=cC(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function Nb(n,e,t){return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qp(n,e){return jp(Rs(n),Rs(e))&&n.limitType===e.limitType}function Fb(n){return`${Oa(Rs(n))}|lt:${n.limitType}`}function $_(n){return`Query(target=${function Bp(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${jh(r.value)}`;var r}).join(", ")}]`),zc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>jh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>jh(t)).join(",")),`Target(${e})`}(Rs(n))}; limitType=${n.limitType})`}function Lb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=U_(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,Yc(t),r)||t.endAt&&!function(i,a,c){const p=U_(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,Yc(t),r)));var t,r}function Vb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mC(n){return(e,t)=>{let r=!1;for(const i of Yc(n)){const a=Fi(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Fi(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Du(p,_):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function Qc(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fp(e)?"-0":e}}function _C(n){return{integerValue:""+n}}function yC(n,e){return sC(e)?_C(e):Qc(n,e)}class Ub{constructor(){this._=void 0}}function Zp(n,e,t){return n instanceof Gh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Su?vC(n,e):n instanceof Xc?q_(n,e):function(r,i){const a=G_(r,i),c=Bb(a)+Bb(r._t);return N_(a)&&N_(r._t)?_C(c):Qc(r.wt,c)}(n,e)}function sS(n,e,t){return n instanceof Su?vC(n,e):n instanceof Xc?q_(n,e):t}function G_(n,e){return n instanceof Jc?N_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gh extends Ub{}class Su extends Ub{constructor(e){super(),this.elements=e}}function vC(n,e){const t=zp(e);for(const r of n.elements)t.some(i=>Ma(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xc extends Ub{constructor(e){super(),this.elements=e}}function q_(n,e){let t=zp(e);for(const r of n.elements)t=t.filter(i=>!Ma(i,r));return{arrayValue:{values:t}}}class Jc extends Ub{constructor(e,t){super(),this.wt=e,this._t=t}}function Bb(n){return gr(n.integerValue||n.doubleValue)}function zp(n){return Hh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ed{constructor(e,t){this.field=e,this.transform=t}}class bC{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class td{}function jb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rd(n.key,tr.none()):new qh(n.key,n.data,tr.none());{const t=n.data,r=mr.empty();let i=new _n(er.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Sl(n.key,r,new Os(i.toArray()),tr.none())}}function oS(n,e,t){n instanceof qh?function(r,i,a){const c=r.value.clone(),p=Gb(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Sl?function(r,i,a){if(!Wp(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Gb(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll($b(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nd(n,e,t,r){return n instanceof qh?function(i,a,c,p){if(!Wp(i.precondition,a))return c;const _=i.value.clone(),w=wC(i.fieldTransforms,p,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sl?function(i,a,c,p){if(!Wp(i.precondition,a))return c;const _=wC(i.fieldTransforms,p,a),w=a.data;return w.setAll($b(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(c=t,Wp(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function Hb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=G_(r.transform,i||null);null!=a&&(null===t&&(t=mr.empty()),t.set(r.field,a))}return t||null}function aS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&$c(t,r,(i,a)=>function eO(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Su&&r instanceof Su||t instanceof Xc&&r instanceof Xc?$c(t.elements,r.elements,Ma):t instanceof Jc&&r instanceof Jc?Ma(t._t,r._t):t instanceof Gh&&r instanceof Gh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class qh extends td{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sl extends td{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $b(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gb(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,sS(c,p,t[i]))}return r}function wC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Zp(a,c,e))}return r}class rd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z_ extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lS{constructor(e){this.count=e}}var Mr,Wt;function EC(n){switch(n){default:return rt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function qb(n){if(void 0===n)return ar("GRPC error has no .code"),de.UNKNOWN;switch(n){case Mr.OK:return de.OK;case Mr.CANCELLED:return de.CANCELLED;case Mr.UNKNOWN:return de.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return de.INTERNAL;case Mr.UNAVAILABLE:return de.UNAVAILABLE;case Mr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Mr.NOT_FOUND:return de.NOT_FOUND;case Mr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Mr.ABORTED:return de.ABORTED;case Mr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Mr.DATA_LOSS:return de.DATA_LOSS;default:return rt()}}(Wt=Mr||(Mr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class Al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return xb(this.inner)}size(){return this.innerSize}}const CC=new lr(ze.comparator);function Li(){return CC}const DC=new lr(ze.comparator);function Kp(...n){let e=DC;for(const t of n)e=e.insert(t.key,t);return e}function uS(n){let e=DC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function No(){return z_()}function cS(){return z_()}function z_(){return new Al(n=>n.toString(),(n,e)=>n.isEqual(e))}const tO=new lr(ze.comparator),nO=new _n(ze.comparator);function jt(...n){let e=nO;for(const t of n)e=e.add(t);return e}const rO=new _n(Nt);function Zb(){return rO}class W_{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t)),new W_(Tt.min(),r,Zb(),Li(),jt())}}class Au{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Au(Wn.EMPTY_BYTE_STRING,t,jt(),jt(),jt())}}class zb{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class K_{constructor(e,t){this.targetId=e,this.It=t}}class id{constructor(e,t,r=Wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Wb{constructor(){this.Tt=0,this.Et=Y_(),this.At=Wn.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=jt(),t=jt(),r=jt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new Au(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Y_()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class dS{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Li(),this.Bt=IC(),this.Lt=new _n(Nt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(F_(a))if(0===r){const c=new ze(a.path);this.Kt(t,c,wn.newNoDocument(c,Tt.min()))}else St(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,c)=>{const p=this.Ht(c);if(p){if(a.current&&F_(p.target)){const _=new ze(p.target.path);null!==this.$t.get(_)||this.Xt(c,_)||this.Kt(c,_,wn.newNoDocument(_,e))}a.vt&&(t.set(c,a.St()),a.Dt())}});let r=jt();this.Bt.forEach((a,c)=>{let p=!0;c.forEachWhile(_=>{const w=this.Ht(_);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.$t.forEach((a,c)=>c.setReadTime(e));const i=new W_(e,t,this.Lt,this.$t,r);return this.$t=Li(),this.Bt=IC(),this.Lt=new _n(Nt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Wb,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new _n(Nt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Wb),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function IC(){return new lr(ze.comparator)}function Y_(){return new lr(ze.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},SC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AC{constructor(e,t){this.databaseId=e,this.dt=t}}function Q_(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kb(n,e){return n.dt?e.toBase64():e.toUint8Array()}function X_(n,e){return Q_(n,e.toTimestamp())}function Ur(n){return St(!!n),Tt.fromTimestamp(function(e){const t=ks(e);return new zn(t.seconds,t.nanos)}(n))}function MC(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hS(n){const e=qt.fromString(n);return St(PC(e)),e}function J_(n,e){return MC(n.databaseId,e.path)}function Ra(n,e){const t=hS(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(OC(t))}function Yp(n,e){return MC(n.databaseId,e)}function xC(n){const e=hS(n);return 4===e.length?qt.emptyPath():OC(e)}function ey(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OC(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ty(n,e,t){return{name:J_(n,e),fields:t.value.mapValue.fields}}function kC(n,e,t){const r=Ra(n,e.name),i=Ur(e.updateTime),a=new mr({mapValue:{fields:e.fields}}),c=wn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function sd(n,e){let t;if(e instanceof qh)t={update:ty(n,e.key,e.value)};else if(e instanceof rd)t={delete:J_(n,e.key)};else if(e instanceof Sl)t={update:ty(n,e.key,e.data),updateMask:iO(e.fieldMask)};else{if(!(e instanceof Z_))return rt();t={verify:J_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Gh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Su)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Jc)return{fieldPath:a.field.canonicalString(),increment:c._t};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:X_(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:rt()),t;var i}function Yb(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?tr.updateTime(Ur(i.updateTime)):void 0!==i.exists?tr.exists(i.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(St("REQUEST_TIME"===c.setToServerValue),p=new Gh):"appendMissingElements"in c?p=new Su(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Xc(c.removeAllFromArray.values||[]):"increment"in c?p=new Jc(a,c.increment):rt();const _=er.fromServerFormat(c.fieldPath);return new ed(_,p)}(n,i)):[];var i;if(e.update){const i=Ra(n,e.update.name),a=new mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Os((e.updateMask.fieldPaths||[]).map(w=>er.fromServerFormat(w)));return new Sl(i,a,c,t,r)}return new qh(i,a,t,r)}if(e.delete){const i=Ra(n,e.delete);return new rd(i,t)}if(e.verify){const i=Ra(n,e.verify);return new Z_(i,t)}return rt()}function ny(n,e){return{documents:[Yp(n,e.path)]}}function Qb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Yp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Yp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(I=>function(M){if("=="===M.op){if(Rb(M.value))return{unaryFilter:{field:Zh(M.field),op:"IS_NAN"}};if(kb(M.value))return{unaryFilter:{field:Zh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Rb(M.value))return{unaryFilter:{field:Zh(M.field),op:"IS_NOT_NAN"}};if(kb(M.value))return{unaryFilter:{field:Zh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zh(M.field),op:mS(M.op),value:M.value}}}(I));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Zh((I=w).field),direction:RC(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.dt||zc(w)?w:{value:w});var w,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Xb(n){let e=xC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=Jb(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(I=>{return new Tu(Mu((M=I).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(I){let M;return M="object"==typeof I?I.value:I,zc(M)?null:M}(t.limit));let _=null;var I;t.startAt&&(_=new ka((I=t.startAt).values||[],!!I.before));let w=null;return t.endAt&&(w=function(I){return new ka(I.values||[],!I.before)}(t.endAt)),gC(e,i,c,a,p,"F",_,w)}function Jb(n){return n?void 0!==n.unaryFilter?[_S(n)]:void 0!==n.fieldFilter?[Fo(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Jb(e)).reduce((e,t)=>e.concat(t)):rt():[]}function RC(n){return TC[n]}function mS(n){return SC[n]}function Zh(n){return{fieldPath:n.canonicalString()}}function Mu(n){return er.fromServerFormat(n.fieldPath)}function Fo(n){return ai.create(Mu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function _S(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Mu(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Mu(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mu(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Mu(n.unaryFilter.field);return ai.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function iO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NC(e)),e=yS(n.get(t),e);return NC(e)}function yS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function NC(n){return n+"\x01\x01"}function Lo(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&rt(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:rt()}a=c+2}return new qt(r)}const FC=["userId","batchId"];function ew(n,e){return[n,Ii(e)]}function tw(n,e,t){return[n,Ii(e),t]}const LC={},vS=["prefixPath","collectionGroup","readTime","documentId"],bS=["prefixPath","collectionGroup","documentId"],VC=["collectionGroup","readTime","prefixPath","documentId"],Qp=["canonicalId","targetId"],nw=["targetId","path"],UC=["path","targetId"],wS=["collectionId","parent"],BC=["indexId","uid"],jC=["uid","sequenceNumber"],ES=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CS=["indexId","uid","orderedDocumentKey"],sO=["userId","collectionPath","documentId"],oO=["userId","collectionPath","largestBatchId"],HC=["userId","collectionGroup","largestBatchId"],$C=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DS=[...$C,"documentOverlays"],GC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IS=GC,aO=[...IS,"indexConfiguration","indexState","indexEntries"];class qC extends Uh{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function li(n,e){const t=Ye(n);return Sa.N(t.ee,e)}class ZC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&oS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cS();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let p=this.applyToLocalView(c,a.mutatedFields);p=t.has(i.key)?null:p;const _=jb(c,p);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&$c(this.mutations,e.mutations,(t,r)=>aS(t,r))&&$c(this.baseMutations,e.baseMutations,(t,r)=>aS(t,r))}}class rw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=tO;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new rw(e,t,r,i)}}class zh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xu{constructor(e,t,r,i,a=Tt.min(),c=Tt.min(),p=Wn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zC{constructor(e){this.ne=e}}function Ou(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:J_(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Q_(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ml(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:Ml(e.version)}}var i,a;return r}function Xp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ml(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xl(n){const e=new zn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function od(n,e){const t=(e.baseMutations||[]).map(a=>Yb(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Yb(n.ne,a)),i=zn.fromMillis(e.localWriteTimeMs);return new ZC(e.batchId,i,t,r)}function ad(n){const e=xl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xl(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=Rs($h(xC(i.documents[0])))):r=Rs(Xb(n.query)),new xu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Wn.fromBase64String(n.resumeToken))}function ry(n,e){const t=Ml(e.snapshotVersion),r=Ml(e.lastLimboFreeSnapshotVersion);let i;i=F_(e.target)?ny(n.ne,e.target):Qb(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oa(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iy(n){const e=Xb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Nb(e,e.limit,"L"):e}function sy(n,e){return new zh(e.largestBatchId,Yb(n.ne,e.overlayMutation))}function TS(n,e){const t=e.path.lastSegment();return[n,Ii(e.path.popLast()),t]}function SS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ml(r.readTime),documentKey:Ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class lO{getBundleMetadata(e,t){return AS(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:xl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return AS(e).put({bundleId:(r=t).id,createTime:Ml(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return MS(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:iy(i.bundledQuery),readTime:xl(i.readTime)};var i})}saveNamedQuery(e,t){return MS(e).put({name:(r=t).name,readTime:Ml(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AS(n){return li(n,"bundles")}function MS(n){return li(n,"namedQueries")}class iw{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new iw(e,t.uid||"")}getOverlay(e,t){return oy(e).get(TS(this.userId,t)).next(r=>r?sy(this.wt,r):null)}getOverlays(e,t){const r=No();return re.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const p=new zh(t,c);i.push(this.ie(e,p))}),re.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ii(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(oy(e).W("collectionPathOverlayIndex",p))}),re.waitFor(a)}getOverlaysForCollection(e,t,r){const i=No(),a=Ii(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return oy(e).K("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const w=sy(this.wt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=No();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oy(e).J({index:"collectionGroupOverlayIndex",range:p},(_,w,I)=>{const M=sy(this.wt,w);a.size()<i||M.largestBatchId===c?(a.set(M.getKey(),M),c=M.largestBatchId):I.done()}).next(()=>a)}ie(e,t){return oy(e).put(function(r,i,a){const[c,p,_]=TS(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:sd(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function oy(n){return li(n,"documentOverlays")}class ku{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Fp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Eu(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Pb(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):rt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),ze.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function xS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function KC(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=xS(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}ku.ye=new ku;class OS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=KC(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=KC(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class kS{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class YC{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Wh{constructor(){this.Me=new OS,this.Fe=new kS(this.Me),this.$e=new YC(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Ru{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ru(this.indexId,this.documentKey,this.arrayValue,r)}}function ld(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=QC(n.arrayValue,e.arrayValue),0!==t?t:(t=QC(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function QC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class XC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Op(e);if(void 0!==t&&!this.Qe(t))return!1;const r=qc(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],c))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ay{constructor(){this.ze=new JC}addToCollectionParentIndex(e,t){return this.ze.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(cs.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class JC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(qt.comparator)).toArray()}}const Jp=new Uint8Array(0);class ly{constructor(e,t){this.user=e,this.databaseId=t,this.He=new JC,this.Je=new Al(r=>Oa(r),(r,i)=>jp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Ii(i)};return eD(e).put(a)}return re.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[YE(t),""],!1,!0);return eD(e).K(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Lo(c.parent))}return r})}addFieldIndex(e,t){const r=uy(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=tg(e);return a.next(p=>{c.put(SS(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=uy(e),i=tg(e),a=eg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=eg(e);let i=!0;const a=new Map;return re.forEach(this.Ye(t),c=>this.Xe(e,c).next(p=>{i&&(i=!!p),a.set(c,p)})).next(()=>{if(i){let c=jt();const p=[];return re.forEach(a,(_,w)=>{var I;Ne("IndexedDbIndexManager",`Using index ${I=_,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map($e=>`${$e.fieldPath}:${$e.kind}`).join(",")}`} to execute ${Oa(t)}`);const M=function($e,Be){const wt=Op(Be);if(void 0===wt)return null;for(const xt of L_($e,wt.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(w,_),N=function($e,Be){const wt=new Map;for(const xt of qc(Be))for(const en of L_($e,xt.fieldPath))switch(en.op){case"==":case"in":wt.set(xt.fieldPath.canonicalString(),en.value);break;case"not-in":case"!=":return wt.set(xt.fieldPath.canonicalString(),en.value),Array.from(wt.values())}return null}(w,_),V=function($e,Be){const wt=[];let xt=!0;for(const en of qc(Be)){const Br=0===en.kind?Hp($e,en.fieldPath,$e.startAt):$p($e,en.fieldPath,$e.startAt);wt.push(Br.value),xt&&(xt=Br.inclusive)}return new ka(wt,xt)}(w,_),H=function($e,Be){const wt=[];let xt=!0;for(const en of qc(Be)){const Br=0===en.kind?$p($e,en.fieldPath,$e.endAt):Hp($e,en.fieldPath,$e.endAt);wt.push(Br.value),xt&&(xt=Br.inclusive)}return new ka(wt,xt)}(w,_),ee=this.Ze(_,w,V),ue=this.Ze(_,w,H),Ge=this.tn(_,w,N),Qe=this.en(_.indexId,M,ee,V.inclusive,ue,H.inclusive,Ge);return re.forEach(Qe,$e=>r.j($e,t.limit).next(Be=>{Be.forEach(wt=>{const xt=ze.fromSegments(wt.documentKey);c.has(xt)||(c=c.add(xt),p.push(xt))})}))}).next(()=>p)}return re.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),I=[];for(let M=0;M<_;++M){const N=t?this.nn(t[M/w]):Jp,V=this.sn(e,N,r[M%w],i),H=this.rn(e,N,a[M%w],c),ee=p.map(ue=>this.sn(e,N,ue,!0));I.push(...this.createRange(V,H,ee))}return I}sn(e,t,r,i){const a=new Ru(e,ze.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new Ru(e,ze.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new XC(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const p of a)r.Ge(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return re.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let p=new _n(er.comparator),_=!1;for(const w of c.filters){const I=w;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?_=!0:p=p.add(I.field))}for(const w of c.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Wh;for(const i of qc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Be(i.kind);ku.ye.re(a,c)}return r.Oe()}nn(e){const t=new Wh;return ku.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Wh;return ku.ye.re(Iu(this.databaseId,t),r.Be(function(i){const a=qc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new Wh);let a=0;for(const c of qc(e)){const p=r[a++];for(const _ of i)if(this.cn(t,c.fieldPath)&&Hh(p))i=this.an(i,c,p);else{const w=_.Be(c.kind);ku.ye.re(p,w)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new Wh;_.seed(p.Oe()),ku.ye.re(c,_.Be(t.kind)),a.push(_)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof ai&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=uy(e),i=tg(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const c=[];return re.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(w,I){const M=I?new Rp(I.sequenceNumber,new cs(xl(I.readTime),new ze(Lo(I.documentKey)),I.largestBatchId)):Rp.empty(),N=w.fields.map(([V,H])=>new kp(er.fromServerFormat(V),H));return new M_(w.indexId,w.collectionGroup,N,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=uy(e),a=tg(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>re.forEach(p,_=>a.put(SS(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),re.forEach(p,_=>this.fn(e,i,_).next(w=>{const I=this.dn(a,_);return w.isEqual(I)?re.resolve():this._n(e,a,_,w,I)}))))})}wn(e,t,r,i){return eg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return eg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=eg(e);let a=new _n(ld);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,p)=>{a=a.add(new Ru(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}dn(e,t){let r=new _n(ld);const i=this.on(t,e);if(null==i)return r;const a=Op(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Hh(c))for(const p of c.arrayValue.values||[])r=r.add(new Ru(t.indexId,e.key,this.nn(p),i))}else r=r.add(new Ru(t.indexId,e.key,Jp,i));return r}_n(e,t,r,i,a){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,w,I,M){const N=p.getIterator(),V=_.getIterator();let H=Np(N),ee=Np(V);for(;H||ee;){let ue=!1,Ge=!1;if(H&&ee){const Qe=w(H,ee);Qe<0?Ge=!0:Qe>0&&(ue=!0)}else null!=H?Ge=!0:ue=!0;ue?(I(ee),ee=Np(V)):Ge?(M(H),H=Np(N)):(H=Np(N),ee=Np(V))}}(i,a,ld,p=>{c.push(this.wn(e,t,r,p))},p=>{c.push(this.mn(e,t,r,p))}),re.waitFor(c)}ln(e){let t=1;return tg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>ld(c,p)).filter((c,p,_)=>!p||0!==ld(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=ld(c,e),_=ld(c,t);if(0===p)i[0]=e.Le();else if(p>0&&_<0)i.push(c),i.push(c.Le());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Jp,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Jp,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RS)}getMinOffset(e,t){return re.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||rt())).next(RS)}}function eD(n){return li(n,"collectionParents")}function eg(n){return li(n,"indexEntries")}function uy(n){return li(n,"indexConfiguration")}function tg(n){return li(n,"indexState")}function RS(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;JE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cs(e.readTime,e.documentKey,t)}const tD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ds{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.J({range:c},(I,M,N)=>(p++,N.delete()));a.push(_.next(()=>{St(1===p)}));const w=[];for(const I of t.mutations){const M=tw(e,I.key.path,t.batchId);a.push(i.delete(M)),w.push(I.key)}return re.waitFor(a).next(()=>w)}function cy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(41943040,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class dy{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){St(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new dy(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pu(e).J({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Kh(e),c=Pu(e);return c.add({}).next(p=>{St("number"==typeof p);const _=new ZC(p,t,r,i),w=function(N,V,H){const ee=H.baseMutations.map(Ge=>sd(N.ne,Ge)),ue=H.mutations.map(Ge=>sd(N.ne,Ge));return{userId:V,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:ee,mutations:ue}}(this.wt,this.userId,_),I=[];let M=new _n((N,V)=>Nt(N.canonicalString(),V.canonicalString()));for(const N of i){const V=tw(this.userId,N.key.path,p);M=M.add(N.key.path.popLast()),I.push(c.put(w)),I.push(a.put(V,LC))}return M.forEach(N=>{I.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[p]=_.keys()}),re.waitFor(I).next(()=>_)})}lookupMutationBatch(e,t){return Pu(e).get(t).next(r=>r?(St(r.userId===this.userId),od(this.wt,r)):null)}yn(e,t){return this.gn[t]?re.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Pu(e).J({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(St(p.batchId>=r),a=od(this.wt,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Pu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pu(e).K("userMutationsIndex",t).next(r=>r.map(i=>od(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ew(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Kh(e).J({range:i},(c,p,_)=>{const[w,I,M]=c,N=Lo(I);if(w===this.userId&&t.path.isEqual(N))return Pu(e).get(M).next(V=>{if(!V)throw rt();St(V.userId===this.userId),a.push(od(this.wt,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Nt);const i=[];return t.forEach(a=>{const c=ew(this.userId,a.path),p=IDBKeyRange.lowerBound(c),_=Kh(e).J({range:p},(w,I,M)=>{const[N,V,H]=w,ee=Lo(V);N===this.userId&&a.path.isEqual(ee)?r=r.add(H):M.done()});i.push(_)}),re.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ew(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new _n(Nt);return Kh(e).J({range:c},(_,w,I)=>{const[M,N,V]=_,H=Lo(N);M===this.userId&&r.isPrefixOf(H)?H.length===i&&(p=p.add(V)):I.done()}).next(()=>this.pn(e,p))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Pu(e).get(a).next(c=>{if(null===c)throw rt();St(c.userId===this.userId),r.push(od(this.wt,c))}))}),re.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return nD(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),re.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Kh(e).J({range:r},(a,c,p)=>{if(a[0]===this.userId){const _=Lo(a[1]);i.push(_)}else p.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return rD(e,this.userId,t)}Tn(e){return PS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rD(n,e,t){const r=ew(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Kh(n).J({range:a,H:!0},(p,_,w)=>{const[I,M,N]=p;I===e&&M===i&&(c=!0),w.done()}).next(()=>c)}function Pu(n){return li(n,"mutations")}function Kh(n){return li(n,"documentMutations")}function PS(n){return li(n,"mutationQueues")}class Yh{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Yh(0)}static Rn(){return new Yh(-1)}}class uO{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Yh(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Tt.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ng(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ng(e).J((c,p)=>{const _=ad(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>re.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ng(e).J((r,i)=>{const a=ad(i);t(a)})}bn(e){return NS(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}Pn(e,t){return NS(e).put("targetGlobalKey",t)}vn(e,t){return ng(e).put(ry(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Oa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ng(e).J({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const w=ad(p);jp(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Nu(e);return t.forEach(c=>{const p=Ii(c.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),re.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nu(e);return re.forEach(t,a=>{const c=Ii(a.path);return re.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Nu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nu(e);let a=jt();return i.J({range:r,H:!0},(c,p,_)=>{const w=Lo(c[1]),I=new ze(w);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Ii(t.path),i=IDBKeyRange.bound([r],[YE(r)],!1,!0);let a=0;return Nu(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,p],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}te(e,t){return ng(e).get(t).next(r=>r?ad(r):null)}}function ng(n){return li(n,"targets")}function NS(n){return li(n,"targetGlobal")}function Nu(n){return li(n,"targetDocuments")}function FS([n,e],[t,r]){const i=Nt(n,t);return 0===i?Nt(e,r):i}class cO{constructor(e){this.Sn=e,this.buffer=new _n(FS),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bu(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield yu(r)}yield t.kn(3e5)}))}}class hO{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Kr.ot);const r=new cO(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(tD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tD):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,c,p,_,w;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(a=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(w=Date.now(),Tb()<=vl.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-I}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(w-_)+`ms\nTotal Duration: ${w-I}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:M})))}}class s{constructor(e,t){this.db=e,this.garbageCollector=new hO(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return o(e,r)}removeReference(e,t,r){return o(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return o(e,t)}Un(e,t){return function(r,i){let a=!1;return PS(r).Y(c=>rD(r,c,i).next(p=>(p&&(a=!0),re.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(c,p)=>{if(p<=t){const _=this.Un(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),Nu(e).delete([0,Ii(c.path)])))});i.push(_)}}).next(()=>re.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return o(e,t)}Ln(e,t){const r=Nu(e);let i,a=Kr.ot;return r.J({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:w})=>{0===c?(a!==Kr.ot&&t(new ze(Lo(i)),a),a=w,i=_):a=Kr.ot}).next(()=>{a!==Kr.ot&&t(new ze(Lo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function o(n,e){return Nu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ii(e.path),sequenceNumber:r}));var r}class l{constructor(){this.changes=new Al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class d{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return E(e).put(r)}removeEntry(e,t,r){return E(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Xp(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=wn.newInvalidDocument(t);return E(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(C(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:wn.newInvalidDocument(t)};return E(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(C(t))},(i,a)=>{r={document:this.Kn(t,a),size:cy(a)}}).next(()=>r)}getEntries(e,t){let r=Li();return this.Qn(e,t,(i,a)=>{const c=this.Kn(i,a);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=Li(),i=new lr(ze.comparator);return this.Qn(e,t,(a,c)=>{const p=this.Kn(a,c);r=r.insert(a,p),i=i.insert(a,cy(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return re.resolve();let i=new _n(O);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(C(i.first()),C(i.last())),c=i.getIterator();let p=c.getNext();return E(e).J({index:"documentKeyIndex",range:a},(_,w,I)=>{const M=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;p&&O(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,w),p=c.hasNext()?c.getNext():null),p?I.q(C(p)):I.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Xp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return E(e).K(IDBKeyRange.bound(i,a,!0)).next(c=>{let p=Li();for(const _ of c){const w=this.Kn(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(w.key,w)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=Li();const c=A(t,r),p=A(t,cs.max());return E(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,w,I)=>{const M=this.Kn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(M.key,M),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new m(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return v(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}qn(e,t){return v(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function WC(n,e){let t;if(e.document)t=kC(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=xl(e.noDocument.readTime);t=wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=ze.fromSegments(e.unknownDocument.path),i=xl(e.unknownDocument.version);t=wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new zn(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return wn.newInvalidDocument(e)}}function h(n){return new d(n)}class m extends l{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Al(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _n((a,c)=>Nt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,p.readTime)),c.isValidDocument()){const _=Ou(this.zn.wt,c);i=i.add(a.path.popLast()),r+=cy(_)-p.size,t.push(this.zn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=Ou(this.zn.wt,c.convertToNoDocument(Tt.min()));t.push(this.zn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,c)=>{this.Hn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function v(n){return li(n,"remoteDocumentGlobal")}function E(n){return li(n,"remoteDocumentsV14")}function C(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function A(n,e){const t=e.documentKey.path.toArray();return[n,Xp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function O(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Nt(t[a],r[a]),i)return i;return i=Nt(t.length,r.length),i||(i=Nt(t[t.length-2],r[r.length-2]),i||Nt(t[t.length-1],r[r.length-1]))}class F{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class q{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&nd(r.mutation,i,Os.empty(),zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=No();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Kp();return a.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=No();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let a=Li();const c=z_(),p=z_();return t.forEach((_,w)=>{const I=r.get(w.key);i.has(w.key)&&(void 0===I||I.mutation instanceof Sl)?a=a.insert(w.key,w):void 0!==I&&(c.set(w.key,I.mutation.getFieldMask()),nd(I.mutation,w,I.mutation.getFieldMask(),zn.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,I)=>c.set(w,I)),t.forEach((w,I)=>{var M;return p.set(w,new F(I,null!==(M=c.get(w))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=z_();let i=new lr((c,p)=>c-p),a=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let I=r.get(_)||Os.empty();I=p.applyToLocalView(w,I),r.set(_,I);const M=(i.get(p.batchId)||jt()).add(_);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),w=_.key,I=_.value,M=cS();I.forEach(N=>{if(!a.has(N)){const V=jb(t.get(N),r.get(N));null!==V&&M.set(N,V),a=a.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,M))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):H_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):re.resolve(No());let p=-1,_=a;return c.next(w=>re.forEach(w,(I,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),a.get(I)?re.resolve():this.getBaseDocument(e,I,M).next(N=>{_=_.insert(I,N)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,jt())).next(I=>({batchId:p,changes:uS(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Kp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Kp();return this.indexManager.getCollectionParents(e,i).next(c=>re.forEach(c,p=>{const _=(w=t,I=p.child(i),new Tl(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,I;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((I,M)=>{a=a.insert(I,M)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((p,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,wn.newInvalidDocument(w)))});let c=Kp();return i.forEach((p,_)=>{const w=a.get(p);void 0!==w&&nd(w.mutation,_,Os.empty(),zn.now()),Lb(t,_)&&(c=c.insert(p,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(wn.newInvalidDocument(t))}}class Q{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return re.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:iy(r.bundledQuery),readTime:Ur(r.readTime)}),re.resolve();var r}}class be{constructor(){this.overlays=new lr(ze.comparator),this.Xn=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=No();return re.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=No(),a=t.length+1,c=new ze(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new lr((w,I)=>w-I);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let I=a.get(w.largestBatchId);null===I&&(I=No(),a=a.insert(w.largestBatchId,I)),I.set(w.getKey(),w)}}const p=No(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,I)=>p.set(w,I)),!(p.size()>=i)););return re.resolve(p)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new zh(t,r));let a=this.Xn.get(t);void 0===a&&(a=jt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class Ve{constructor(){this.Zn=new _n(Fe.ts),this.es=new _n(Fe.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Fe(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Fe(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new ze(new qt([])),r=new Fe(t,e),i=new Fe(t,e+1),a=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),a.push(c.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ze(new qt([])),r=new Fe(t,e),i=new Fe(t,e+1);let a=jt();return this.es.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Fe(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fe{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ze.comparator(e.key,t.key)||Nt(e.ls,t.ls)}static ns(e,t){return Nt(e.ls,t.ls)||ze.comparator(e.key,t.key)}}class it{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new _n(Fe.ts)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const c=new ZC(a,t,r,i);this.mutationQueue.push(c);for(const p of i)this.ds=this.ds.add(new Fe(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fe(t,0),i=new Fe(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],c=>{const p=this._s(c.ls);a.push(p)}),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Nt);return t.forEach(i=>{const a=new Fe(i,0),c=new Fe(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,c],p=>{r=r.add(p.ls)})}),re.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const c=new Fe(new ze(a),0);let p=new _n(Nt);return this.ds.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(p=p.add(_.ls)),!0)},c),re.resolve(this.gs(p))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return re.forEach(t.mutations,i=>{const a=new Fe(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Fe(t,0),i=this.ds.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return re.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ce{constructor(e){this.ps=e,this.docs=new lr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=Li();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():wn.newInvalidDocument(i))}),re.resolve(r)}getAllFromCollection(e,t,r){let i=Li();const a=new ze(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||JE(XE(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,t,r,i){rt()}Is(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mt(this)}getSize(e){return re.resolve(this.size)}}class mt extends l{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Gt{constructor(e){this.persistence=e,this.Ts=new Al(t=>Oa(t),jp),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Es=0,this.As=new Ve,this.targetCount=0,this.Rs=Yh.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),re.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Yh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.vn(t),re.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Ts.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),re.waitFor(a).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.As.containsKey(t))}}class cn{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Kr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Gt(this),this.indexManager=new ay,this.remoteDocumentCache=new Ce(r=>this.referenceDelegate.Ss(r)),this.wt=new zC(t),this.Ds=new Q(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new be,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new it(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new Ns(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return re.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class Ns extends Uh{constructor(e){super(),this.currentSequenceNumber=e}}class Pa{constructor(e){this.persistence=e,this.ks=new Ve,this.Os=null}static Ms(e){return new Pa(e)}get Fs(){if(this.Os)return this.Os;throw rt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),re.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Fs,r=>{const i=ze.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return re.or([()=>re.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class sw{constructor(e){this.wt=e}O(e,t,r,i){const a=new x_("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FC,{unique:!0}),p.createObjectStore("documentMutations"),hy(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=re.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),hy(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").K().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FC,{unique:!0});const I=_.store("mutations"),M=w.map(N=>I.put(N));return re.waitFor(M)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(c=c.next(()=>this.Us(a))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:sO});_.createIndex("collectionPathOverlayIndex",oO,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",HC,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:vS});_.createIndex("documentKeyIndex",bS),_.createIndex("collectionGroupIndex",VC)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:BC}).createIndex("sequenceNumberIndex",jC,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:ES}).createIndex("documentKeyIndex",CS,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=cy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>re.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(p=>re.forEach(p,_=>{St(_.userId===a.userId);const w=od(this.wt,_);return nD(e,a.userId,w).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((c,p)=>{const _=new qt(c),w=[0,Ii(_)];a.push(t.get(w).next(I=>I?re.resolve():t.put({targetId:0,path:Ii(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>re.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:wS});const r=t.store("collectionParents"),i=new JC,a=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Ii(_)})}};return t.store("remoteDocuments").J({H:!0},(c,p)=>{const _=new qt(c);return a(_.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,p,_],w)=>{const I=Lo(p);return a(I.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=ad(i),c=ry(this.wt,a);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,c)=>{const p=t.store("remoteDocumentsV14"),_=(w=c,w.document?new ze(qt.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):rt()).path.toArray();var w;const I={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(I))}).next(()=>re.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=h(this.wt),a=new cn(Pa.Ms,this.wt.ne);return r.K().next(c=>{const p=new Map;return c.forEach(_=>{var w;let I=null!==(w=p.get(_.userId))&&void 0!==w?w:jt();od(this.wt,_).keys().forEach(M=>I=I.add(M)),p.set(_.userId,I)}),re.forEach(p,(_,w)=>{const I=new Lr(w),M=iw.se(this.wt,I),N=a.getIndexManager(I),V=dy.se(I,this.wt,N,a.referenceDelegate);return new q(i,V,M,N).recalculateAndSaveOverlaysForDocumentKeys(new qC(t,Kr.ot),_).next()})})}}function hy(n){n.createObjectStore("targetDocuments",{keyPath:nw}).createIndex("documentTargetsIndex",UC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qp,{unique:!0}),n.createObjectStore("targetGlobal")}const rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ig{constructor(e,t,r,i,a,c,p,_,w,I,M=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=c,this.document=p,this.Ws=w,this.zs=I,this.Hs=M,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!ig.V())throw new Me(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s(this,i),this.ei=t+"main",this.wt=new zC(_),this.ni=new Sa(this.ei,this.Hs,new sw(this.wt)),this.Vs=new uO(this.referenceDelegate,this.wt),this.remoteDocumentCache=h(this.wt),this.Ds=new lO,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===I&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,rg);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Kr(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(bu(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return ud(e).get("owner").next(t=>re.resolve(this.di(t)))}_i(e){return Qh(e).delete(this.clientId)}wi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=li(r,"clientMetadata");return i.K().next(a=>{const c=e.gi(a,18e5),p=a.filter(_=>-1===c.indexOf(_));return re.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?re.resolve(!0):ud(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qh(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new qC(t,Kr.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Qh(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return dy.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ly(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return iw.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Hs)?aO:14===c?IS:13===c?GC:12===c?DS:11===c?$C:void rt();var c;let p;return this.ni.runTransaction(e,i,a,_=>(p=new qC(_,this.Ps?this.Ps.next():Kr.ot),"readwrite-primary"===t?this.ai(p).next(w=>!!w||this.hi(p)).next(w=>{if(!w)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Me(de.FAILED_PRECONDITION,eC);return r(p)}).next(w=>this.fi(p).next(()=>w)):this.bi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}bi(e){return ud(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(de.FAILED_PRECONDITION,rg)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ud(e).put("owner",t)}static V(){return Sa.V()}li(e){const t=ud(e);return t.get("owner").next(r=>this.di(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ud(n){return li(n,"owner")}function Qh(n){return li(n,"clientMetadata")}function sg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class og{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=jt(),i=jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new og(e,t.fromCache,r,i)}}class fy{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return re.resolve(null)}xi(e,t,r,i){return function iS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Tt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const c=this.ki(t,a);return this.Oi(t,c,r,i)?this.Ni(e,t):(Tb()<=vl.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$_(t)),this.Mi(e,c,t,Sb(i,-1)))})}ki(e,t){let r=new _n(mC(e));return t.forEach((i,a)=>{Lb(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Tb()<=vl.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",$_(t)),this.Di.getDocumentsMatchingQuery(e,t,cs.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class vN{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new lr(Nt),this.Bi=new Al(a=>Oa(a),jp),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function fO(n,e,t,r){return new vN(n,e,t,r)}function pO(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,ge.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let _=jt();for(const w of i){c.push(w.batchId);for(const I of w.mutations)_=_.add(I.key)}for(const w of a){p.push(w.batchId);for(const I of w.mutations)_=_.add(I.key)}return t.localDocuments.getDocuments(r,_).next(w=>({Ki:w,removedBatchIds:c,addedBatchIds:p}))})})}),LS.apply(this,arguments)}function bN(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,p,_,w){const I=_.batch,M=I.keys();let N=re.resolve();return M.forEach(V=>{N=N.next(()=>w.getEntry(p,V)).next(H=>{const ee=_.docVersions.get(V);St(null!==ee),H.version.compareTo(ee)<0&&(I.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),w.addEntry(H)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(p,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=jt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gO(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function wN(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const p=[];e.targetChanges.forEach((I,M)=>{const N=i.get(M);if(!N)return;p.push(t.Vs.removeMatchingKeys(a,I.removedDocuments,M).next(()=>t.Vs.addMatchingKeys(a,I.addedDocuments,M)));let V=N.withSequenceNumber(a.currentSequenceNumber);var H,ee,ue;e.targetMismatches.has(M)?V=V.withResumeToken(Wn.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):I.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(I.resumeToken,r)),i=i.insert(M,V),ee=V,ue=I,(0===(H=N).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&p.push(t.Vs.updateTargetData(a,V))});let _=Li(),w=jt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),p.push(mO(a,c,e.documentUpdates).next(I=>{_=I.Gi,w=I.Qi})),!r.isEqual(Tt.min())){const I=t.Vs.getLastRemoteSnapshotVersion(a).next(M=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(I)}return re.waitFor(p).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.$i=i,a))}function mO(n,e,t){let r=jt(),i=jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Li();return t.forEach((p,_)=>{const w=a.get(p);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Tt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):Ne("LocalStore","Ignoring outdated watch update for ",p,". Current version:",w.version," Watch version:",_.version)}),{Gi:c,Qi:i}})}function EN(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function py(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,re.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new xu(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function gy(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!bu(c))throw c;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),VS.apply(this,arguments)}function iD(n,e,t){const r=Ye(n);let i=Tt.min(),a=jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,w){const I=Ye(p),M=I.Bi.get(w);return void 0!==M?re.resolve(I.$i.get(M)):I.Vs.getTargetData(_,w)}(r,c,Rs(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{a=_})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:Tt.min(),t?a:jt())).next(p=>(vO(r,Vb(e),p),{documents:p,ji:a})))}function _O(n,e){const t=Ye(n),r=Ye(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(c=>c?c.target:null))}function yO(n,e){const t=Ye(n),r=t.Li.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,Sb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vO(t,e,i),i))}function vO(n,e,t){let r=Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function US(){return US=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n);let a=jt(),c=Li();for(const w of t){const I=e.Wi(w.metadata.name);w.document&&(a=a.add(I));const M=e.zi(w);M.setReadTime(e.Hi(w.metadata.readTime)),c=c.insert(I,M)}const p=i.Ui.newChangeBuffer({trackRemovals:!0}),_=yield py(i,(w=r,Rs($h(qt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>mO(w,p,c).next(I=>(p.apply(w),I)).next(I=>i.Vs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Vs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,I.Gi,I.Qi)).next(()=>I.Gi)))}),US.apply(this,arguments)}function DN(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,ge.Z)(function*(n,e,t=jt()){const r=yield py(n,Rs(iy(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Ur(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(a,e);const p=r.withResumeToken(Wn.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(p.targetId,p),i.Vs.updateTargetData(a,p).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),BS.apply(this,arguments)}function bO(n,e){return`firestore_clients_${n}_${e}`}function wO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jS(n,e){return`firestore_targets_${n}_${e}`}class sD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Me(i.error.code,i.error.message))),c?new sD(e,t,i.state,a):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ow{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new ow(e,r.state,i):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Zb();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=sC(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new oD(e,a):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HS{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HS(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $S{constructor(){this.activeTargetIds=Zb()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GS{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new lr(Nt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=bO(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new $S),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(bO(e.persistenceKey,i));if(a){const c=oD.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jS(this.persistenceKey,e));if(r){const i=ow.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=Kr.ot;if(null!=a)try{const p=JSON.parse(a);St("number"==typeof p),c=p}catch(p){ar("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Kr.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new sD(this.currentUser,e,t,r),a=wO(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=wO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=jS(this.persistenceKey,e),a=new ow(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return oD.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return sD.Ji(new Lr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return ow.Ji(i,t)}wr(e){return HS.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],p=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Mr(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Zb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class EO{constructor(){this.Fr=new $S,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new $S,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IN{Br(e){}shutdown(){}}class CO{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const TN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class SN{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class AN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);Ne("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,a),this.co(e,c,p,r).then(_=>(Ne("RestConnection","Received: ",_),_),_=>{throw xp("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}ao(e,t,r,i,a,c){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${TN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,c)=>{const p=new Lh;p.listenOnce(UT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Db.NO_ERROR:const w=p.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Db.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),c(new Me(de.DEADLINE_EXCEEDED,"Request time out"));break;case Db.HTTP_ERROR:const I=p.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',I,"response text:",p.getResponseText()),I>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const N=function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(H)>=0?H:de.UNKNOWN}(M.status);c(new Me(N,M.message))}else c(new Me(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Me(de.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LT(),c=VT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new jT({})),this.uo(p.initMessageHeaders,t,r),(0,Dt.uI)()||(0,Dt.b$)()||(0,Dt.d)()||(0,Dt.w1)()||(0,Dt.Mn)()||(0,Dt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Ne("Connection","Creating WebChannel: "+_,p);const w=a.createWebChannel(_,p);let I=!1,M=!1;const N=new SN({jr:H=>{M?Ne("Connection","Not sending because WebChannel is closed:",H):(I||(Ne("Connection","Opening WebChannel transport."),w.open(),I=!0),Ne("Connection","WebChannel sending:",H),w.send(H))},Wr:()=>w.close()}),V=(H,ee,ue)=>{H.listen(ee,Ge=>{try{ue(Ge)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return V(w,S_.EventType.OPEN,()=>{M||Ne("Connection","WebChannel transport opened.")}),V(w,S_.EventType.CLOSE,()=>{M||(M=!0,Ne("Connection","WebChannel transport closed"),N.eo())}),V(w,S_.EventType.ERROR,H=>{M||(M=!0,xp("Connection","WebChannel transport errored:",H),N.eo(new Me(de.UNAVAILABLE,"The operation could not be completed")))}),V(w,S_.EventType.MESSAGE,H=>{var ee;if(!M){const ue=H.data[0];St(!!ue);const Ge=ue,Qe=Ge.error||(null===(ee=Ge[0])||void 0===ee?void 0:ee.error);if(Qe){Ne("Connection","WebChannel received error:",Qe);const $e=Qe.status;let Be=function(xt){const en=Mr[xt];if(void 0!==en)return qb(en)}($e),wt=Qe.message;void 0===Be&&(Be=de.INTERNAL,wt="Unknown error status: "+$e+" with message "+Qe.message),M=!0,N.eo(new Me(Be,wt)),w.close()}else Ne("Connection","WebChannel received:",ue),N.no(ue)}}),V(c,BT.STAT_EVENT,H=>{H.stat===Ib.PROXY?Ne("Connection","Detected buffering proxy"):H.stat===Ib.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function DO(){return"undefined"!=typeof window?window:null}function aD(){return"undefined"!=typeof document?document:null}function aw(n){return new AC(n,!0)}class qS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class IO{constructor(e,t,r,i,a,c,p,_){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new qS(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Me(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MN extends IO{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function fS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:rt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.dt?(St(void 0===w||"string"==typeof w),Wn.fromBase64String(w||"")):(St(void 0===w||w instanceof Uint8Array),Wn.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const w=void 0===_.code?de.UNKNOWN:qb(_.code);return new Me(w,_.message||"")}(c);t=new id(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ra(n,r.document.name),a=Ur(r.document.updateTime),c=new mr({mapValue:{fields:r.document.fields}}),p=wn.newFoundDocument(i,a,c);t=new zb(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ra(n,r.document),a=r.readTime?Ur(r.readTime):Tt.min(),c=wn.newNoDocument(i,a);t=new zb([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ra(n,r.document);t=new zb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return rt();{const r=e.filter,a=new lS(r.count||0);t=new K_(r.targetId,a)}}var _;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?Ur(a.readTime):Tt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=ey(this.wt),t.addTarget=function(i,a){let c;const p=a.target;return c=F_(p)?{documents:ny(i,p)}:{query:Qb(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=Kb(i,a.resumeToken):a.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=Q_(i,a.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function gS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=ey(this.wt),t.removeTarget=e,this.Mo(t)}}class xN extends IO{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function pS(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let a=Ur(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=Ur(i)),new bC(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Jo(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=ey(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sd(this.wt,r))};this.Mo(t)}}class ON extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(de.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.ao(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(de.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class kN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ar(t),this.su=!1):Ne("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class RN{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;Xh(c)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(w){const I=Ye(w);I.lu.add(4),yield my(I),I._u.set("Unknown"),I.lu.delete(4),yield lw(I)}),function(w){return _.apply(this,arguments)})(c))}))}),this._u=new kN(r,i)}}function lw(n){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,ge.Z)(function*(n){if(Xh(n))for(const e of n.fu)yield e(!0)}),ZS.apply(this,arguments)}function my(n){return zS.apply(this,arguments)}function zS(){return zS=(0,ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),zS.apply(this,arguments)}function lD(n,e){const t=Ye(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),YS(t)?KS(t):yy(t).Co()&&WS(t,e))}function uw(n,e){const t=Ye(n),r=yy(t);t.hu.delete(e),r.Co()&&TO(t,e),0===t.hu.size&&(r.Co()?r.ko():Xh(t)&&t._u.set("Unknown"))}function WS(n,e){n.wu.Nt(e.targetId),yy(n).Qo(e)}function TO(n,e){n.wu.Nt(e),yy(n).jo(e)}function KS(n){n.wu=new dS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),yy(n).start(),n._u.iu()}function YS(n){return Xh(n)&&!yy(n).Do()&&n.hu.size>0}function Xh(n){return 0===Ye(n).lu.size}function SO(n){n.wu=void 0}function PN(n){return QS.apply(this,arguments)}function QS(){return QS=(0,ge.Z)(function*(n){n.hu.forEach((e,t)=>{WS(n,e)})}),QS.apply(this,arguments)}function NN(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,ge.Z)(function*(n,e){SO(n),YS(n)?(n._u.uu(e),KS(n)):n._u.set("Unknown")}),XS.apply(this,arguments)}function FN(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof id&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uD(n,r)}else if(e instanceof zb?n.wu.Ut(e):e instanceof K_?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Tt.min()))try{const r=yield gO(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.Yt(a);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const w=i.hu.get(_);w&&i.hu.set(_,w.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const _=i.hu.get(p);if(!_)return;i.hu.set(p,_.withResumeToken(Wn.EMPTY_BYTE_STRING,_.snapshotVersion)),TO(i,p);const w=new xu(_.target,p,1,_.sequenceNumber);WS(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield uD(n,r)}var r}),JS.apply(this,arguments)}function uD(n,e,t){return eA.apply(this,arguments)}function eA(){return eA=(0,ge.Z)(function*(n,e,t){if(!bu(e))throw e;n.lu.add(1),yield my(n),n._u.set("Offline"),t||(t=()=>gO(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield lw(n)}))}),eA.apply(this,arguments)}function AO(n,e){return e().catch(t=>uD(n,t,e))}function _y(n){return tA.apply(this,arguments)}function tA(){return tA=(0,ge.Z)(function*(n){const e=Ye(n),t=Jh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;LN(e);)try{const i=yield EN(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,VN(e,i)}catch(i){yield uD(e,i)}MO(e)&&xO(e)}),tA.apply(this,arguments)}function LN(n){return Xh(n)&&n.au.length<10}function VN(n,e){n.au.push(e);const t=Jh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function MO(n){return Xh(n)&&!Jh(n).Do()&&n.au.length>0}function xO(n){Jh(n).start()}function UN(n){return nA.apply(this,arguments)}function nA(){return nA=(0,ge.Z)(function*(n){Jh(n).Xo()}),nA.apply(this,arguments)}function BN(n){return rA.apply(this,arguments)}function rA(){return rA=(0,ge.Z)(function*(n){const e=Jh(n);for(const t of n.au)e.Ho(t.mutations)}),rA.apply(this,arguments)}function jN(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,ge.Z)(function*(n,e,t){const r=n.au.shift(),i=rw.from(r,e,t);yield AO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _y(n)}),iA.apply(this,arguments)}function HN(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ge.Z)(function*(n,e){var t;e&&Jh(n).zo&&(yield(t=(0,ge.Z)(function*(r,i){if(EC(a=i.code)&&a!==de.ABORTED){const c=r.au.shift();Jh(r).No(),yield AO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield _y(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),MO(n)&&xO(n)}),sA.apply(this,arguments)}function OO(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ge.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Xh(t);t.lu.add(3),yield my(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield lw(t)}),oA.apply(this,arguments)}function aA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,ge.Z)(function*(n,e){const t=Ye(n);e?(t.lu.delete(2),yield lw(t)):e||(t.lu.add(2),yield my(t),t._u.set("Unknown"))}),lA.apply(this,arguments)}function yy(n){return n.mu||(n.mu=function(e,t,r){const i=Ye(e);return i.tu(),new MN(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:PN.bind(null,n),Jr:NN.bind(null,n),Go:FN.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.mu.No(),YS(n)?KS(n):n._u.set("Unknown")):(yield n.mu.stop(),SO(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Jh(n){return n.gu||(n.gu=function(e,t,r){const i=Ye(e);return i.tu(),new xN(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:UN.bind(null,n),Jr:HN.bind(null,n),Yo:BN.bind(null,n),Jo:jN.bind(null,n)}),n.fu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.gu.No(),yield _y(n)):(yield n.gu.stop(),n.au.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class uA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new uA(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(n,e){if(ar("AsyncQueue",`${e}: ${n}`),bu(n))return new Me(de.UNAVAILABLE,`${e}: ${n}`);throw n}class by{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Kp(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new by(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof by)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new by;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kO{constructor(){this.yu=new lr(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):rt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wy{constructor(e,t,r,i,a,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new wy(e,t,by.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class $N{constructor(){this.Iu=void 0,this.listeners=[]}}class GN{constructor(){this.queries=new Al(e=>Fb(e),qp),this.onlineState="Unknown",this.Tu=new Set}}function cA(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new $N),i)try{a.Iu=yield t.onListen(r)}catch(c){const p=vy(c,`Initialization of query '${$_(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&pA(t)}),dA.apply(this,arguments)}function hA(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),fA.apply(this,arguments)}function qN(n,e){const t=Ye(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&pA(t)}function ZN(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function pA(n){n.Tu.forEach(e=>{e.next()})}class gA{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=wy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class zN{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class RO{constructor(e){this.wt=e}Wi(e){return Ra(this.wt,e)}zi(e){return e.metadata.exists?kC(this.wt,e.document,!1):wn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ur(e)}}class WN{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PO(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new RO(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||jt()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function CN(n,e,t,r){return US.apply(this,arguments)}(e.localStore,new RO(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield DN(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function PO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class NO{constructor(e){this.key=e}}class FO{constructor(e){this.key=e}}class LO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=jt(),this.mutatedKeys=jt(),this.Lu=mC(e),this.Uu=new by(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new kO,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,M)=>{const N=i.get(I),V=Lb(this.query,M)?M:null,H=!!N&&this.mutatedKeys.has(N.key),ee=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ue=!1;N&&V?N.data.isEqual(V.data)?H!==ee&&(r.track({type:3,doc:V}),ue=!0):this.Qu(N,V)||(r.track({type:2,doc:V}),ue=!0,(_&&this.Lu(V,_)>0||w&&this.Lu(V,w)<0)&&(p=!0)):!N&&V?(r.track({type:0,doc:V}),ue=!0):N&&!V&&(r.track({type:1,doc:N}),ue=!0,(_||w)&&(p=!0)),ue&&(V?(c=c.add(V),a=ee?a.add(I):a.delete(I)):(c=c.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const I="F"===this.query.limitType?c.last():c.first();c=c.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Uu:c,Gu:r,Oi:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((w,I)=>function(M,N){const V=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return V(M)-V(N)}(w.type,I.type)||this.Lu(w.doc,I.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,_=p!==this.$u;return this.$u=p,0!==a.length||_?{snapshot:new wy(this.query,e.Uu,i,a,e.mutatedKeys,0===p,_,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new kO,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=jt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new FO(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new NO(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=jt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return wy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class KN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YN{constructor(e){this.key=e,this.Xu=!1}}class QN{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Al(p=>Fb(p),qp),this.ec=new Map,this.nc=new Set,this.sc=new lr(ze.comparator),this.ic=new Map,this.rc=new Ve,this.oc={},this.uc=new Map,this.cc=Yh.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function XN(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,ge.Z)(function*(n,e){const t=UA(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield py(t.localStore,Rs(e));t.isPrimaryClient&&lD(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield _A(t,e,r,"current"===p)}return i}),mA.apply(this,arguments)}function _A(n,e,t,r){return yA.apply(this,arguments)}function yA(){return yA=(0,ge.Z)(function*(n,e,t,r){n.hc=(I,M,N)=>{return(V=(0,ge.Z)(function*(H,ee,ue,Ge){let Qe=ee.view.Ku(ue);Qe.Oi&&(Qe=yield iD(H.localStore,ee.query,!1).then(({documents:wt})=>ee.view.Ku(wt,Qe)));const $e=Ge&&Ge.targetChanges.get(ee.targetId),Be=ee.view.applyChanges(Qe,H.isPrimaryClient,$e);return AA(H,ee.targetId,Be.zu),Be.snapshot}),function(H,ee,ue,Ge){return V.apply(this,arguments)})(n,I,M,N);var V};const i=yield iD(n.localStore,e,!0),a=new LO(e,i.ji),c=a.Ku(i.documents),p=Au.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,p);AA(n,t,_.zu);const w=new KN(e,t,a);return n.tc.set(e,w),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),_.snapshot}),yA.apply(this,arguments)}function JN(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,ge.Z)(function*(n,e){const t=Ye(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!qp(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),uw(t.remoteStore,r.targetId),Ey(t,r.targetId)}).catch(yu))):(Ey(t,r.targetId),yield gy(t.localStore,r.targetId,!0))}),vA.apply(this,arguments)}function bA(){return bA=(0,ge.Z)(function*(n,e,t){const r=BA(n);try{const i=yield function(a,c){const p=Ye(a),_=zn.now(),w=c.reduce((N,V)=>N.add(V.key),jt());let I,M;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let V=Li(),H=jt();return p.Ui.getEntries(N,w).next(ee=>{V=ee,V.forEach((ue,Ge)=>{Ge.isValidDocument()||(H=H.add(ue))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,V)).next(ee=>{I=ee;const ue=[];for(const Ge of c){const Qe=Hb(Ge,I.get(Ge.key).overlayedDocument);null!=Qe&&ue.push(new Sl(Ge.key,Qe,uC(Qe.value.mapValue),tr.exists(!0)))}return p.mutationQueue.addMutationBatch(N,_,ue,c)}).next(ee=>{M=ee;const ue=ee.applyToLocalDocumentSet(I,H);return p.documentOverlayCache.saveOverlays(N,ee.batchId,ue)})}).then(()=>({batchId:M.batchId,changes:uS(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let _=a.oc[a.currentUser.toKey()];_||(_=new lr(Nt)),_=_.insert(c,p),a.oc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield cd(r,i.changes),yield _y(r.remoteStore)}catch(i){const a=vy(i,"Failed to persist write");t.reject(a)}}),bA.apply(this,arguments)}function VO(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ge.Z)(function*(n,e){const t=Ye(n);try{const r=yield wN(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ic.get(a);c&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?St(c.Xu):i.removedDocuments.size>0&&(St(c.Xu),c.Xu=!1))}),yield cd(t,r,e)}catch(r){yield yu(r)}}),wA.apply(this,arguments)}function UO(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=Ye(a);p.onlineState=c;let _=!1;p.queries.forEach((w,I)=>{for(const M of I.listeners)M.Eu(c)&&(_=!0)}),_&&pA(p)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tF(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,ge.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let c=new lr(ze.comparator);c=c.insert(a,wn.newNoDocument(a,Tt.min()));const p=jt().add(a),_=new W_(Tt.min(),new Map,new _n(Nt),c,p);yield VO(r,_),r.sc=r.sc.remove(a),r.ic.delete(e),MA(r)}else yield gy(r.localStore,e,!1).then(()=>Ey(r,e,t)).catch(yu)}),EA.apply(this,arguments)}function nF(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield bN(t.localStore,e);SA(t,r,null),TA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cd(t,i)}catch(i){yield yu(i)}}),CA.apply(this,arguments)}function rF(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,ge.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,c){const p=Ye(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return p.mutationQueue.lookupMutationBatch(_,c).next(I=>(St(null!==I),w=I.keys(),p.mutationQueue.removeMutationBatch(_,I))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>p.localDocuments.getDocuments(_,w))})}(r.localStore,e);SA(r,e,t),TA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cd(r,i)}catch(i){yield yu(i)}}),DA.apply(this,arguments)}function IA(){return IA=(0,ge.Z)(function*(n,e){const t=Ye(n);Xh(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Ye(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=vy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),IA.apply(this,arguments)}function TA(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function SA(n,e,t){const r=Ye(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||BO(n,r)})}function BO(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(uw(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),MA(n))}function AA(n,e,t){for(const r of t)r instanceof NO?(n.rc.addReference(r.key,e),sF(n,r)):r instanceof FO?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||BO(n,r.key)):rt()}function sF(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.nc.add(r),MA(n))}function MA(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new ze(qt.fromString(e)),r=n.cc.next();n.ic.set(r,new YN(t)),n.sc=n.sc.insert(t,r),lD(n.remoteStore,new xu(Rs($h(t.path)),r,2,Kr.ot))}}function cd(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],c=[];var p;r.tc.isEmpty()||(r.tc.forEach((p,_)=>{c.push(r.hc(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const I=og.Vi(_.targetId,w);a.push(I)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(p=(0,ge.Z)(function*(_,w){const I=Ye(_);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>re.forEach(w,N=>re.forEach(N.Pi,V=>I.persistence.referenceDelegate.addReference(M,N.targetId,V)).next(()=>re.forEach(N.vi,V=>I.persistence.referenceDelegate.removeReference(M,N.targetId,V)))))}catch(M){if(!bu(M))throw M;Ne("LocalStore","Failed to update sequence numbers: "+M)}for(const M of w){const N=M.targetId;if(!M.fromCache){const V=I.$i.get(N),ee=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);I.$i=I.$i.insert(N,ee)}}}),function(_,w){return p.apply(this,arguments)})(r.localStore,a))}),xA.apply(this,arguments)}function oF(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ge.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield pO(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(p=>{p.reject(new Me(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cd(t,r.Ki)}var i}),OA.apply(this,arguments)}function aF(n,e){const t=Ye(n),r=t.ic.get(e);if(r&&r.Xu)return jt().add(r.key);{let i=jt();const a=t.ec.get(e);if(!a)return i;for(const c of a){const p=t.tc.get(c);i=i.unionWith(p.view.qu)}return i}}function lF(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,ge.Z)(function*(n,e){const t=Ye(n),r=yield iD(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&AA(t,e.targetId,i.zu),i}),kA.apply(this,arguments)}function uF(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,ge.Z)(function*(n,e){const t=Ye(n);return yO(t.localStore,e).then(r=>cd(t,r))}),RA.apply(this,arguments)}function cF(n,e,t,r){return PA.apply(this,arguments)}function PA(){return PA=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(c,p){const _=Ye(c),w=Ye(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",I=>w.yn(I,p).next(M=>M?_.localDocuments.getDocuments(I,M):re.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield _y(i.remoteStore):"acknowledged"===t||"rejected"===t?(SA(i,e,r||null),TA(i,e),p=e,Ye(Ye(i.localStore).mutationQueue).In(p)):rt(),yield cd(i,a)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),PA.apply(this,arguments)}function NA(){return NA=(0,ge.Z)(function*(n,e){const t=Ye(n);if(UA(t),BA(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jO(t,r.toArray());t.ac=!0,yield aA(t.remoteStore,!0);for(const a of i)lD(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Ey(t,c),gy(t.localStore,c,!0))),uw(t.remoteStore,c)}),yield i,yield jO(t,r),function(a){const c=Ye(a);c.ic.forEach((p,_)=>{uw(c.remoteStore,_)}),c.rc.cs(),c.ic=new Map,c.sc=new lr(ze.comparator)}(t),t.ac=!1,yield aA(t.remoteStore,!1)}}),NA.apply(this,arguments)}function jO(n,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,ge.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const c of e){let p;const _=r.ec.get(c);if(_&&0!==_.length){p=yield py(r.localStore,Rs(_[0]));for(const w of _){const I=r.tc.get(w),M=yield lF(r,I);M.snapshot&&a.push(M.snapshot)}}else{const w=yield _O(r.localStore,c);p=yield py(r.localStore,w),yield _A(r,HO(w),c,!1)}i.push(p)}return r.Zu.Go(a),i}),FA.apply(this,arguments)}function HO(n){return gC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function hF(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Ri()}function fF(n,e,t,r){return LA.apply(this,arguments)}function LA(){return LA=(0,ge.Z)(function*(n,e,t,r){const i=Ye(n);if(i.ac)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield yO(i.localStore,Vb(a[0])),p=W_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cd(i,c,p);break}case"rejected":yield gy(i.localStore,e,!0),Ey(i,e,r);break;default:rt()}}),LA.apply(this,arguments)}function pF(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,ge.Z)(function*(n,e,t){const r=UA(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Ne("SyncEngine","Adding an already active target "+i);continue}const a=yield _O(r.localStore,i),c=yield py(r.localStore,a);yield _A(r,HO(a),c.targetId,!1),lD(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield gy(r.localStore,i,!1).then(()=>{uw(r.remoteStore,i),Ey(r,i)}).catch(yu))}}),VA.apply(this,arguments)}function UA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tF.bind(null,e),e.Zu.Go=qN.bind(null,e.eventManager),e.Zu.lc=ZN.bind(null,e.eventManager),e}function BA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rF.bind(null,e),e}class $O{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.wt=aw(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return fO(this.persistence,new fy,e.initialUser,this.wt)}_c(e){return new cn(Pa.Ms,this.wt)}dc(e){return new EO}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GO extends $O{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield BA(r.yc.syncEngine),yield _y(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return fO(this.persistence,new fy,e.initialUser,this.wt)}mc(e,t){return new dO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new k_(t,this.persistence);return new Mb(e.asyncQueue,r)}_c(e){const t=sg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new ig(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DO(),aD(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new EO}}class mF extends GO{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof GS&&(r.sharedClientState.syncEngine={kr:cF.bind(null,i),Or:fF.bind(null,i),Mr:pF.bind(null,i),Ri:hF.bind(null,i),Nr:uF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,ge.Z)(function*(c){yield function dF(n,e){return NA.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}dc(e){const t=DO();if(!GS.V(t))throw new Me(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jA{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>UO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=oF.bind(null,r.syncEngine),yield aA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GN}createDatastore(e){const t=aw(e.databaseInfo.databaseId),r=new AN(e.databaseInfo);return new ON(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>UO(this.syncEngine,p,0),c=CO.V()?new CO:new IN,new RN(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,_,w){const I=new QN(r,i,a,c,p,_);return w&&(I.ac=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ye(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield my(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function qO(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _F{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new zN(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ge.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class yF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(a,c){const p=Ye(a),_=ey(p.wt)+"/documents",w={documents:c.map(V=>J_(p.wt,V))},I=yield p.ao("BatchGetDocuments",_,w,c.length),M=new Map;I.forEach(V=>{const H=function Ps(n,e){return"found"in e?function(t,r){St(!!r.found);const i=Ra(t,r.found.name),a=Ur(r.found.updateTime),c=new mr({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=Ra(t,r.missing),a=Ur(r.readTime);return wn.newNoDocument(i,a)}(n,e):rt()}(p.wt,V);M.set(H.key.toString(),H)});const N=[];return c.forEach(V=>{const H=M.get(V.toString());St(!!H),N.push(H)}),N}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new Z_(a,e.precondition(a)))}),yield(r=(0,ge.Z)(function*(i,a){const c=Ye(i),p=ey(c.wt)+"/documents",_={writes:a.map(w=>sd(c.wt,w))};yield c.ro("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Me(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vF{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new qS(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ge.Z)(function*(){const t=new yF(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!zc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!EC(t)}return!1}}class bF{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Lr.UNAUTHENTICATED,this.clientId=KE.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ge.Z)(function*(p){Ne("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ne("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=vy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ZO(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(a){r.isEqual(a)||(yield pO(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),HA.apply(this,arguments)}function zO(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GA(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>OO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>OO(e.remoteStore,a)),n.onlineComponents=e}),$A.apply(this,arguments)}function GA(n){return qA.apply(this,arguments)}function qA(){return qA=(0,ge.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield ZO(n,new $O)),n.offlineComponents}),qA.apply(this,arguments)}function dD(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ge.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield zO(n,new jA)),n.onlineComponents}),ZA.apply(this,arguments)}function WO(n){return GA(n).then(e=>e.persistence)}function zA(n){return GA(n).then(e=>e.localStore)}function KO(n){return dD(n).then(e=>e.remoteStore)}function WA(n){return dD(n).then(e=>e.syncEngine)}function Cy(n){return KA.apply(this,arguments)}function KA(){return KA=(0,ge.Z)(function*(n){const e=yield dD(n),t=e.eventManager;return t.onListen=XN.bind(null,e.syncEngine),t.onUnlisten=JN.bind(null,e.syncEngine),t}),KA.apply(this,arguments)}function YO(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,p,_){const w=new cD({next:M=>{a.enqueueAndForget(()=>hA(i,I));const N=M.docs.has(c);!N&&M.fromCache?_.reject(new Me(de.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&M.fromCache&&p&&"server"===p.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new gA($h(c.path),w,{includeMetadataChanges:!0,Du:!0});return cA(i,I)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}function QO(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,a,c,p,_){const w=new cD({next:M=>{a.enqueueAndForget(()=>hA(i,I)),M.fromCache&&"server"===p.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new gA(c,w,{includeMetadataChanges:!0,Du:!0});return cA(i,I)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}const XO=new Map;function YA(n,e,t){if(!t)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JO(n,e,t,r){if(!0===e&&!0===r)throw new Me(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ek(n){if(!ze.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tk(n){if(ze.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hD(n);throw new Me(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nk(n,e){if(e<=0)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class rk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,JO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rk({}),this._settingsFrozen=!1,e instanceof Aa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $T;switch(t.type){case"gapi":const r=t.client;return St(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=XO.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),XO.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class hs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Fu extends hs{constructor(e,t,r){super(e,t,$h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new ze(e))}withConverter(e){return new Fu(this.firestore,e,this._path)}}function ik(n,e,...t){if(n=(0,Dt.m9)(n),YA("collection","path",e),n instanceof cw){const r=qt.fromString(e,...t);return tk(r),new Fu(n,null,r)}{if(!(n instanceof nr||n instanceof Fu))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return tk(r),new Fu(n.firestore,null,r)}}function fD(n,e,...t){if(n=(0,Dt.m9)(n),1===arguments.length&&(e=KE.I()),YA("doc","path",e),n instanceof cw){const r=qt.fromString(e,...t);return ek(r),new nr(n,null,new ze(r))}{if(!(n instanceof nr||n instanceof Fu))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return ek(r),new nr(n.firestore,n instanceof Fu?n.converter:null,new ze(r))}}function sk(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),(n instanceof nr||n instanceof Fu)&&(e instanceof nr||e instanceof Fu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ok(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),n instanceof hs&&e instanceof hs&&n.firestore===e.firestore&&qp(n._query,e._query)&&n.converter===e.converter}class OF{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new qS(this,"async_queue_retry"),this.Kc=()=>{const t=aD();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=aD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=aD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Vr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!bu(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,ar("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=uA.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&rt()}verifyOperationInProgress(){}zc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function QA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class kF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends cw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new OF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ak(this),this._firestoreClient.terminate()}}function Yr(n){return n._firestoreClient||ak(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ak(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Xx(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new bF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function lk(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield ZO(n,t),yield zO(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===de.FAILED_PRECONDITION||c.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function uk(n){if(n._initialized||n._terminated)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(Wn.fromBase64String(e))}catch(t){throw new Me(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lu(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ag{constructor(e){this._methodName=e}}class pD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const HF=/^__.*__$/;class $F{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new qh(e,this.data,t,this.fieldTransforms)}}class ck{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class gD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new gD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return yD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(dk(this.Zc)&&HF.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class GF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||aw(e)}aa(e,t,r,i=!1){return new gD({Zc:e,methodName:t,ca:r,path:er.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function lg(n){const e=n._freezeSettings(),t=aw(n._databaseId);return new GF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mD(n,e,t,r,i,a={}){const c=n.aa(a.merge||a.mergeFields?2:0,e,t,i);tM("Data must be an object, but it was:",c,r);const p=pk(r,c);let _,w;if(a.merge)_=new Os(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const I=[];for(const M of a.mergeFields){const N=nM(e,M,t);if(!c.contains(N))throw new Me(de.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);mk(I,N)||I.push(N)}_=new Os(I),w=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,w=c.fieldTransforms;return new $F(new mr(p),_,w)}class dw extends ag{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dw}}function hk(n,e,t){return new gD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class XA extends ag{_toFieldTransform(e){return new ed(e.path,new Gh)}isEqual(e){return e instanceof XA}}class qF extends ag{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=hk(this,e,!0),r=this.ha.map(a=>ug(a,t)),i=new Su(r);return new ed(e.path,i)}isEqual(e){return this===e}}class ZF extends ag{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=hk(this,e,!0),r=this.ha.map(a=>ug(a,t)),i=new Xc(r);return new ed(e.path,i)}isEqual(e){return this===e}}class zF extends ag{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Jc(e.wt,yC(e.wt,this.la));return new ed(e.path,t)}isEqual(e){return this===e}}function JA(n,e,t,r){const i=n.aa(1,e,t);tM("Data must be an object, but it was:",i,r);const a=[],c=mr.empty();wu(r,(_,w)=>{const I=_D(e,_,t);w=(0,Dt.m9)(w);const M=i.ia(I);if(w instanceof dw)a.push(I);else{const N=ug(w,M);null!=N&&(a.push(I),c.set(I,N))}});const p=new Os(a);return new ck(c,p,i.fieldTransforms)}function eM(n,e,t,r,i,a){const c=n.aa(1,e,t),p=[nM(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)p.push(nM(e,a[N])),_.push(a[N+1]);const w=[],I=mr.empty();for(let N=p.length-1;N>=0;--N)if(!mk(w,p[N])){const V=p[N];let H=_[N];H=(0,Dt.m9)(H);const ee=c.ia(V);if(H instanceof dw)w.push(V);else{const ue=ug(H,ee);null!=ue&&(w.push(V),I.set(V,ue))}}const M=new Os(w);return new ck(I,M,c.fieldTransforms)}function fk(n,e,t,r=!1){return ug(t,n.aa(r?4:3,e))}function ug(n,e){if(gk(n=(0,Dt.m9)(n)))return tM("Unsupported field value:",e,n),pk(n,e);if(n instanceof ag)return function(t,r){if(!dk(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=ug(c,r.ra(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yC(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=zn.fromDate(t);return{timestampValue:Q_(r.wt,i)}}if(t instanceof zn){const i=new zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Q_(r.wt,i)}}if(t instanceof pD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lu)return{bytesValue:Kb(r.wt,t._byteString)};if(t instanceof nr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:MC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${hD(t)}`)}(n,e)}function pk(n,e){const t={};return xb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wu(n,(r,i)=>{const a=ug(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function gk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof pD||n instanceof Lu||n instanceof nr||n instanceof ag)}function tM(n,e,t){if(!gk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function nM(n,e,t){if((e=(0,Dt.m9)(e))instanceof dd)return e._internalPath;if("string"==typeof e)return _D(n,e);throw yD("Field path arguments must be of type string or ",n,!1,void 0,t)}const WF=new RegExp("[~\\*/\\[\\]]");function _D(n,e,t){if(e.search(WF)>=0)throw yD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dd(...e.split("."))._internalPath}catch(r){throw yD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yD(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Me(de.INVALID_ARGUMENT,p+n+_)}function mk(n,e){return n.some(t=>t.isEqual(e))}class hw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KF extends hw{data(){return super.data()}}function vD(n,e){return"string"==typeof e?_D(n,e):e instanceof dd?e._internalPath:e._delegate._internalPath}class cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hd extends hw{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fw extends hd{data(e={}){return super.data(e)}}class ef{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fw(this._firestore,this._userDataWriter,r.key,r,new cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new fw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new fw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new cg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:YF(c.type),doc:p,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function _k(n,e){return n instanceof hd&&e instanceof hd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ef&&e instanceof ef&&n._firestore===e._firestore&&ok(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function yk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pw{}function tf(n,...e){for(const t of e)n=t._apply(n);return n}class QF extends pw{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=lg(e.firestore),r=function(i,a,c,p,_,w,I){let M;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Dk(I,w);const V=[];for(const H of I)V.push(Ck(p,i,H));M={arrayValue:{values:V}}}else M=Ck(p,i,I)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Dk(I,w),M=fk(c,"where",I,"in"===w||"not-in"===w);const N=ai.create(_,w,M);return function(V,H){if(H.ht()){const ue=Gp(V);if(null!==ue&&!ue.isEqual(H.field))throw new Me(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ue.toString()}' and '${H.field.toString()}'`);const Ge=j_(V);null!==Ge&&Ik(0,H.field,Ge)}const ee=function(ue,Ge){for(const Qe of ue.filters)if(Ge.indexOf(Qe.op)>=0)return Qe.op;return null}(V,function(ue){switch(ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==ee)throw new Me(de.INVALID_ARGUMENT,ee===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${ee.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new hs(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class JF extends pw{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Tu(i,a);return function(p,_){if(null===j_(p)){const w=Gp(p);null!==w&&Ik(0,w,_.field)}}(r,c),c}(e._query,this.fa,this.wa);return new hs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Tl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class vk extends pw{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new hs(e.firestore,e.converter,Nb(e._query,this.ma,this.ga))}}class bk extends pw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Ek(e,this.type,this.ya,this.pa);return new hs(e.firestore,e.converter,(i=t,new Tl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class wk extends pw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Ek(e,this.type,this.ya,this.pa);return new hs(e.firestore,e.converter,(i=t,new Tl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Ek(n,e,t,r){if(t[0]=(0,Dt.m9)(t[0]),t[0]instanceof hw)return function(i,a,c,p,_){if(!p)throw new Me(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const I of Yc(i))if(I.field.isKeyField())w.push(Iu(a,p.key));else{const M=p.data.field(I.field);if(Ob(M))throw new Me(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const N=I.field.canonicalString();throw new Me(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(M)}return new ka(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lg(n.firestore);return function(a,c,p,_,w,I){const M=a.explicitOrderBy;if(w.length>M.length)throw new Me(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let V=0;V<w.length;V++){const H=w[V];if(M[V].field.isKeyField()){if("string"!=typeof H)throw new Me(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof H}`);if(!H_(a)&&-1!==H.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${H}' contains a slash.`);const ee=a.path.child(qt.fromString(H));if(!ze.isDocumentKey(ee))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const ue=new ze(ee);N.push(Iu(c,ue))}else{const ee=fk(p,_,H);N.push(ee)}}return new ka(N,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Ck(n,e,t){if("string"==typeof(t=(0,Dt.m9)(t))){if(""===t)throw new Me(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H_(e)&&-1!==t.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!ze.isDocumentKey(r))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iu(n,new ze(r))}if(t instanceof nr)return Iu(n,t._key);throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hD(t)}.`)}function Dk(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ik(n,e,t){if(!t.isEqual(e))throw new Me(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const aL={maxAttempts:5};class rM{convertValue(e,t="none"){switch(Wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return wu(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new pD(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bh(e));default:return null}}convertTimestamp(e){const t=ks(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);St(PC(r));const i=new Aa(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||ar(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function bD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lL extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class Tk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lg(e)}set(e,t,r){this._verifyNotCommitted();const i=nf(e,this._firestore),a=bD(i.converter,t,r),c=mD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,tr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=nf(e,this._firestore);let c;return c="string"==typeof(t=(0,Dt.m9)(t))||t instanceof dd?eM(this._dataReader,"WriteBatch.update",a._key,t,r,i):JA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nf(e,this._firestore);return this._mutations=this._mutations.concat(new rd(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nf(n,e){if((n=(0,Dt.m9)(n)).firestore!==e)throw new Me(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dg extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function Sk(n,e,t){n=tn(n,nr);const r=tn(n.firestore,ur),i=bD(n.converter,e,t);return Dy(r,[mD(lg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,tr.none())])}function Ak(n,e,t,...r){n=tn(n,nr);const i=tn(n.firestore,ur),a=lg(i);let c;return c="string"==typeof(e=(0,Dt.m9)(e))||e instanceof dd?eM(a,"updateDoc",n._key,e,t,r):JA(a,"updateDoc",n._key,e),Dy(i,[c.toMutation(n._key,tr.exists(!0))])}function Mk(n,...e){var t,r,i;n=(0,Dt.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||QA(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(QA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,w,I;if(n instanceof nr)w=tn(n.firestore,ur),I=$h(n._key.path),_={next:M=>{e[c]&&e[c](iM(w,n,M))},error:e[c+1],complete:e[c+2]};else{const M=tn(n,hs);w=tn(M.firestore,ur),I=M._query;const N=new dg(w);_={next:V=>{e[c]&&e[c](new ef(w,N,M,V))},error:e[c+1],complete:e[c+2]},yk(n._query)}return function(M,N,V,H){const ee=new cD(H),ue=new gA(N,ee,V);return M.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return cA(yield Cy(M),ue)})),()=>{ee.Tc(),M.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return hA(yield Cy(M),ue)}))}}(Yr(w),I,p,_)}function Dy(n,e){return function(t,r){const i=new Vr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function eF(n,e,t){return bA.apply(this,arguments)}(yield WA(t),r,i)})),i.promise}(Yr(n),e)}function iM(n,e,t){const r=t.docs.get(e._key),i=new dg(n);return new hd(n,i,e._key,r,new cg(t.hasPendingWrites,t.fromCache),e.converter)}class yL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lg(e)}get(e){const t=nf(e,this._firestore),r=new lL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return rt();const a=i[0];if(a.isFoundDocument())return new hw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new hw(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const i=nf(e,this._firestore),a=bD(i.converter,t,r),c=mD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=nf(e,this._firestore);let c;return c="string"==typeof(t=(0,Dt.m9)(t))||t instanceof dd?eM(this._dataReader,"Transaction.update",a._key,t,r,i):JA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=nf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nf(e,this._firestore),r=new dg(this._firestore);return super.get(e).then(i=>new hd(this._firestore,r,t._key,i._document,new cg(!1,!1),t.converter))}}function sM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ok(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function kk(){if(!function QT(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vh=vi.SDK_VERSION,(0,vi._registerComponent)(new su.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new ur(i,new qT(t.getProvider("auth-internal")),new WT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,vi.registerVersion)(GE,"3.4.12",n),(0,vi.registerVersion)(GE,"3.4.12","esm2017")}();class gw{constructor(e){this._delegate=e}static fromBase64String(e){return kk(),new gw(Lu.fromBase64String(e))}static fromUint8Array(e){return Ok(),new gw(Lu.fromUint8Array(e))}toBase64(){return kk(),this._delegate.toBase64()}toUint8Array(){return Ok(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oM(n){return function SL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class AL{enableIndexedDbPersistence(e,t){return function PF(n,e){uk(n=tn(n,ur));const t=Yr(n),r=n._freezeSettings(),i=new jA;return lk(t,i,new GO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function NF(n){uk(n=tn(n,ur));const e=Yr(n),t=n._freezeSettings(),r=new jA;return lk(e,r,new mF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function FF(n){if(n._initialized&&!n._terminated)throw new Me(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Sa.V())return Promise.resolve();const i=r+"main";yield Sa.delete(i)}),function(r){return t.apply(this,arguments)})(sg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Rk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function MF(n,e,t,r={}){var i;const a=(n=tn(n,cw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&xp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Lr.MOCK_USER;else{c=(0,Dt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Lr(_)}n._authCredentials=new GT(new ZE(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function VF(n){return function wF(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield WO(n),t=yield KO(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.lu.delete(0),lw(i)}(t)}))}(Yr(n=tn(n,ur)))}(this._delegate)}disableNetwork(){return function UF(n){return function EF(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield WO(n),t=yield KO(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const a=Ye(i);a.lu.add(0),yield my(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Yr(n=tn(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function LF(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function iF(n,e){return IA.apply(this,arguments)}(yield WA(e),t)})),t.promise}(Yr(n=tn(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function _L(n,e){return function IF(n,e){const t=new cD(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Cy(n),i=t,Ye(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Cy(n),i=t,void Ye(r).Tu.delete(i);var r,i}))}}(Yr(n=tn(n,ur)),QA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Iy(this,ik(this._delegate,e))}catch(t){throw Fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Na(this,fD(this._delegate,e))}catch(t){throw Fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ls(this,function xF(n,e){if(n=tn(n,cw),YA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hs(n,null,(t=e,new Tl(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function vL(n,e,t){n=tn(n,ur);const r=Object.assign(Object.assign({},aL),t);return function(i){if(i.maxAttempts<1)throw new Me(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function TF(n,e,t){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const i=yield(a=n,dD(a).then(c=>c.datastore));var a;new vF(n.asyncQueue,i,t,e,r).run()})),r.promise}(Yr(n),i=>e(new yL(n,i)),r)}(this._delegate,t=>e(new Pk(this,t)))}batch(){return Yr(this._delegate),new Nk(new Tk(this._delegate,e=>Dy(this._delegate,e)))}loadBundle(e){return function BF(n,e){const t=Yr(n=tn(n,ur)),r=new kF;return function SF(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return qO(_,w);if(_ instanceof ArrayBuffer)return qO(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new _F(_,c);var _}(t,aw(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function gF(n,e,t){const r=Ye(n);var i;(i=(0,ge.Z)(function*(a,c,p){try{const _=yield c.getMetadata();if(yield function(N,V){const H=Ye(N),ee=Ur(V.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",ue=>H.Ds.getBundleMetadata(ue,V.id)).then(ue=>!!ue&&ue.createTime.compareTo(ee)>=0)}(a.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);p._updateProgress(PO(_));const w=new WN(_,a.localStore,c.wt);let I=yield c.fc();for(;I;){const N=yield w.Nu(I);N&&p._updateProgress(N),I=yield c.fc()}const M=yield w.complete();return yield cd(a,M.Mu,void 0),yield function(N,V){const H=Ye(N);return H.persistence.runTransaction("Save bundle","readwrite",ee=>H.Ds.saveBundleMetadata(ee,V))}(a.localStore,_),p._completeWith(M.progress),Promise.resolve(M.Ou)}catch(_){return xp("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var N}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield WA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function jF(n,e){return function AF(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield zA(n),e)}))}(Yr(n=tn(n,ur)),e).then(t=>t?new hs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ls(this,t):null)}}class wD extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new gw(new Lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Na.forKey(t,this.firestore,null)}}class Pk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}get(e){const t=fg(e);return this._delegate.get(t).then(r=>new mw(this._firestore,new hd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=fg(e);return r?(sM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=fg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=fg(e);return this._delegate.delete(t),this}}class Nk{constructor(e){this._delegate=e}set(e,t,r){const i=fg(e);return r?(sM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=fg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=fg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _w(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=hg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new hg(e,new wD(e),t),i.set(t,a)),a}}hg.INSTANCES=new WeakMap;class Na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Na(t,new nr(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Na(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Iy(this.firestore,ik(this._delegate,e))}catch(t){throw Fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof nr&&sk(this._delegate,e)}set(e,t){t=sM("DocumentReference.set",t);try{return t?Sk(this._delegate,e,t):Sk(this._delegate,e)}catch(r){throw Fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ak(this._delegate,e):Ak(this._delegate,e,t,...r)}catch(i){throw Fs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function gL(n){return Dy(tn(n.firestore,ur),[new rd(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=Fk(e),r=Lk(e,i=>new mw(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Mk(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cL(n){n=tn(n,nr);const e=tn(n.firestore,ur),t=Yr(e),r=new dg(e);return function CF(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const p=yield function(_,w){const I=Ye(_);return I.persistence.runTransaction("read document","readonly",M=>I.localDocuments.getDocument(M,w))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Me(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=vy(p,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield zA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new hd(e,r,n._key,i,new cg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function dL(n){n=tn(n,nr);const e=tn(n.firestore,ur);return YO(Yr(e),n._key,{source:"server"}).then(t=>iM(e,n,t))}(this._delegate):function uL(n){n=tn(n,nr);const e=tn(n.firestore,ur);return YO(Yr(e),n._key).then(t=>iM(e,n,t))}(this._delegate),t.then(r=>new mw(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Na(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}function Fs(n,e,t){return n.message=n.message.replace(e,t),n}function Fk(n){for(const e of n)if("object"==typeof e&&!oM(e))return e;return{}}function Lk(n,e){var t,r;let i;return i=oM(n[0])?n[0]:oM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _k(this._delegate,e._delegate)}}class _w extends mw{data(e){const t=this._delegate.data(e);return function HT(n,e){n||rt()}(void 0!==t),t}}class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}where(e,t,r){try{return new Ls(this.firestore,tf(this._delegate,function XF(n,e,t){const r=e,i=vD("where",n);return new QF(i,r,t)}(e,t,r)))}catch(i){throw Fs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ls(this.firestore,tf(this._delegate,function eL(n,e="asc"){const t=e,r=vD("orderBy",n);return new JF(r,t)}(e,t)))}catch(r){throw Fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ls(this.firestore,tf(this._delegate,function tL(n){return nk("limit",n),new vk("limit",n,"F")}(e)))}catch(t){throw Fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ls(this.firestore,tf(this._delegate,function nL(n){return nk("limitToLast",n),new vk("limitToLast",n,"L")}(e)))}catch(t){throw Fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ls(this.firestore,tf(this._delegate,function rL(...n){return new bk("startAt",n,!0)}(...e)))}catch(t){throw Fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ls(this.firestore,tf(this._delegate,function iL(...n){return new bk("startAfter",n,!1)}(...e)))}catch(t){throw Fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ls(this.firestore,tf(this._delegate,function sL(...n){return new wk("endBefore",n,!1)}(...e)))}catch(t){throw Fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ls(this.firestore,tf(this._delegate,function oL(...n){return new wk("endAt",n,!0)}(...e)))}catch(t){throw Fs(t,"endAt()","Query.endAt()")}}isEqual(e){return ok(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fL(n){n=tn(n,hs);const e=tn(n.firestore,ur),t=Yr(e),r=new dg(e);return function DF(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,a,c){try{const p=yield iD(i,a,!0),_=new LO(a,p.ji),w=_.Ku(p.documents),I=_.applyChanges(w,!1);c.resolve(I.snapshot)}catch(p){const _=vy(p,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield zA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ef(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function pL(n){n=tn(n,hs);const e=tn(n.firestore,ur),t=Yr(e),r=new dg(e);return QO(t,n._query,{source:"server"}).then(i=>new ef(e,r,n,i))}(this._delegate):function hL(n){n=tn(n,hs);const e=tn(n.firestore,ur),t=Yr(e),r=new dg(e);return yk(n._query),QO(t,n._query).then(i=>new ef(e,r,n,i))}(this._delegate),t.then(r=>new aM(this.firestore,new ef(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Fk(e),r=Lk(e,i=>new aM(this.firestore,new ef(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Mk(this._delegate,t,r)}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}class xL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _w(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _w(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _w(this._firestore,r))})}isEqual(e){return _k(this._delegate,e._delegate)}}class Iy extends Ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Na(this.firestore,e):null}doc(e){try{return new Na(this.firestore,void 0===e?fD(this._delegate):fD(this._delegate,e))}catch(t){throw Fs(t,"doc()","CollectionReference.doc()")}}add(e){return function mL(n,e){const t=tn(n.firestore,ur),r=fD(n),i=bD(n.converter,e);return Dy(t,[mD(lg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Na(this.firestore,t))}isEqual(e){return sk(this._delegate,e._delegate)}withConverter(e){return new Iy(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}function fg(n){return tn(n,nr)}class lM{constructor(...e){this._delegate=new dd(...e)}static documentId(){return new lM(er.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof dd&&this._delegate._internalPath.isEqual(e._internalPath)}}class pg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wL(){return new XA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pg(e)}static delete(){const e=function bL(){return new dw("deleteField")}();return e._methodName="FieldValue.delete",new pg(e)}static arrayUnion(...e){const t=function EL(...n){return new qF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new pg(t)}static arrayRemove(...e){const t=function CL(...n){return new ZF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new pg(t)}static increment(e){const t=function DL(n){return new zF("increment",n)}(e);return t._methodName="FieldValue.increment",new pg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OL={Firestore:Rk,GeoPoint:pD,Timestamp:zn,Blob:gw,Transaction:Pk,WriteBatch:Nk,DocumentReference:Na,DocumentSnapshot:mw,Query:Ls,QueryDocumentSnapshot:_w,QuerySnapshot:aM,CollectionReference:Iy,FieldPath:lM,FieldValue:pg,setLogLevel:function ML(n){!function qE(n){Il.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function RL(n){(function kL(n,e){n.INTERNAL.registerComponent(new su.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OL)))})(n,(e,t)=>new Rk(e,t,new AL)),n.registerVersion("@firebase/firestore-compat","0.1.21")}(Gf.Z);var Kn=R(7579),Ty=R(6451),ED=R(5363),PL=R(6063);class NL extends Kn.x{constructor(e=1/0,t=1/0,r=PL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var FL=R(3099);function Vk(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,FL.B)({connector:()=>new NL(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}const CD=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fd=R(5698);function Uk(n){return(0,kr.e)((e,t)=>{let r=!1;e.subscribe(new hr.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Bk(n=VL){return(0,kr.e)((e,t)=>{let r=!1;e.subscribe(new hr.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function VL(){return new CD}function gg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((i,a)=>n(i,a,r)):Da.y,(0,fd.q)(1),t?Uk(e):Bk(()=>new CD))}var pd=R(576);function jk(n,e){return(0,pd.m)(e)?Gn(()=>n,e):Gn(()=>n)}var uM=R(9468);const Hk=new u.OlP("angularfire2.auth.use-emulator"),$k=new u.OlP("angularfire2.auth.settings"),Gk=new u.OlP("angularfire2.auth.tenant-id"),qk=new u.OlP("angularfire2.auth.langugage-code"),Zk=new u.OlP("angularfire2.auth.use-device-language"),zk=new u.OlP("angularfire.auth.persistence"),Wk=(n,e,t,r,i,a,c,p)=>(0,on.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,I]of Object.entries(c))_.settings[w]=I;return p&&_.setPersistence(p),_},[t,r,i,a,c,p]);let Kk=(()=>{class n{constructor(t,r,i,a,c,p,_,w,I,M,N,V){const H=new Kn.x,ee=pt(void 0).pipe((0,ED.Q)(c.outsideAngular),Gn(()=>a.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,1121)))),(0,Ct.U)(()=>(0,on.on)(t,a,r)),(0,Ct.U)(ue=>Wk(ue,a,p,w,I,M,_,N)),Vk({bufferSize:1,refCount:!1}));if(Ya(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{ee.pipe(gg()).subscribe();const Ge=ee.pipe(Gn(Be=>Be.getRedirectResult().then(wt=>wt,()=>null)),Un.iC,Vk({bufferSize:1,refCount:!1})),Qe=ee.pipe(Gn(Be=>new Jn.y(wt=>({unsubscribe:a.runOutsideAngular(()=>Be.onAuthStateChanged(xt=>wt.next(xt),xt=>wt.error(xt),()=>wt.complete()))})))),$e=ee.pipe(Gn(Be=>new Jn.y(wt=>({unsubscribe:a.runOutsideAngular(()=>Be.onIdTokenChanged(xt=>wt.next(xt),xt=>wt.error(xt),()=>wt.complete()))}))));this.authState=Ge.pipe(jk(Qe),(0,uM.R)(c.outsideAngular),(0,ED.Q)(c.insideAngular)),this.user=Ge.pipe(jk($e),(0,uM.R)(c.outsideAngular),(0,ED.Q)(c.insideAngular)),this.idToken=this.user.pipe(Gn(Be=>Be?(0,un.D)(Be.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Gn(Be=>Be?(0,un.D)(Be.getIdTokenResult()):pt(null))),this.credential=(0,Ty.T)(Ge,H,this.authState.pipe(zr(Be=>!Be))).pipe((0,Ct.U)(Be=>(null==Be?void 0:Be.user)?Be:null),(0,uM.R)(c.outsideAngular),(0,ED.Q)(c.insideAngular))}return(0,on.pX)(this,ee,a,{spy:{apply:(ue,Ge,Qe)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&Qe.then($e=>H.next($e))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(on.Dh),u.LFG(on.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Un.HU),u.LFG(Hk,8),u.LFG($k,8),u.LFG(Gk,8),u.LFG(qk,8),u.LFG(Zk,8),u.LFG(zk,8),u.LFG(os,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Yk(n,e){return function BL(n,e=iu.z){return new Jn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function cM(n,e){return Yk(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function DD(n,e){return cM(n,e).pipe(Po(void 0),uu(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(I=>I.doc.ref.isEqual(c.ref)),w=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function Qk(n,e,t){return DD(n,t).pipe(Ca((r,i)=>function HL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $L(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Pc(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function dM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Xk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Jk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=DD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Po(void 0),uu(),zr(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ca((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Xk(e);return Qk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return cM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Un.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Un.iC)}add(e){return this.ref.add(e)}doc(e){return new eR(this.ref.doc(e),this.afs)}}class eR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=rR(r,t);return new Jk(i,a,this.afs)}snapshotChanges(){return function jL(n,e){return Yk(n,e).pipe(Po(void 0),uu(),(0,Ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(Un.iC)}}class GL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?DD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zr(t=>t.length>0),Un.iC):DD(this.query,this.afs.schedulers.outsideAngular).pipe(Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ca((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Xk(e);return Qk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return cM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Un.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Un.iC)}}const tR=new u.OlP("angularfire2.enableFirestorePersistence"),nR=new u.OlP("angularfire2.firestore.persistenceSettings"),qL=new u.OlP("angularfire2.firestore.settings"),ZL=new u.OlP("angularfire2.firestore.use-emulator");function rR(n,e=(t=>t)){return{query:e(n),ref:n}}let iR=(()=>{class n{constructor(t,r,i,a,c,p,_,w,I,M,N,V,H,ee,ue,Ge,Qe){this.schedulers=_;const $e=(0,on.on)(t,p,r),Be=I;M&&Wk($e,p,N,H,ee,ue,V,Ge),[this.firestore,this.persistenceEnabled$]=(0,on.cc)(`${$e.name}.firestore`,"AngularFirestore",$e.name,()=>{const wt=p.runOutsideAngular(()=>$e.firestore());if(a&&wt.settings(a),Be&&wt.useEmulator(...Be),i&&!Ya(c)){const xt=()=>{try{return(0,un.D)(wt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(en){return"undefined"!=typeof console&&console.warn(en),pt(!1)}};return[wt,p.runOutsideAngular(xt)]}return[wt,pt(!1)]},[a,Be,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=rR(i,r),p=this.schedulers.ngZone.run(()=>a);return new Jk(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new GL(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new eR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(on.Dh),u.LFG(on.xv,8),u.LFG(tR,8),u.LFG(qL,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Un.HU),u.LFG(nR,8),u.LFG(ZL,8),u.LFG(Kk,8),u.LFG(Hk,8),u.LFG($k,8),u.LFG(Gk,8),u.LFG(qk,8),u.LFG(Zk,8),u.LFG(zk,8),u.LFG(os,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zL=(()=>{class n{constructor(){Q0.Z.registerVersion("angularfire",Un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tR,useValue:!0},{provide:nR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[iR]}),n})();const sR_firebase={apiKey:"AIzaSyA7tSfgvo9iMlmZpENiWxpWtLqEHyLXJ8w",authDomain:"withthebible-c93d6.firebaseapp.com",projectId:"withthebible-c93d6",storageBucket:"withthebible-c93d6.appspot.com",messagingSenderId:"557096516299",appId:"1:557096516299:web:6dda9d97fa91748305f94e",measurementId:"G-6RSS3RLXCL"};class Ol extends Kn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var WL=R(9672);function oR(n,e,t){n?(0,WL.f)(t,n,e):e()}function hM(n){return new Jn.y(e=>{(0,Qs.Xf)(n()).subscribe(e)})}var Sy=R(515),Fa=R(727);function aR(){return(0,kr.e)((n,e)=>{let t=null;n._refCount++;const r=new hr.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class QL extends Jn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fa.w0;const t=this.getSubject();e.add(this.source.subscribe(new hr.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fa.w0.EMPTY)}return e}refCount(){return aR()(this)}}function rf(n){return(0,kr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new hr.Q(t,void 0,void 0,c=>{a=(0,Qs.Xf)(n(c,rf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Vi=R(5577);function yw(n,e){return(0,pd.m)(e)?(0,Vi.z)(n,e,1):(0,Vi.z)(n,1)}function fM(n){return n<=0?()=>Sy.E:(0,kr.e)((e,t)=>{let r=[];e.subscribe(new hr.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var lo=R(8505);class gd{constructor(e,t){this.id=e,this.url=t}}class pM extends gd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vw extends gd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lR extends gd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eV extends gd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tV extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nV extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rV extends gd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class iV extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sV extends gd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uR{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cR{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oV{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aV{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lV{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uV{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dR{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zt="primary";class cV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ay(n){return new cV(n)}const hR="ngNavigationCancelingError";function gM(n){const e=Error("NavigationCancelingError: "+n);return e[hR]=!0,e}function hV(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!fR(n[i],e[i]))return!1;return!0}function fR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function pR(n){return Array.prototype.concat.apply([],n)}function gR(n){return n.length>0?n[n.length-1]:null}function Ui(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Uu(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,un.D)(Promise.resolve(n)):pt(n)}const gV={exact:function yR(n,e,t){if(!_g(n.segments,e.segments)||!ID(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yR(n.children[r],e.children[r],t))return!1;return!0},subset:vR},mR={exact:function mV(n,e){return Vu(n,e)},subset:function _V(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fR(n[t],e[t]))},ignored:()=>!0};function _R(n,e,t){return gV[t.paths](n.root,e.root,t.matrixParams)&&mR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vR(n,e,t){return bR(n,e,e.segments,t)}function bR(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_g(i,t)||e.hasChildren()||!ID(i,t,r))}if(n.segments.length===t.length){if(!_g(n.segments,t)||!ID(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!vR(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(_g(n.segments,i)&&ID(n.segments,i,r)&&n.children[Zt])&&bR(n.children[Zt],e,a,r)}}function ID(n,e,t){return e.every((r,i)=>mR[t](n[i].parameters,r.parameters))}class mg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ay(this.queryParams)),this._queryParamMap}toString(){return bV.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ui(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return TD(this)}}class bw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ay(this.parameters)),this._parameterMap}toString(){return IR(this)}}function _g(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wR{}class ER{parse(e){const t=new MV(e);return new mg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ww(e.root,!0)}`,r=function CV(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${SD(t)}=${SD(i)}`).join("&"):`${SD(t)}=${SD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function wV(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const bV=new ER;function TD(n){return n.segments.map(e=>IR(e)).join("/")}function ww(n,e){if(!n.hasChildren())return TD(n);if(e){const t=n.children[Zt]?ww(n.children[Zt],!1):"",r=[];return Ui(n.children,(i,a)=>{a!==Zt&&r.push(`${a}:${ww(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function vV(n,e){let t=[];return Ui(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),Ui(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[ww(n.children[Zt],!1)]:[`${i}:${ww(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${TD(n)}/${t[0]}`:`${TD(n)}/(${t.join("//")})`}}function CR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function SD(n){return CR(n).replace(/%3B/gi,";")}function mM(n){return CR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function AD(n){return decodeURIComponent(n)}function DR(n){return AD(n.replace(/\+/g,"%20"))}function IR(n){return`${mM(n.path)}${function EV(n){return Object.keys(n).map(e=>`;${mM(e)}=${mM(n[e])}`).join("")}(n.parameters)}`}const DV=/^[^\/()?;=#]+/;function MD(n){const e=n.match(DV);return e?e[0]:""}const IV=/^[^=?&#]+/,SV=/^[^&#]+/;class MV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Jt(e,t)),r}parseSegment(){const e=MD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new bw(AD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=MD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=MD(this.remaining);i&&(r=i,this.capture(r))}e[AD(t)]=AD(r)}parseQueryParam(e){const t=function TV(n){const e=n.match(IV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function AV(n){const e=n.match(SV);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=DR(t),a=DR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=MD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Zt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Zt]:new Jt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class TR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_M(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_M(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yM(e,this._root).map(t=>t.value)}}function _M(n,e){if(n===e.value)return e;for(const t of e.children){const r=_M(n,t);if(r)return r}return null}function yM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yM(n,t);if(r.length)return r.unshift(e),r}return[]}class md{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function My(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class SR extends TR{constructor(e,t){super(e),this.snapshot=t,vM(this,e)}toString(){return this.snapshot.toString()}}function AR(n,e){const t=function xV(n,e){const c=new xD([],{},{},"",{},Zt,e,null,n.root,-1,{});return new xR("",new md(c,[]))}(n,e),r=new Ol([new bw("",{})]),i=new Ol({}),a=new Ol({}),c=new Ol({}),p=new Ol(""),_=new xy(r,i,c,p,a,Zt,e,t.root);return _.snapshot=t.root,new SR(new md(_,[]),t)}class xy{constructor(e,t,r,i,a,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>Ay(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>Ay(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function MR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function OV(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class xD{constructor(e,t,r,i,a,c,p,_,w,I,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=I,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ay(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ay(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xR extends TR{constructor(e,t){super(t),this.url=e,vM(this,t)}toString(){return OR(this._root)}}function vM(n,e){e.value._routerState=n,e.children.forEach(t=>vM(n,t))}function OR(n){const e=n.children.length>0?` { ${n.children.map(OR).join(", ")} } `:"";return`${n.value}${e}`}function bM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vu(e.params,t.params)||n.params.next(t.params),function fV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function wM(n,e){const t=Vu(n.params,e.params)&&function yV(n,e){return _g(n,e)&&n.every((t,r)=>Vu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||wM(n.parent,e.parent))}function Ew(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function RV(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ew(n,r,i);return Ew(n,r)})}(n,e,t);return new md(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Ew(n,p)),c}}const r=function PV(n){return new xy(new Ol(n.url),new Ol(n.params),new Ol(n.queryParams),new Ol(n.fragment),new Ol(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ew(n,a));return new md(r,i)}}function OD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cw(n){return"object"==typeof n&&null!=n&&n.outlets}function EM(n,e,t,r,i){let a={};return r&&Ui(r,(c,p)=>{a[p]=Array.isArray(c)?c.map(_=>`${_}`):`${c}`}),new mg(t.root===n?e:kR(t.root,n,e),a,i)}function kR(n,e,t){const r={};return Ui(n.children,(i,a)=>{r[a]=i===e?t:kR(i,e,t)}),new Jt(n.segments,r)}class RR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&OD(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Cw);if(i&&i!==gR(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class CM{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function PR(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return kD(n,e,t);const r=function BV(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(Cw(p))break;const _=`${p}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!FR(_,w,c))return a;r+=2}else{if(!FR(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Jt(n.segments.slice(0,r.pathIndex),{});return a.children[Zt]=new Jt(n.segments.slice(r.pathIndex),n.children),kD(a,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?DM(n,e,t):r.match?kD(n,0,i):DM(n,e,t)}function kD(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function UV(n){return Cw(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return Ui(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=PR(n.children[c],e,a))}),Ui(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new Jt(n.segments,i)}}function DM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Cw(a)){const _=jV(a.outlets);return new Jt(r,_)}if(0===i&&OD(t[0])){r.push(new bw(n.segments[e].path,NR(t[0]))),i++;continue}const c=Cw(a)?a.outlets[Zt]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&OD(p)?(r.push(new bw(c,NR(p))),i+=2):(r.push(new bw(c,{})),i++)}return new Jt(r,{})}function jV(n){const e={};return Ui(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=DM(new Jt([],{}),0,t))}),e}function NR(n){const e={};return Ui(n,(t,r)=>e[r]=`${t}`),e}function FR(n,e,t){return n==t.path&&Vu(e,t.parameters)}class $V{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=My(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Ui(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=My(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=My(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=My(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new uV(a.value.snapshot))}),e.children.length&&this.forwardEvent(new aV(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(bM(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),bM(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function GV(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class IM{constructor(e,t){this.routes=e,this.module=t}}function sf(n){return"function"==typeof n}function yg(n){return n instanceof mg}const Dw=Symbol("INITIAL_VALUE");function Iw(){return Gn(n=>function KL(...n){const e=(0,Yi.yG)(n),t=(0,Yi.jO)(n),{args:r,keys:i}=$d(n);if(0===r.length)return(0,un.D)([],e);const a=new Jn.y(function YL(n,e,t=Da.y){return r=>{oR(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)oR(e,()=>{const w=(0,un.D)(n[_],e);let I=!1;w.subscribe(new hr.Q(r,M=>{a[_]=M,I||(I=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Xs(i,c):Da.y));return t?a.pipe(ws(t)):a}(n.map(e=>e.pipe((0,fd.q)(1),Po(Dw)))).pipe(Ca((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==Dw?i:(a===Dw&&(r=!0),r||!1!==a&&c!==t.length-1&&!yg(a)?i:a),e)},Dw),zr(e=>e!==Dw),(0,Ct.U)(e=>yg(e)?e:!0===e),(0,fd.q)(1)))}class YV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Tw,this.attachRef=null}}class Tw{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new YV,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let TM=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new QV(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Tw),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class QV{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xy?this.route:e===Tw?this.childContexts:this.parent.get(e,t)}}let LR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[TM],encapsulation:2}),n})();function VR(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];XV(r,JV(e,r))}}function XV(n,e){n.children&&VR(n.children,e)}function JV(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function SM(n){const e=n.children&&n.children.map(SM),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=LR),t}function La(n){return n.outlet||Zt}function UR(n,e){const t=n.filter(r=>La(r)===e);return t.push(...n.filter(r=>La(r)!==e)),t}const BR={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function RD(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},BR):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||hV)(t,n,e);if(!a)return Object.assign({},BR);const c={};Ui(a.posParams,(_,w)=>{c[w]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function PD(n,e,t,r,i="corrected"){if(t.length>0&&function nU(n,e,t){return t.some(r=>ND(n,e,r)&&La(r)!==Zt)}(n,t,r)){const c=new Jt(e,function tU(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&La(a)!==Zt){const c=new Jt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[La(a)]=c}return i}(n,e,r,new Jt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function rU(n,e,t){return t.some(r=>ND(n,e,r))}(n,t,r)){const c=new Jt(n.segments,function eU(n,e,t,r,i,a){const c={};for(const p of r)if(ND(n,t,p)&&!i[La(p)]){const _=new Jt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[La(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new Jt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function ND(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jR(n,e,t,r){return!!(La(n)===r||r!==Zt&&ND(e,t,n))&&("**"===n.path||RD(e,n,t).matched)}function HR(n,e,t){return 0===e.length&&!n.children[t]}class Sw{constructor(e){this.segmentGroup=e||null}}class $R{constructor(e){this.urlTree=e}}function FD(n){return new Jn.y(e=>e.error(new Sw(n)))}function GR(n){return new Jn.y(e=>e.error(new $R(n)))}function iU(n){return new Jn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class aU{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=PD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Zt).pipe((0,Ct.U)(a=>this.createUrlTree(AM(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rf(a=>{if(a instanceof $R)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Sw?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Zt).pipe((0,Ct.U)(i=>this.createUrlTree(AM(i),e.queryParams,e.fragment))).pipe(rf(i=>{throw i instanceof Sw?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Jt([],{[Zt]:e}):e;return new mg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(a=>new Jt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,un.D)(i).pipe(yw(a=>{const c=r.children[a],p=UR(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,Ct.U)(_=>({segment:_,outlet:a})))}),Ca((a,c)=>(a[c.outlet]=c.segment,a),{}),function XL(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((i,a)=>n(i,a,r)):Da.y,fM(1),t?Uk(e):Bk(()=>new CD))}())}expandSegment(e,t,r,i,a,c){return(0,un.D)(r).pipe(yw(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(rf(w=>{if(w instanceof Sw)return pt(null);throw w}))),gg(p=>!!p),rf((p,_)=>{if(p instanceof CD||"EmptyError"===p.name){if(HR(t,i,a))return pt(new Jt([],{}));throw new Sw(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return jR(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):FD(t):FD(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?GR(a):this.lineralizeSegments(r,a).pipe((0,Vi.z)(c=>{const p=new Jt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:_,lastChild:w,positionalParamSegments:I}=RD(t,i,a);if(!p)return FD(t);const M=this.applyRedirectCommands(_,i.redirectTo,I);return i.redirectTo.startsWith("/")?GR(M):this.lineralizeSegments(i,M).pipe((0,Vi.z)(N=>this.expandSegment(e,t,r,N.concat(a.slice(w)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ct.U)(N=>(r._loadedConfig=N,new Jt(i,{})))):pt(new Jt(i,{}));const{matched:c,consumedSegments:p,lastChild:_}=RD(t,r,i);if(!c)return FD(t);const w=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,Vi.z)(M=>{const N=M.module,V=M.routes,{segmentGroup:H,slicedSegments:ee}=PD(t,p,w,V),ue=new Jt(H.segments,H.children);if(0===ee.length&&ue.hasChildren())return this.expandChildren(N,V,ue).pipe((0,Ct.U)(Be=>new Jt(p,Be)));if(0===V.length&&0===ee.length)return pt(new Jt(p,{}));const Ge=La(r)===a;return this.expandSegment(N,ue,V,ee,Ge?Zt:a,!0).pipe((0,Ct.U)($e=>new Jt(p.concat($e.segments),$e.children)))}))}getChildConfig(e,t,r){return t.children?pt(new IM(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Vi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Ct.U)(a=>(t._loadedConfig=a,a))):function sU(n){return new Jn.y(e=>e.error(gM(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):pt(new IM([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return pt(!0);const a=i.map(c=>{const p=e.get(c);let _;if(function ZV(n){return n&&sf(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!sf(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Uu(_)});return pt(a).pipe(Iw(),(0,lo.b)(c=>{if(!yg(c))return;const p=gM(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Ct.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return pt(r);if(i.numberOfChildren>1||!i.children[Zt])return iU(e.redirectTo);i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new mg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ui(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Ui(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new Jt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function AM(n){const e={};for(const r of Object.keys(n.children)){const a=AM(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function lU(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}class qR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class LD{constructor(e,t){this.component=e,this.route=t}}function cU(n,e,t){const r=n._root;return Aw(r,e?e._root:null,t,[r.value])}function VD(n,e,t){const r=function hU(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Aw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=My(e);return n.children.forEach(c=>{(function fU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function pU(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_g(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_g(n.url,e.url)||!Vu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wM(n,e)||!Vu(n.queryParams,e.queryParams);default:return!wM(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new qR(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Aw(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new LD(p.outlet.component,c))}else c&&Mw(e,p,i),i.canActivateChecks.push(new qR(r)),Aw(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Ui(a,(c,p)=>Mw(c,t.getContext(p),i)),i}function Mw(n,e,t){const r=My(n),i=n.value;Ui(r,(a,c)=>{Mw(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new LD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class CU{}function ZR(n){return new Jn.y(e=>e.error(n))}class IU{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=PD(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Zt);if(null===t)return null;const r=new xD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new md(r,t),a=new xR(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=MR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],p=UR(e,a),_=this.processSegmentGroup(p,c,a);if(null===_)return null;r.push(..._)}const i=zR(r);return function TU(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return HR(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!jR(e,t,r,i))return null;let a,c=[],p=[];if("**"===e.path){const V=r.length>0?gR(r).parameters:{};a=new xD(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,YR(e),La(e),e.component,e,WR(t),KR(t)+r.length,QR(e))}else{const V=RD(t,e,r);if(!V.matched)return null;c=V.consumedSegments,p=r.slice(V.lastChild),a=new xD(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,YR(e),La(e),e.component,e,WR(t),KR(t)+c.length,QR(e))}const _=function SU(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:I}=PD(t,c,p,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===I.length&&w.hasChildren()){const V=this.processChildren(_,w);return null===V?null:[new md(a,V)]}if(0===_.length&&0===I.length)return[new md(a,[])];const M=La(e)===i,N=this.processSegment(_,w,I,M?Zt:i);return null===N?null:[new md(a,N)]}}function AU(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zR(n){const e=[],t=new Set;for(const r of n){if(!AU(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zR(r.children);e.push(new md(r.value,i))}return e.filter(r=>!t.has(r))}function WR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function KR(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function YR(n){return n.data||{}}function QR(n){return n.resolve||{}}function MM(n){return Gn(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,Ct.U)(()=>e)):pt(e)})}class FU extends class NU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const xM=new u.OlP("ROUTES");class XR{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ct.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new IM(pR(c.injector.get(xM,void 0,u.XFs.Self|u.XFs.Optional)).map(SM),c)}),rf(a=>{throw t._loader$=void 0,a}));return t._loader$=new QL(i,()=>new Kn.x).pipe(aR()),t._loader$}loadModuleFactory(e){return Uu(e()).pipe((0,Vi.z)(t=>t instanceof u.YKP?pt(t):(0,un.D)(this.compiler.compileModuleAsync(t))))}}class VU{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function UU(n){throw n}function BU(n,e,t){return e.parse("/")}function JR(n,e){return pt(null)}const jU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vo=(()=>{class n{constructor(t,r,i,a,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kn.x,this.errorHandler=UU,this.malformedUriErrorHandler=BU,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:JR,afterPreactivation:JR},this.urlHandlingStrategy=new VU,this.routeReuseStrategy=new FU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const M=c.get(u.R0b);this.isNgZoneEnabled=M instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function pV(){return new mg(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new XR(c,p,N=>this.triggerEvent(new uR(N)),N=>this.triggerEvent(new cR(N))),this.routerState=AR(this.currentUrlTree,this.rootComponentType),this.transitions=new Ol({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zr(i=>0!==i.id),(0,Ct.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gn(i=>{let a=!1,c=!1;return pt(i).pipe((0,lo.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gn(p=>{const _=this.browserUrlTree.toString(),w=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return UD(p.source)&&(this.browserUrlTree=p.extractedUrl),pt(p).pipe(Gn(M=>{const N=this.transitions.getValue();return r.next(new pM(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),N!==this.transitions.getValue()?Sy.E:Promise.resolve(M)}),function uU(n,e,t,r){return Gn(i=>function oU(n,e,t,r,i){return new aU(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ct.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lo.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function MU(n,e,t,r,i){return(0,Vi.z)(a=>function DU(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new IU(n,e,t,r,i,a).recognize();return null===c?ZR(new CU):pt(c)}catch(c){return ZR(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Ct.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lo.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(V,M)}this.browserUrlTree=M.urlAfterRedirects}const N=new tV(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(N)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:V,source:H,restoredState:ee,extras:ue}=p,Ge=new pM(N,this.serializeUrl(V),H,ee);r.next(Ge);const Qe=AR(V,this.rootComponentType).snapshot;return pt(Object.assign(Object.assign({},p),{targetSnapshot:Qe,urlAfterRedirects:V,extras:Object.assign(Object.assign({},ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Sy.E}),MM(p=>{const{targetSnapshot:_,id:w,extractedUrl:I,rawUrl:M,extras:{skipLocationChange:N,replaceUrl:V}}=p;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:I,rawUrlTree:M,skipLocationChange:!!N,replaceUrl:!!V})}),(0,lo.b)(p=>{const _=new nV(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,Ct.U)(p=>Object.assign(Object.assign({},p),{guards:cU(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function gU(n,e){return(0,Vi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?pt(Object.assign(Object.assign({},t),{guardsResult:!0})):function mU(n,e,t,r){return(0,un.D)(n).pipe((0,Vi.z)(i=>function EU(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?pt(a.map(p=>{const _=VD(p,e,i);let w;if(function KV(n){return n&&sf(n.canDeactivate)}(_))w=Uu(_.canDeactivate(n,e,t,r));else{if(!sf(_))throw new Error("Invalid CanDeactivate guard");w=Uu(_(n,e,t,r))}return w.pipe(gg())})).pipe(Iw()):pt(!0)}(i.component,i.route,t,e,r)),gg(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Vi.z)(p=>p&&function qV(n){return"boolean"==typeof n}(p)?function _U(n,e,t,r){return(0,un.D)(e).pipe(yw(i=>as(function vU(n,e){return null!==n&&e&&e(new oV(n)),pt(!0)}(i.route.parent,r),function yU(n,e){return null!==n&&e&&e(new lV(n)),pt(!0)}(i.route,r),function wU(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function dU(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>hM(()=>pt(c.guards.map(_=>{const w=VD(_,c.node,t);let I;if(function WV(n){return n&&sf(n.canActivateChild)}(w))I=Uu(w.canActivateChild(r,n));else{if(!sf(w))throw new Error("Invalid CanActivateChild guard");I=Uu(w(r,n))}return I.pipe(gg())})).pipe(Iw())));return pt(a).pipe(Iw())}(n,i.path,t),function bU(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const i=r.map(a=>hM(()=>{const c=VD(a,e,t);let p;if(function zV(n){return n&&sf(n.canActivate)}(c))p=Uu(c.canActivate(e,n));else{if(!sf(c))throw new Error("Invalid CanActivate guard");p=Uu(c(e,n))}return p.pipe(gg())}));return pt(i).pipe(Iw())}(n,i.route,t))),gg(i=>!0!==i,!0))}(r,a,n,e):pt(p)),(0,Ct.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,lo.b)(p=>{if(yg(p.guardsResult)){const w=gM(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw w.url=p.guardsResult,w}const _=new rV(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),zr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),MM(p=>{if(p.guards.canActivateChecks.length)return pt(p).pipe((0,lo.b)(_=>{const w=new iV(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Gn(_=>{let w=!1;return pt(_).pipe(function xU(n,e){return(0,Vi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pt(t);let a=0;return(0,un.D)(i).pipe(yw(c=>function OU(n,e,t,r){return function kU(n,e,t,r){const i=Object.keys(n);if(0===i.length)return pt({});const a={};return(0,un.D)(i).pipe((0,Vi.z)(c=>function RU(n,e,t,r){const i=VD(n,e,r);return Uu(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,lo.b)(p=>{a[c]=p}))),fM(1),(0,Vi.z)(()=>Object.keys(a).length===i.length?pt(a):Sy.E))}(n._resolve,n,e,r).pipe((0,Ct.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),MR(n,t).resolve),null)))}(c.route,r,n,e)),(0,lo.b)(()=>a++),fM(1),(0,Vi.z)(c=>a===i.length?pt(t):Sy.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lo.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,lo.b)(_=>{const w=new sV(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),MM(p=>{const{targetSnapshot:_,id:w,extractedUrl:I,rawUrl:M,extras:{skipLocationChange:N,replaceUrl:V}}=p;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:I,rawUrlTree:M,skipLocationChange:!!N,replaceUrl:!!V})}),(0,Ct.U)(p=>{const _=function kV(n,e,t){const r=Ew(n,e._root,t?t._root:void 0);return new SR(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,lo.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new $V(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,lo.b)({next(){a=!0},complete(){a=!0}}),function JL(n){return(0,kr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),rf(p=>{if(c=!0,function dV(n){return n&&n[hR]}(p)){const _=yg(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new lR(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(w),_?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||UD(i.source)};this.scheduleNavigation(I,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new eV(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(w){i.reject(w)}}return Sy.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){VR(t),this.config=t.map(SM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,w=i||this.routerState.root,I=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=a||null}return null!==M&&(M=this.removeEmptyProps(M)),function NV(n,e,t,r,i){if(0===t.length)return EM(e.root,e.root,e,r,i);const a=function FV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new RR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return Ui(a.outlets,(_,w)=>{p[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new RR(t,e,r)}(t);if(a.toRoot())return EM(e.root,new Jt([],{}),e,r,i);const c=function LV(n,e,t){if(n.isAbsolute)return new CM(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new CM(a,a===e.root,0)}const r=OD(n.commands[0])?0:1;return function VV(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new CM(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=c.processChildren?kD(c.segmentGroup,c.index,a.commands):PR(c.segmentGroup,c.index,a.commands);return EM(c.segmentGroup,p,e,r,i)}(w,this.currentUrlTree,t,M,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=yg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function $U(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},jU):!1===r?Object.assign({},HU):r,yg(t))return _R(this.currentUrlTree,t,i);const a=this.parseUrl(t);return _R(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new vw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var p,_,w;if(this.disposed)return Promise.resolve(!1);const I=this.transitions.value,M=UD(r)&&I&&!UD(I.source),N=I.rawUrl.toString()===t.toString(),V=I.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(M&&N&&V)return Promise.resolve(!0);let ee,ue,Ge;c?(ee=c.resolve,ue=c.reject,Ge=c.promise):Ge=new Promise((Be,wt)=>{ee=Be,ue=wt});const Qe=++this.navigationId;let $e;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),$e=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):$e=0,this.setTransition({id:Qe,targetPageId:$e,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ee,reject:ue,promise:Ge,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ge.catch(Be=>Promise.reject(Be))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new lR(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function UD(n){return"imperative"!==n}let OM=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new Kn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ky(this.skipLocationChange),replaceUrl:ky(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ky(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vo),u.Y36(xy),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),Oy=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Kn.x,this.subscription=t.events.subscribe(a=>{a instanceof vw&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:ky(this.skipLocationChange),replaceUrl:ky(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ky(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vo),u.Y36(xy),u.Y36(pe))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function ky(n){return""===n||!!n}let kM=(()=>{class n{constructor(t,r,i,a,c,p){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof vw&&this.update()})}ngAfterContentInit(){pt(this.links.changes,this.linksWithHrefs.changes,pt(null)).pipe((0,Ea.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,un.D)(r).pipe((0,Ea.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function GU(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vo),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(OM,8),u.Y36(Oy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,OM,5),u.Suo(i,Oy,5)),2&t){let a;u.iGM(a=u.CRH())&&(r.links=a),u.iGM(a=u.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),n})();class e1{}class t1{preload(e,t){return pt(null)}}let n1=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new XR(i,r,_=>t.triggerEvent(new uR(_)),_=>t.triggerEvent(new cR(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(zr(t=>t instanceof vw),yw(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,un.D)(i).pipe((0,Ea.J)(),(0,Ct.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Vi.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vo),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(e1))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),RM=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vw&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new dR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const vg=new u.OlP("ROUTER_CONFIGURATION"),r1=new u.OlP("ROUTER_FORROOT_GUARD"),ZU=[Je,{provide:wR,useClass:ER},{provide:Vo,useFactory:function QU(n,e,t,r,i,a,c={},p,_){const w=new Vo(null,n,e,t,r,i,pR(a));return p&&(w.urlHandlingStrategy=p),_&&(w.routeReuseStrategy=_),function XU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,w),c.enableTracing&&w.events.subscribe(I=>{var M,N;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(N=console.groupEnd)||void 0===N||N.call(console)}),w},deps:[wR,Tw,Je,u.zs3,u.Sil,xM,vg,[class LU{},new u.FiY],[class PU{},new u.FiY]]},Tw,{provide:xy,useFactory:function JU(n){return n.routerState.root},deps:[Vo]},n1,t1,class qU{preload(e,t){return t().pipe(rf(()=>pt(null)))}},{provide:vg,useValue:{enableTracing:!1}}];function zU(){return new u.PXZ("Router",Vo)}let s1=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[ZU,o1(t),{provide:r1,useFactory:YU,deps:[[Vo,new u.FiY,new u.tp0]]},{provide:vg,useValue:r||{}},{provide:pe,useFactory:KU,deps:[ce,[new u.tBr(ke),new u.FiY],vg]},{provide:RM,useFactory:WU,deps:[Vo,Qa,vg]},{provide:e1,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:t1},{provide:u.PXZ,multi:!0,useFactory:zU},[PM,{provide:u.ip1,multi:!0,useFactory:eB,deps:[PM]},{provide:a1,useFactory:tB,deps:[PM]},{provide:u.tb,multi:!0,useExisting:a1}]]}}static forChild(t){return{ngModule:n,providers:[o1(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(r1,8),u.LFG(Vo,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function WU(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new RM(n,e,t)}function KU(n,e,t={}){return t.useHash?new Le(n,e):new He(n,e)}function YU(n){return"guarded"}function o1(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:xM,multi:!0,useValue:n}]}let PM=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Kn.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Vo),c=this.injector.get(vg);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(vg),i=this.injector.get(n1),a=this.injector.get(RM),c=this.injector.get(Vo),p=this.injector.get(u.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function eB(n){return n.appInitializer.bind(n)}function tB(n){return n.bootstrapListener.bind(n)}const a1=new u.OlP("Router Initializer");let Va=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-header"]],decls:68,vars:0,consts:[[1,"headerpic","shadow"],[1,"container","topnav"],[1,"topnav","navbar","navbar-expand-md","navbar-dark","pt-0","pb-1"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/econ.png","alt","Logo",1,"hd-logo","mt-2","rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navmenu",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navmenu",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item","px-2"],["routerLink","/about","routerLinkActive","active-link",1,"nav-link","text-secondary"],["routerLink","/videos","routerLinkActive","active-link",1,"nav-link","text-secondary"],[1,"nav-item","dropdown","px-2"],["data-bs-toggle","dropdown","routerLinkActive","active-link","type","button",1,"nav-link","text-secondary","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-dark","bg-primary","ddmenu"],["routerLink","/wordftd",1,"dropdown-item","text-decoration-none"],["routerLink","/wordftdv",1,"dropdown-item","text-decoration-none"],["data-bs-toggle","dropdown","routerLinkActive","active-link","type","button",1,"dropdown-item","text-decoration-none"],[1,"dropdown-menu","bg-primary","dropdown-submenu","ddmenu"],["routerLink","/wtbaudio",1,"dropdown-item","text-decoration-none"],["routerLink","/qanda",1,"dropdown-item","text-decoration-none"],[1,"dropdown-menu","dropdown-menu-dark","bg-primary","dropdown-submenu"],["routerLink","/wtbvideo",1,"dropdown-item","text-decoration-none"],["routerLink","/videos",1,"dropdown-item","text-decoration-none"],["routerLink","/books",1,"dropdown-item","text-decoration-none"],["routerLink","/resources",1,"dropdown-item","text-decoration-none"],["routerLink","/contact","routerLinkActive","active-link",1,"nav-link","text-secondary"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"nav",2),u.TgZ(3,"div",1),u.TgZ(4,"a",3),u._UZ(5,"img",4),u.qZA(),u.TgZ(6,"button",5),u._UZ(7,"span",6),u.qZA(),u.TgZ(8,"div",7),u.TgZ(9,"ul",8),u.TgZ(10,"li",9),u.TgZ(11,"a",10),u._uU(12,"About"),u.qZA(),u.qZA(),u.TgZ(13,"li",9),u.TgZ(14,"a",11),u._uU(15,"Messages"),u.qZA(),u.qZA(),u.TgZ(16,"li",12),u.TgZ(17,"a",13),u._uU(18,"Daily Word"),u.qZA(),u.TgZ(19,"ul",14),u.TgZ(20,"li"),u.TgZ(21,"a",15),u._uU(22,"Audio / Text"),u.qZA(),u.qZA(),u.TgZ(23,"li"),u.TgZ(24,"a",16),u._uU(25,"Video"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"li",12),u.TgZ(27,"a",13),u._uU(28,"Resources"),u.qZA(),u.TgZ(29,"ul",14),u.TgZ(30,"li"),u.TgZ(31,"a",17),u._uU(32,"Audio \xbb"),u.qZA(),u.TgZ(33,"ul",18),u.TgZ(34,"li"),u.TgZ(35,"a",19),u._uU(36,"With the Bible"),u.qZA(),u.qZA(),u.TgZ(37,"li"),u.TgZ(38,"a",15),u._uU(39,"Daily Word"),u.qZA(),u.qZA(),u.TgZ(40,"li"),u.TgZ(41,"a",20),u._uU(42,"Q and A"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(43,"li"),u.TgZ(44,"a",17),u._uU(45,"Video \xbb"),u.qZA(),u.TgZ(46,"ul",21),u.TgZ(47,"li"),u.TgZ(48,"a",22),u._uU(49,"With the Bible"),u.qZA(),u.qZA(),u.TgZ(50,"li"),u.TgZ(51,"a",16),u._uU(52,"Daily Word"),u.qZA(),u.qZA(),u.TgZ(53,"li"),u.TgZ(54,"a",23),u._uU(55,"Sermons"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(56,"li"),u.TgZ(57,"a",24),u._uU(58,"Books"),u.qZA(),u.qZA(),u.TgZ(59,"li"),u.TgZ(60,"a",20),u._uU(61,"Q and A"),u.qZA(),u.qZA(),u.TgZ(62,"li"),u.TgZ(63,"a",25),u._uU(64,"Other's Messages"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(65,"li",9),u.TgZ(66,"a",26),u._uU(67,"Contact"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[Oy,kM],styles:[".headerpic[_ngcontent-%COMP%]{height:8vw;background-image:linear-gradient(to bottom,rgba(86,150,113,.9),rgba(86,150,113,.8)),url(homepic.75a94ad83156d54d.jpg);background-size:cover;background-position:center}.hd-logo[_ngcontent-%COMP%]{width:6vw;display:inline-block}#navmenu[_ngcontent-%COMP%]{font-size:.9rem}#navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.active-link[_ngcontent-%COMP%]{font-weight:700}.mainlogo[_ngcontent-%COMP%]{width:60vw}.ddmenu[_ngcontent-%COMP%]{font-size:.9rem;text-decoration:none}"]}),n})(),Ua=(()=>{class n{constructor(){this.title="",this.heading=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-subhead"]],inputs:{title:"title",heading:"heading"},decls:6,vars:2,consts:[[1,"subhead","text-center"],[1,"text-dark"],[1,"row","title"],[1,"col-12"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"h2",1),u._uU(2),u.qZA(),u.qZA(),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u._uU(5),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Oqu(r.title),u.xp6(3),u.Oqu(r.heading))},styles:[".subhead[_ngcontent-%COMP%]{background-image:linear-gradient(to bottom,rgba(242,242,242,.8),rgba(242,242,242,.8)),url(homepic.75a94ad83156d54d.jpg);padding:8rem 10rem;align-items:center;height:50vh}.title[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;padding:2rem;font-size:1.5rem;font-weight:500;margin:auto}"]}),n})(),rB=(()=>{class n{constructor(){this.heading="Daily Word - Audio & Text",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-wordftd"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),iB=(()=>{class n{constructor(){this.heading="Video Sermons",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-videos"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),sB=(()=>{class n{constructor(){this.heading="contact information",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-contact"]],decls:33,vars:2,consts:[[3,"title","heading"],[1,"container"],[1,"row","p-5"],[1,"col-md-6","p-3"],["href","#"],["src","https://via.placeholder.com/400x400?text='MAP'","alt","placeholder"],[1,"card","shadow"],[1,"card-body"],[1,"row","my-4"],[1,"col-4","mb-5"],[1,"bi","bi-person-lines-fill"],[1,"contact-title","px-4"],[1,"col-8"],[1,"col-4"],[1,"bi","bi-telephone-fill"],[1,"bi","bi-envelope-fill"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u.TgZ(5,"a",4),u._UZ(6,"img",5),u.qZA(),u.qZA(),u.TgZ(7,"div",3),u.TgZ(8,"div",6),u.TgZ(9,"div",7),u.TgZ(10,"div",8),u.TgZ(11,"div",9),u._UZ(12,"i",10),u.TgZ(13,"h6",11),u._uU(14,"Address:"),u.qZA(),u.qZA(),u.TgZ(15,"div",12),u._uU(16," __________________________________________________ __________________________________________________ __________________________________________________ "),u.qZA(),u.qZA(),u.TgZ(17,"div",8),u.TgZ(18,"div",13),u._UZ(19,"i",14),u.TgZ(20,"h6",11),u._uU(21,"Mobile:"),u.qZA(),u.qZA(),u.TgZ(22,"div",12),u.TgZ(23,"h6"),u._uU(24,"+91 94488 49211"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"div",8),u.TgZ(26,"div",13),u._UZ(27,"i",15),u.TgZ(28,"h6",11),u._uU(29,"Email:"),u.qZA(),u.qZA(),u.TgZ(30,"div",12),u.TgZ(31,"h6"),u._uU(32,"edchelladurai@gmail.com"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[".contact-title[_ngcontent-%COMP%]{display:inline-block}"]}),n})(),oB=(()=>{class n{constructor(){this.heading="Messages from other servants of God",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-resources"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),aB=(()=>{class n{constructor(){this.heading="about e d chelladurai",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-about"]],decls:14,vars:2,consts:[[3,"title","heading"],[1,"container"],[1,"row","p-5"],[1,"col-md-6","p-3"],["href","#"],["src","https://via.placeholder.com/400x500?text='photo of EDC'","alt","placeholder"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u.TgZ(5,"a",4),u._UZ(6,"img",5),u.qZA(),u.qZA(),u.TgZ(7,"div",3),u.TgZ(8,"p"),u._uU(9," Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tempus laoreet purus sit amet scelerisque. Donec commodo odio sem, non efficitur mauris porttitor id. Fusce turpis lacus, mollis vitae luctus eu, consequat eu felis. Cras eget lacus sed nulla rutrum faucibus. Sed ut sem in felis mattis mattis. Suspendisse et velit tortor. Phasellus placerat, elit eu placerat rutrum, elit libero pretium justo, ac tempus risus eros in massa. Cras semper quam nisl, nec iaculis nisl placerat et. In sed interdum magna. Proin consequat erat vitae blandit vehicula. Vestibulum tristique ipsum pellentesque eros convallis, non ullamcorper velit varius. "),u._UZ(10,"br"),u._UZ(11,"br"),u._uU(12," Quisque sed consectetur nibh, sed scelerisque nunc. Vivamus quis ultrices turpis. In hac habitasse platea dictumst. Curabitur sollicitudin vestibulum odio quis volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam sollicitudin sapien a volutpat varius. Sed vehicula ante justo, id dictum lacus vestibulum in. Nulla vitae vestibulum nulla. Maecenas sodales nisi sit amet ante fringilla vehicula. Vestibulum suscipit nunc vel tempor viverra. Nulla vitae rutrum lorem. Proin sollicitudin bibendum consequat. Nullam quis leo lorem. Donec nec diam sed lacus viverra ullamcorper. Sed ex neque, viverra sit amet pharetra a, varius sed massa."),u._UZ(13,"br"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),lB=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:118,vars:0,consts:[[1,"homepic","shadow"],[1,"container","topnav"],[1,"topnav","navbar","navbar-expand-md","navbar-dark","pt-0","pb-1"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/econ.png","alt","Logo",1,"hd-logo","mt-2","rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navmenu",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navmenu",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item","px-2"],["routerLink","/about","routerLinkActive","active-link",1,"nav-link","text-secondary"],["routerLink","/videos","routerLinkActive","active-link",1,"nav-link","text-secondary"],[1,"nav-item","dropdown","px-2"],["data-bs-toggle","dropdown","routerLinkActive","active-link","type","button",1,"nav-link","text-secondary","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-dark","bg-primary","ddmenu"],["routerLink","/wordftd",1,"dropdown-item","text-decoration-none"],["routerLink","/wordftdv",1,"dropdown-item","text-decoration-none"],["data-bs-toggle","dropdown","routerLinkActive","active-link","type","button",1,"dropdown-item","text-decoration-none"],[1,"dropdown-menu","bg-primary","dropdown-submenu","ddmenu"],["routerLink","/wtbaudio",1,"dropdown-item","text-decoration-none"],["routerLink","/qanda",1,"dropdown-item","text-decoration-none"],[1,"dropdown-menu","dropdown-menu-dark","bg-primary","dropdown-submenu"],["routerLink","/wtbvideo",1,"dropdown-item","text-decoration-none"],["routerLink","/videos",1,"dropdown-item","text-decoration-none"],["routerLink","/books",1,"dropdown-item","text-decoration-none"],["routerLink","/resources",1,"dropdown-item","text-decoration-none"],["routerLink","/contact","routerLinkActive","active-link",1,"nav-link","text-secondary"],[1,"edcimg","mt-4"],["src","../../../assets/edclogo.png","alt","Logo",1,"mainlogo"],[1,"container","mb-5"],[1,"row","title"],[1,"col-12"],[1,"row","row-cols-1","row-cols-md-2","g-4"],[1,"col"],[1,"card","shadow","custcard","h-100"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["routerLink","gentorev",1,"btn","btn-primary","text-light"],["routerLink","wordftd",1,"btn","btn-primary","text-light"],["routerLink","resources",1,"btn","btn-primary","text-light"],["routerLink","videos",1,"btn","btn-primary","text-light"],[1,"vh-10","home-cont","text-center"],[1,"text-dark","text-uppercase","p-3","mb-0"],[1,"text-dark","pb-2","px-4"],["routerLink","contact",1,"btn","btn-primary","text-light","px-xxl-4","shadow"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"nav",2),u.TgZ(3,"div",1),u.TgZ(4,"a",3),u._UZ(5,"img",4),u.qZA(),u.TgZ(6,"button",5),u._UZ(7,"span",6),u.qZA(),u.TgZ(8,"div",7),u.TgZ(9,"ul",8),u.TgZ(10,"li",9),u.TgZ(11,"a",10),u._uU(12,"About"),u.qZA(),u.qZA(),u.TgZ(13,"li",9),u.TgZ(14,"a",11),u._uU(15,"Messages"),u.qZA(),u.qZA(),u.TgZ(16,"li",12),u.TgZ(17,"a",13),u._uU(18,"Daily Word"),u.qZA(),u.TgZ(19,"ul",14),u.TgZ(20,"li"),u.TgZ(21,"a",15),u._uU(22,"Audio / Text"),u.qZA(),u.qZA(),u.TgZ(23,"li"),u.TgZ(24,"a",16),u._uU(25,"Video"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"li",12),u.TgZ(27,"a",13),u._uU(28,"Resources"),u.qZA(),u.TgZ(29,"ul",14),u.TgZ(30,"li"),u.TgZ(31,"a",17),u._uU(32,"Audio \xbb"),u.qZA(),u.TgZ(33,"ul",18),u.TgZ(34,"li"),u.TgZ(35,"a",19),u._uU(36,"With the Bible"),u.qZA(),u.qZA(),u.TgZ(37,"li"),u.TgZ(38,"a",15),u._uU(39,"Daily Word"),u.qZA(),u.qZA(),u.TgZ(40,"li"),u.TgZ(41,"a",20),u._uU(42,"Q and A"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(43,"li"),u.TgZ(44,"a",17),u._uU(45,"Video \xbb"),u.qZA(),u.TgZ(46,"ul",21),u.TgZ(47,"li"),u.TgZ(48,"a",22),u._uU(49,"With the Bible"),u.qZA(),u.qZA(),u.TgZ(50,"li"),u.TgZ(51,"a",16),u._uU(52,"Daily Word"),u.qZA(),u.qZA(),u.TgZ(53,"li"),u.TgZ(54,"a",23),u._uU(55,"Sermons"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(56,"li"),u.TgZ(57,"a",24),u._uU(58,"Books"),u.qZA(),u.qZA(),u.TgZ(59,"li"),u.TgZ(60,"a",20),u._uU(61,"Q and A"),u.qZA(),u.qZA(),u.TgZ(62,"li"),u.TgZ(63,"a",25),u._uU(64,"Other's Messages"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(65,"li",9),u.TgZ(66,"a",26),u._uU(67,"Contact"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(68,"div",27),u._UZ(69,"img",28),u.qZA(),u.qZA(),u.TgZ(70,"main",29),u.TgZ(71,"div",30),u.TgZ(72,"div",31),u._uU(73,"Highlights"),u.qZA(),u.qZA(),u.TgZ(74,"div",32),u.TgZ(75,"div",33),u.TgZ(76,"div",34),u.TgZ(77,"div",35),u.TgZ(78,"h5",36),u._uU(79,"Genesis to Revelation"),u.qZA(),u.TgZ(80,"p",37),u._uU(81," This is a series of studies that covers Chapter by Chapter study of the Bible, covering the subject matter in about 30 minutes highlighting the focus in the chapter and its practical application. There are\xa0 altogether 1189 chapters. Some chapters like chapter 119 is lengthy, and hence the study is sometimes divided into more than one study in a chapter for clarity. "),u.qZA(),u.TgZ(82,"a",38),u._uU(83,"Learn more..."),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(84,"div",33),u.TgZ(85,"div",34),u.TgZ(86,"div",35),u.TgZ(87,"h5",36),u._uU(88,"Word for the day"),u.qZA(),u.TgZ(89,"p",37),u._uU(90," This is a series of meditations from the Bible, one for each day of the year. Each day's meditation is presented as seven points to make it easier for the reader to remember and thereby apply to his/her life during the course of a day. "),u.qZA(),u.TgZ(91,"a",39),u._uU(92,"Learn more..."),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(93,"div",33),u.TgZ(94,"div",34),u.TgZ(95,"div",35),u.TgZ(96,"h5",36),u._uU(97,"Resources - Books/Songs"),u.qZA(),u.TgZ(98,"p",37),u._uU(99," A group of 40 Authors collectively authored these 100 Word Centered Books in a simple format to bless readers around the globe for the Glory of God! It is available for free download. Primarily in English but few other languages like Kannada, Tamil, and Hindi. New Books will be added as and when it is ready. "),u.qZA(),u.TgZ(100,"a",40),u._uU(101,"Learn more..."),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(102,"div",33),u.TgZ(103,"div",34),u.TgZ(104,"div",35),u.TgZ(105,"h5",36),u._uU(106,"Sermon Videos"),u.qZA(),u.TgZ(107,"p",37),u._uU(108," Collection of Sermons based on the Word of God and suitable for various seasons. These were shared on television programs, in churches and in the Humility Bible School. These were presented directly in obedience to the Lord Jesus who said, \u201cMake Disciples of All nations, and Teaching them to Obey Everything I have Commanded you.\u201d Mathew 28:19,20. "),u.qZA(),u.TgZ(109,"a",41),u._uU(110,"Learn more..."),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(111,"div",42),u.TgZ(112,"h4",43),u._uU(113,"Get in touch with us"),u.qZA(),u.TgZ(114,"p",44),u._uU(115," If you would like to have more information or would simply like to communicate with us, please click on the button below to fill in a simple form. Alternately, you could connect with us on social media using the links below. "),u.qZA(),u.TgZ(116,"a",45),u._uU(117,"Contact us"),u.qZA(),u.qZA())},directives:[Oy,kM],styles:[".homepic[_ngcontent-%COMP%]{height:40vw;background-image:linear-gradient(to bottom,rgba(86,150,113,.9),rgba(86,150,113,.8)),url(homepic.75a94ad83156d54d.jpg);background-size:cover;background-position:center}.title[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;padding:3rem;font-size:1.5rem;font-weight:500;margin:auto}.custcard[_ngcontent-%COMP%]{background-color:#eeeeeeb3;padding:1rem}.custcard[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}.custcard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .custcard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem}.home-cont[_ngcontent-%COMP%]{background-color:#fdedaf;padding:2rem 4rem;align-items:center}.home-cont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-style:italic;font-weight:600}.home-cont[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem;margin:auto}.hd-logo[_ngcontent-%COMP%]{width:6vw;display:inline-block}#navmenu[_ngcontent-%COMP%]{font-size:.9rem}#navmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.active-link[_ngcontent-%COMP%]{font-weight:700}.edcimg[_ngcontent-%COMP%]{display:flex;justify-content:center}.mainlogo[_ngcontent-%COMP%]{width:60vw}.ddmenu[_ngcontent-%COMP%]{font-size:.9rem}"]}),n})(),uB=(()=>{class n{constructor(){this.heading="Daily Word - Video",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-wordftdv"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),cB=(()=>{class n{constructor(){this.heading="Books",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-books"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),dB=(()=>{class n{constructor(){this.heading="Questions and Answers",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-qanda"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),hB=(()=>{class n{constructor(){this.heading="With the Bible - Videos",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-wtbvideo"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),fB=(()=>{class n{constructor(){this.heading="Questions & Answers - Audio / Text",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-qandata"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})(),pB=(()=>{class n{constructor(t){this.db=t}loadBooks(t){return this.db.collection("books",r=>r.where("cat","==",t).orderBy("order")).get().pipe((0,Ct.U)(r=>this.convertSnaps(r)))}loadTracks(t){return this.db.collection("audio",r=>r.where("book","==",t).orderBy("name")).get().pipe((0,Ct.U)(r=>this.convertSnaps(r)))}convertSnaps(t){return t.docs.map(r=>Object.assign({id:r.id},r.data()))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(iR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class l1{}const _d="*";function NM(n,e){return{type:7,name:n,definitions:e,options:{}}}function FM(n,e=null){return{type:4,styles:e,timings:n}}function u1(n,e=null){return{type:2,steps:n,options:e}}function af(n){return{type:6,styles:n,offset:null}}function BD(n,e,t){return{type:0,name:n,styles:e,options:t}}function jD(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function mB(n=null){return{type:9,options:n}}function _B(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function c1(n){Promise.resolve(null).then(n)}class Ry{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){c1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class d1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?c1(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++r==a&&this._onDestroy()}),c.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function h1(){return"undefined"!=typeof window&&void 0!==window.document}function VM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function lf(n){switch(n.length){case 0:return new Ry;case 1:return n[0];default:return new d1(n)}}function f1(n,e,t,r,i={},a={}){const c=[],p=[];let _=-1,w=null;if(r.forEach(I=>{const M=I.offset,N=M==_,V=N&&w||{};Object.keys(I).forEach(H=>{let ee=H,ue=I[H];if("offset"!==H)switch(ee=e.normalizePropertyName(ee,c),ue){case"!":ue=i[H];break;case _d:ue=a[H];break;default:ue=e.normalizeStyleValue(H,ee,ue,c)}V[ee]=ue}),N||p.push(V),w=V,_=M}),c.length){const I="\n - ";throw new Error(`Unable to animate due to the following errors:${I}${c.join(I)}`)}return p}function UM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&BM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&BM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&BM(t,"destroy",n)))}}function BM(n,e,t){const r=t.totalTime,a=jM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function jM(n,e,t,r,i="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!c}}function Uo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function p1(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let HM=(n,e)=>!1,g1=(n,e,t)=>[];(VM()||"undefined"!=typeof Element)&&(HM=h1()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),g1=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let bg=null,m1=!1;function $M(n){bg||(bg=function vB(){return"undefined"!=typeof document?document.body:null}()||{},m1=!!bg.style&&"WebkitAppearance"in bg.style);let e=!0;return bg.style&&!function yB(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in bg.style,!e&&m1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in bg.style)),e}const GM=HM,qM=g1;function _1(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let y1=(()=>{class n{validateStyleProperty(t){return $M(t)}matchesElement(t,r){return!1}containsElement(t,r){return GM(t,r)}query(t,r,i){return qM(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,c,p=[],_){return new Ry(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ZM=(()=>{class n{}return n.NOOP=new y1,n})();const zM="ng-enter",HD="ng-leave",$D="ng-trigger",GD=".ng-trigger",b1="ng-animating",WM=".ng-animating";function wg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:KM(parseFloat(e[1]),e[2])}function KM(n,e){return"s"===e?1e3*n:n}function qD(n,e,t){return n.hasOwnProperty("duration")?n:function EB(n,e,t){let i,a=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=KM(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(a=KM(parseFloat(_),p[4]));const w=p[5];w&&(c=w)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),p=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&e.splice(_,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:c}}(n,e,t)}function Py(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Py(n,t);return t}function E1(n,e,t){return t?e+":"+t+";":""}function C1(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=E1(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=E1(0,IB(t),n.style[t]));n.setAttribute("style",e)}function Bu(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=QM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),VM()&&C1(n))}function Eg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=QM(t);n.style[r]=""}),VM()&&C1(n))}function xw(n){return Array.isArray(n)?1==n.length?n[0]:u1(n):n}const YM=new RegExp("{{\\s*(.+?)\\s*}}","g");function D1(n){let e=[];if("string"==typeof n){let t;for(;t=YM.exec(n);)e.push(t[1]);YM.lastIndex=0}return e}function ZD(n,e,t){const r=n.toString(),i=r.replace(YM,(a,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(`Please provide a value for the animation param ${c}`),p=""),p.toString()});return i==r?n:i}function zD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const DB=/-+([a-z0-9])/g;function QM(n){return n.replace(DB,(...e)=>e[1].toUpperCase())}function IB(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function I1(n,e){return 0===n||0===e}function T1(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],c=[];if(r.forEach(p=>{a.hasOwnProperty(p)||c.push(p),a[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(_){p[_]=XM(n,_)})}}return e}function Bo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function XM(n,e){return window.getComputedStyle(n)[e]}function TB(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function SB(n,e,t){if(":"==n[0]){const _=function AB(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],c=r[3];e.push(S1(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(S1(c,i))}(r,t,e)):t.push(n),t}const KD=new Set(["true","1"]),YD=new Set(["false","0"]);function S1(n,e){const t=KD.has(n)||YD.has(n),r=KD.has(e)||YD.has(e);return(i,a)=>{let c="*"==n||n==i,p="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?KD.has(n):YD.has(n)),!p&&r&&"boolean"==typeof a&&(p=a?KD.has(e):YD.has(e)),c&&p}}const MB=new RegExp("s*:selfs*,?","g");function JM(n,e,t){return new xB(n).build(e,t)}class xB{constructor(e){this._driver=e}build(e,t){const r=new RB(t);return this._resetContextStyleTimingState(r),Bo(this,xw(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,w=_.name;w.toString().split(/\s*,\s*/).forEach(I=>{_.name=I,a.push(this.visitState(_,t))}),_.name=w}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,c=i||{};if(r.styles.forEach(p=>{if(QD(p)){const _=p;Object.keys(_).forEach(w=>{D1(_[w]).forEach(I=>{c.hasOwnProperty(I)||a.add(I)})})}}),a.size){const p=zD(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Bo(this,xw(e.animation),t);return{type:1,matchers:TB(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Bo(this,r,t)),options:Cg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=r;const p=Bo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:a,options:Cg(e.options)}}visitAnimate(e,t){const r=function NB(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return ex(qD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=ex(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||qD(r,e),ex(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:af({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,p=!1;if(!c){p=!0;const w={};r.easing&&(w.easing=r.easing),c=af(w)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==_d?r.push(c):t.errors.push(`The provided style string value ${c} is not allowed.`):r.push(c)}):r.push(e.styles);let i=!1,a=null;return r.forEach(c=>{if(QD(c)){const p=c,_=p.easing;if(_&&(a=_,delete p.easing),!i)for(let w in p)if(p[w].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void t.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const _=t.collectedStyles[t.currentQuerySelector],w=_[p];let I=!0;w&&(a!=i&&a>=w.startTime&&i<=w.endTime&&(t.errors.push(`The CSS property "${p}" that exists between the times of "${w.startTime}ms" and "${w.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),I=!1),a=w.startTime),I&&(_[p]={startTime:a,endTime:i}),t.options&&function CB(n,e,t){const r=e.params||{},i=D1(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const c=[];let p=!1,_=!1,w=0;const I=e.steps.map(Ge=>{const Qe=this._makeStyleAst(Ge,t);let $e=null!=Qe.offset?Qe.offset:function PB(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(QD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(QD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Qe.styles),Be=0;return null!=$e&&(a++,Be=Qe.offset=$e),_=_||Be<0||Be>1,p=p||Be<w,w=Be,c.push(Be),Qe});_&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&t.errors.push("Please ensure that all keyframe offsets are in order");const M=e.steps.length;let N=0;a>0&&a<M?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(N=1/(M-1));const V=M-1,H=t.currentTime,ee=t.currentAnimateTimings,ue=ee.duration;return I.forEach((Ge,Qe)=>{const $e=N>0?Qe==V?1:N*Qe:c[Qe],Be=$e*ue;t.currentTime=H+ee.delay+Be,ee.duration=Be,this._validateStyleAst(Ge,t),Ge.offset=$e,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:Bo(this,xw(e.animation),t),options:Cg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Cg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Cg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function OB(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(MB,"")),n=n.replace(/@\*/g,GD).replace(/@\w+/g,t=>GD+"-"+t.substr(1)).replace(/:animating/g,WM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Uo(t.collectedStyles,t.currentQuerySelector,{});const p=Bo(this,xw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Cg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:qD(e.timings,t.errors,!0);return{type:12,animation:Bo(this,xw(e.animation),t),timings:r,options:null}}}class RB{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function QD(n){return!Array.isArray(n)&&"object"==typeof n}function Cg(n){return n?(n=Py(n)).params&&(n.params=function kB(n){return n?Py(n):null}(n.params)):n={},n}function ex(n,e,t){return{duration:n,delay:e,easing:t}}function tx(n,e,t,r,i,a,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:p}}class XD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const VB=new RegExp(":enter","g"),BB=new RegExp(":leave","g");function nx(n,e,t,r,i,a={},c={},p,_,w=[]){return(new jB).buildKeyframes(n,e,t,r,i,a,c,p,_,w)}class jB{buildKeyframes(e,t,r,i,a,c,p,_,w,I=[]){w=w||new XD;const M=new rx(e,t,w,i,a,I,[]);M.options=_,M.currentTimeline.setStyles([c],null,M.errors,_),Bo(this,r,M);const N=M.timelines.filter(V=>V.containsAnimation());if(Object.keys(p).length){let V;for(let H=N.length-1;H>=0;H--){const ee=N[H];if(ee.element===t){V=ee;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([p],null,M.errors,_)}return N.length?N.map(V=>V.buildKeyframes()):[tx(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const c=null!=r.duration?wg(r.duration):null,p=null!=r.delay?wg(r.delay):null;return 0!==c&&e.forEach(_=>{const w=t.appendInstructionToTimeline(_,c,p);a=Math.max(a,w.duration+w.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Bo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=JD);const c=wg(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Bo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?wg(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);a&&p.delayNextStep(a),Bo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return qD(t.params?ZD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*a),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?wg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=JD);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((w,I)=>{t.currentQueryIndex=I;const M=t.createSubContext(e.options,w);a&&M.delayNextStep(a),w===t.element&&(_=M.currentTimeline),Bo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const I=t.currentTimeline;_&&I.delayNextStep(_);const M=I.currentTime;Bo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const JD={};class rx{constructor(e,t,r,i,a,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=JD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new eI(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=wg(r.duration)),null!=r.delay&&(i.delay=wg(r.delay));const a=r.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=ZD(a[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new rx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=JD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new HB(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(VB,"."+this._enterClassName)).replace(BB,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),p.push(...w)}return!a&&0==p.length&&c.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),p}}class eI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new eI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_d,this._currentKeyframe[t]=_d}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},c=function $B(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=_d})):uf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const _=ZD(c[p],a,r);this._pendingStyles[p]=_,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:_d),this._updateStyle(p,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const w=uf(p,!0);Object.keys(w).forEach(I=>{const M=w[I];"!"==M?e.add(I):M==_d&&t.add(I)}),r||(w.offset=_/this.duration),i.push(w)});const a=e.size?zD(e.values()):[],c=t.size?zD(t.values()):[];if(r){const p=i[0],_=Py(p);p.offset=0,_.offset=1,i=[p,_]}return tx(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class HB extends eI{constructor(e,t,r,i,a,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=r+t,p=t/c,_=uf(e[0],!1);_.offset=0,a.push(_);const w=uf(e[0],!1);w.offset=x1(p),a.push(w);const I=e.length-1;for(let M=1;M<=I;M++){let N=uf(e[M],!1);N.offset=x1((t+N.offset*r)/c),a.push(N)}r=c,t=0,i="",e=a}return tx(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function x1(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ix{}class GB extends ix{normalizePropertyName(e,t){return QM(e)}normalizeStyleValue(e,t,r,i){let a="";const c=r.toString().trim();if(qB[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return c+a}}const qB=(()=>function ZB(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function O1(n,e,t,r,i,a,c,p,_,w,I,M,N){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:w,postStyleProps:I,totalTime:M,errors:N}}const sx={};class k1{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function zB(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):c}build(e,t,r,i,a,c,p,_,w,I){const M=[],N=this.ast.options&&this.ast.options.params||sx,H=this.buildStyles(r,p&&p.params||sx,M),ee=_&&_.params||sx,ue=this.buildStyles(i,ee,M),Ge=new Set,Qe=new Map,$e=new Map,Be="void"===i,wt={params:Object.assign(Object.assign({},N),ee)},xt=I?[]:nx(e,t,this.ast.animation,a,c,H,ue,wt,w,M);let en=0;if(xt.forEach(Ho=>{en=Math.max(Ho.duration+Ho.delay,en)}),M.length)return O1(t,this._triggerName,r,i,Be,H,ue,[],[],Qe,$e,en,M);xt.forEach(Ho=>{const yd=Ho.element,nN=Uo(Qe,yd,{});Ho.preStyleProps.forEach(Tg=>nN[Tg]=!0);const Vw=Uo($e,yd,{});Ho.postStyleProps.forEach(Tg=>Vw[Tg]=!0),yd!==t&&Ge.add(yd)});const Br=zD(Ge.values());return O1(t,this._triggerName,r,i,Be,H,ue,xt,Br,Qe,$e,en)}}class WB{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Py(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!=c&&(i[a]=c)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const c=a;Object.keys(c).forEach(p=>{let _=c[p];_.length>1&&(_=ZD(_,i,t));const w=this.normalizer.normalizePropertyName(p,t);_=this.normalizer.normalizeStyleValue(p,w,_,t),r[w]=_})}}),r}}class YB{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new WB(i.style,i.options&&i.options.params||{},r)}),R1(this.states,"true","1"),R1(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new k1(e,i,this.states))}),this.fallbackTransition=function QB(n,e,t){return new k1(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function R1(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const XB=new XD;class JB{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=JM(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=f1(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let c;const p=new Map;if(a?(c=nx(this._driver,t,a,zM,HD,{},{},r,XB,i),c.forEach(I=>{const M=Uo(p,I.element,{});I.postStyleProps.forEach(N=>M[N]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),c=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);p.forEach((I,M)=>{Object.keys(I).forEach(N=>{I[N]=this._driver.computeStyle(M,N,_d)})});const w=lf(c.map(I=>{const M=p.get(I.element);return this._buildPlayer(I,{},M)}));return this._playersById[e]=w,w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=jM(t,"","","");return UM(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const P1="ng-animate-queued",ox="ng-animate-disabled",s2=[],N1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},o2={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ba="__ng_removed";class ax{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function c2(n){return null!=n?n:null}(r?e.value:e),r){const a=Py(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ow="void",lx=new ax(Ow);class a2{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ja(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function d2(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const a=Uo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};a.push(c);const p=Uo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(ja(e,$D),ja(e,$D+"-"+t),p[t]=lx),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(c);_>=0&&a.splice(_,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),c=new ux(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(ja(e,$D),ja(e,$D+"-"+t),this._engine.statesByElement.set(e,p={}));let _=p[t];const w=new ax(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&w.absorbOptions(_.options),p[t]=w,_||(_=lx),w.value!==Ow&&_.value===w.value){if(!function p2(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(_.params,w.params)){const ee=[],ue=a.matchStyles(_.value,_.params,ee),Ge=a.matchStyles(w.value,w.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Eg(e,ue),Bu(e,Ge)})}return}const N=Uo(this._engine.playersByElement,e,[]);N.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let V=a.matchTransition(_.value,w.value,e,w.params),H=!1;if(!V){if(!i)return;V=a.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:_,toState:w,player:c,isFallbackTransition:H}),H||(ja(e,P1),c.onStart(()=>{Ny(e,P1)})),c.onDone(()=>{let ee=this.players.indexOf(c);ee>=0&&this.players.splice(ee,1);const ue=this._engine.playersByElement.get(e);if(ue){let Ge=ue.indexOf(c);Ge>=0&&ue.splice(Ge,1)}}),this.players.push(c),N.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,GD,!0);r.forEach(i=>{if(i[Ba])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const p=[];if(Object.keys(a).forEach(_=>{if(c.set(_,a[_].value),this._triggers[_]){const w=this.trigger(e,_,Ow,i);w&&p.push(w)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&lf(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,w=r[c]||lx,I=new ax(Ow),M=new ux(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:w,toState:I,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ba];(!a||a===N1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ja(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,c=this._elementListeners.get(a);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=jM(a,r.triggerName,r.fromState.value,r.toState.value);_._data=e,UM(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class l2{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new a2(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const c=r[i[a]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(tI(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!tI(t))return;const a=t[Ba];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ja(e,ox)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ny(e,ox))}removeNode(e,t,r,i){if(tI(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ba]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return tI(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,GD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,WM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return lf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ba];if(r&&r.setForRemoval){if(e[Ba]=N1,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(ox))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ja(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?lf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new XD,i=[],a=new Map,c=[],p=new Map,_=new Map,w=new Map,I=new Set;this.disabledNodes.forEach(ut=>{I.add(ut);const Et=this.driver.query(ut,".ng-animate-queued",!0);for(let At=0;At<Et.length;At++)I.add(Et[At])});const M=this.bodyNode,N=Array.from(this.statesByElement.keys()),V=V1(N,this.collectedEnterElements),H=new Map;let ee=0;V.forEach((ut,Et)=>{const At=zM+ee++;H.set(Et,At),ut.forEach(dn=>ja(dn,At))});const ue=[],Ge=new Set,Qe=new Set;for(let ut=0;ut<this.collectedLeaveElements.length;ut++){const Et=this.collectedLeaveElements[ut],At=Et[Ba];At&&At.setForRemoval&&(ue.push(Et),Ge.add(Et),At.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(dn=>Ge.add(dn)):Qe.add(Et))}const $e=new Map,Be=V1(N,Array.from(Ge));Be.forEach((ut,Et)=>{const At=HD+ee++;$e.set(Et,At),ut.forEach(dn=>ja(dn,At))}),e.push(()=>{V.forEach((ut,Et)=>{const At=H.get(Et);ut.forEach(dn=>Ny(dn,At))}),Be.forEach((ut,Et)=>{const At=$e.get(Et);ut.forEach(dn=>Ny(dn,At))}),ue.forEach(ut=>{this.processLeaveNode(ut)})});const wt=[],xt=[];for(let ut=this._namespaceList.length-1;ut>=0;ut--)this._namespaceList[ut].drainQueuedTransitions(t).forEach(At=>{const dn=At.player,Ti=At.element;if(wt.push(dn),this.collectedEnterElements.length){const Vs=Ti[Ba];if(Vs&&Vs.setForMove){if(Vs.previousTriggersValues&&Vs.previousTriggersValues.has(At.triggerName)){const Sg=Vs.previousTriggersValues.get(At.triggerName),hf=this.statesByElement.get(At.element);hf&&hf[At.triggerName]&&(hf[At.triggerName].value=Sg)}return void dn.destroy()}}const Hu=!M||!this.driver.containsElement(M,Ti),$o=$e.get(Ti),df=H.get(Ti),_r=this._buildInstruction(At,r,df,$o,Hu);if(_r.errors&&_r.errors.length)return void xt.push(_r);if(Hu)return dn.onStart(()=>Eg(Ti,_r.fromStyles)),dn.onDestroy(()=>Bu(Ti,_r.toStyles)),void i.push(dn);if(At.isFallbackTransition)return dn.onStart(()=>Eg(Ti,_r.fromStyles)),dn.onDestroy(()=>Bu(Ti,_r.toStyles)),void i.push(dn);const sN=[];_r.timelines.forEach(Vs=>{Vs.stretchStartingKeyframe=!0,this.disabledNodes.has(Vs.element)||sN.push(Vs)}),_r.timelines=sN,r.append(Ti,_r.timelines),c.push({instruction:_r,player:dn,element:Ti}),_r.queriedElements.forEach(Vs=>Uo(p,Vs,[]).push(dn)),_r.preStyleProps.forEach((Vs,Sg)=>{const hf=Object.keys(Vs);if(hf.length){let Ag=_.get(Sg);Ag||_.set(Sg,Ag=new Set),hf.forEach(Ox=>Ag.add(Ox))}}),_r.postStyleProps.forEach((Vs,Sg)=>{const hf=Object.keys(Vs);let Ag=w.get(Sg);Ag||w.set(Sg,Ag=new Set),hf.forEach(Ox=>Ag.add(Ox))})});if(xt.length){const ut=[];xt.forEach(Et=>{ut.push(`@${Et.triggerName} has failed due to:\n`),Et.errors.forEach(At=>ut.push(`- ${At}\n`))}),wt.forEach(Et=>Et.destroy()),this.reportError(ut)}const en=new Map,Br=new Map;c.forEach(ut=>{const Et=ut.element;r.has(Et)&&(Br.set(Et,Et),this._beforeAnimationBuild(ut.player.namespaceId,ut.instruction,en))}),i.forEach(ut=>{const Et=ut.element;this._getPreviousPlayers(Et,!1,ut.namespaceId,ut.triggerName,null).forEach(dn=>{Uo(en,Et,[]).push(dn),dn.destroy()})});const Ho=ue.filter(ut=>B1(ut,_,w)),yd=new Map;L1(yd,this.driver,Qe,w,_d).forEach(ut=>{B1(ut,_,w)&&Ho.push(ut)});const Vw=new Map;V.forEach((ut,Et)=>{L1(Vw,this.driver,new Set(ut),_,"!")}),Ho.forEach(ut=>{const Et=yd.get(ut),At=Vw.get(ut);yd.set(ut,Object.assign(Object.assign({},Et),At))});const Tg=[],rN=[],iN={};c.forEach(ut=>{const{element:Et,player:At,instruction:dn}=ut;if(r.has(Et)){if(I.has(Et))return At.onDestroy(()=>Bu(Et,dn.toStyles)),At.disabled=!0,At.overrideTotalTime(dn.totalTime),void i.push(At);let Ti=iN;if(Br.size>1){let $o=Et;const df=[];for(;$o=$o.parentNode;){const _r=Br.get($o);if(_r){Ti=_r;break}df.push($o)}df.forEach(_r=>Br.set(_r,Ti))}const Hu=this._buildAnimation(At.namespaceId,dn,en,a,Vw,yd);if(At.setRealPlayer(Hu),Ti===iN)Tg.push(At);else{const $o=this.playersByElement.get(Ti);$o&&$o.length&&(At.parentPlayer=lf($o)),i.push(At)}}else Eg(Et,dn.fromStyles),At.onDestroy(()=>Bu(Et,dn.toStyles)),rN.push(At),I.has(Et)&&i.push(At)}),rN.forEach(ut=>{const Et=a.get(ut.element);if(Et&&Et.length){const At=lf(Et);ut.setRealPlayer(At)}}),i.forEach(ut=>{ut.parentPlayer?ut.syncPlayerEvents(ut.parentPlayer):ut.destroy()});for(let ut=0;ut<ue.length;ut++){const Et=ue[ut],At=Et[Ba];if(Ny(Et,HD),At&&At.hasAnimation)continue;let dn=[];if(p.size){let Hu=p.get(Et);Hu&&Hu.length&&dn.push(...Hu);let $o=this.driver.query(Et,WM,!0);for(let df=0;df<$o.length;df++){let _r=p.get($o[df]);_r&&_r.length&&dn.push(..._r)}}const Ti=dn.filter(Hu=>!Hu.destroyed);Ti.length?h2(this,Et,Ti):this.processLeaveNode(Et)}return ue.length=0,Tg.forEach(ut=>{this.players.push(ut),ut.onDone(()=>{ut.destroy();const Et=this.players.indexOf(ut);this.players.splice(Et,1)}),ut.play()}),Tg}elementContainsData(e,t){let r=!1;const i=t[Ba];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!a||a==Ow;p.forEach(w=>{w.queued||!_&&w.triggerName!=i||c.push(w)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const a=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const w=_.element,I=w!==a,M=Uo(r,w,[]);this._getPreviousPlayers(w,I,c,p,t.toState).forEach(V=>{const H=V.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),V.destroy(),M.push(V)})}Eg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,c){const p=t.triggerName,_=t.element,w=[],I=new Set,M=new Set,N=t.timelines.map(H=>{const ee=H.element;I.add(ee);const ue=ee[Ba];if(ue&&ue.removedBeforeQueried)return new Ry(H.duration,H.delay);const Ge=ee!==_,Qe=function f2(n){const e=[];return U1(n,e),e}((r.get(ee)||s2).map(en=>en.getRealPlayer())).filter(en=>!!en.element&&en.element===ee),$e=a.get(ee),Be=c.get(ee),wt=f1(0,this._normalizer,0,H.keyframes,$e,Be),xt=this._buildPlayer(H,wt,Qe);if(H.subTimeline&&i&&M.add(ee),Ge){const en=new ux(e,p,ee);en.setRealPlayer(xt),w.push(en)}return xt});w.forEach(H=>{Uo(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function u2(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,H.element,H))}),I.forEach(H=>ja(H,b1));const V=lf(N);return V.onDestroy(()=>{I.forEach(H=>Ny(H,b1)),Bu(_,t.toStyles)}),M.forEach(H=>{Uo(i,H,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ry(e.duration,e.delay)}}class ux{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Ry,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>UM(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Uo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function tI(n){return n&&1===n.nodeType}function F1(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function L1(n,e,t,r,i){const a=[];t.forEach(_=>a.push(F1(_)));const c=[];r.forEach((_,w)=>{const I={};_.forEach(M=>{const N=I[M]=e.computeStyle(w,M,i);(!N||0==N.length)&&(w[Ba]=o2,c.push(w))}),n.set(w,I)});let p=0;return t.forEach(_=>F1(_,a[p++])),c}function V1(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(p){if(!p)return 1;let _=a.get(p);if(_)return _;const w=p.parentNode;return _=t.has(w)?w:i.has(w)?1:c(w),a.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function ja(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ny(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function h2(n,e,t){lf(t).onDone(()=>n.processLeaveNode(e))}function U1(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof d1?U1(r.players,e):e.push(r)}}function B1(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class nI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new l2(e,t,r),this._timelineEngine=new JB(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const _=[],w=JM(this._driver,a,_);if(_.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${_.join("\n - ")}`);p=function KB(n,e,t){return new YB(n,e,t)}(i,w,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,c]=p1(r);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[c,p]=p1(r);return this._timelineEngine.listen(c,t,p,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function j1(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=cx(e[0]),e.length>1&&(r=cx(e[e.length-1]))):e&&(t=cx(e)),t||r?new g2(n,t,r):null}let g2=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Bu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bu(this._element,this._initialStyles),this._endStyles&&(Bu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Eg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Eg(this._element,this._endStyles),this._endStyles=null),Bu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cx(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];m2(i)&&(e=e||{},e[i]=n[i])}return e}function m2(n){return"display"===n||"position"===n}const H1="animation",$1="animationend";class v2{constructor(e,t,r,i,a,c,p){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=c,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=_=>this._handleCallback(_)}apply(){(function b2(n,e){const t=hx(n,"").trim();let r=0;t.length&&(r=function E2(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),rI(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Z1(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){G1(this._element,this._name,"paused")}resume(){G1(this._element,this._name,"running")}setPosition(e){const t=q1(this._element,this._name);this._position=e*this._duration,rI(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Z1(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function w2(n,e){const r=hx(n,"").split(","),i=dx(r,e);i>=0&&(r.splice(i,1),rI(n,"",r.join(",")))}(this._element,this._name))}}function G1(n,e,t){rI(n,"PlayState",t,q1(n,e))}function q1(n,e){const t=hx(n,"");return t.indexOf(",")>0?dx(t.split(","),e):dx([t],e)}function dx(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function Z1(n,e,t){t?n.removeEventListener($1,e):n.addEventListener($1,e)}function rI(n,e,t,r){const i=H1+e;if(null!=r){const a=n.style[i];if(a.length){const c=a.split(",");c[r]=t,t=c.join(",")}}n.style[i]=t}function hx(n,e){return n.style[H1+e]||""}class z1{constructor(e,t,r,i,a,c,p,_){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=p,this._specialStyles=_,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=c||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new v2(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:XM(this.element,r))})}this.currentSnapshot=e}}class I2 extends Ry{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=_1(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class K1{constructor(){this._count=0}validateStyleProperty(e){return $M(e)}matchesElement(e,t){return!1}containsElement(e,t){return GM(e,t)}query(e,t,r){return qM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(p=>_1(p));let i=`@keyframes ${t} {\n`,a="";r.forEach(p=>{a=" ";const _=parseFloat(p.offset);i+=`${a}${100*_}% {\n`,a+=" ",Object.keys(p).forEach(w=>{const I=p[w];switch(w){case"offset":return;case"easing":return void(I&&(i+=`${a}animation-timing-function: ${I};\n`));default:return void(i+=`${a}${w}: ${I};\n`)}}),i+=`${a}}\n`}),i+="}\n";const c=document.createElement("style");return c.textContent=i,c}animate(e,t,r,i,a,c=[],p){const _=c.filter(ue=>ue instanceof z1),w={};I1(r,i)&&_.forEach(ue=>{let Ge=ue.currentSnapshot;Object.keys(Ge).forEach(Qe=>w[Qe]=Ge[Qe])});const I=function A2(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=T1(e,t,w));if(0==r)return new I2(e,I);const M="gen_css_kf_"+this._count++,N=this.buildKeyframeElement(e,M,t);(function S2(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(N);const H=j1(e,t),ee=new z1(e,t,M,r,i,a,I,H);return ee.onDestroy(()=>function M2(n){n.parentNode.removeChild(n)}(N)),ee}}class Q1{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:XM(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class x2{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(X1().toString()),this._cssKeyframesDriver=new K1}validateStyleProperty(e){return $M(e)}matchesElement(e,t){return!1}containsElement(e,t){return GM(e,t)}query(e,t,r){return qM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,c=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,c);const I={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(I.easing=a);const M={},N=c.filter(H=>H instanceof Q1);I1(r,i)&&N.forEach(H=>{let ee=H.currentSnapshot;Object.keys(ee).forEach(ue=>M[ue]=ee[ue])});const V=j1(e,t=T1(e,t=t.map(H=>uf(H,!1)),M));return new Q1(e,t,I,V)}}function X1(){return h1()&&Element.prototype.animate||{}}let k2=(()=>{class n extends l1{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?u1(t):t;return J1(this._renderer,null,r,"register",[i]),new R2(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class R2 extends class gB{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new P2(this._id,e,t||{},this._renderer)}}class P2{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return J1(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function J1(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const eP="@.disabled";let N2=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,c)=>{const p=null==c?void 0:c.parentNode(a);p&&c.removeChild(p,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new tP("",a,this.engine),this._rendererCache.set(a,I)),I}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=I=>{Array.isArray(I)?I.forEach(_):this.engine.registerTrigger(c,p,t,I.name,I)};return r.data.animation.forEach(_),new F2(this,p,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,p]=a;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(nI),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class tP{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==eP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class F2 extends tP{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==eP?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function L2(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),c="";return"@"!=a.charAt(0)&&([a,c]=function V2(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let U2=(()=>{class n extends nI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(ZM),u.LFG(ix))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Fy=new u.OlP("AnimationModuleType"),nP=[{provide:l1,useClass:k2},{provide:ix,useFactory:function j2(){return new GB}},{provide:nI,useClass:U2},{provide:u.FYo,useFactory:function H2(n,e,t){return new N2(n,e,t)},deps:[Ir,nI,u.R0b]}],rP=[{provide:ZM,useFactory:function B2(){return function O2(){return"function"==typeof X1()}()?new x2:new K1}},{provide:Fy,useValue:"BrowserAnimations"},...nP],$2=[{provide:ZM,useClass:y1},{provide:Fy,useValue:"NoopAnimations"},...nP];let G2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?$2:rP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:rP,imports:[Bl]}),n})();const q2=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function Z2(){return(0,u.f3M)(ie)}}),z2=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let fx,sI=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function W2(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?z2.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(q2,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();try{fx="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){fx=!1}let Rw,Dg,cf=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function $r(n){return n===qi}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fx)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function px(n){return function K2(){if(null==Rw&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rw=!0}))}finally{Rw=Rw||!1}return Rw}()?n:!!n.capture}function Y2(){if(null==Dg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Dg=!1,Dg;if("scrollBehavior"in document.documentElement.style)Dg=!0;else{const n=Element.prototype.scrollTo;Dg=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Dg}function oP(n){return n.composedPath?n.composedPath()[0]:n.target}function mx(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Pw(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class fj extends class hj{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Kn.x,this._typeaheadSubscription=Fa.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Kn.x,this.change=new Kn.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,lo.b)(t=>this._pressedLetters.push(t)),oh(e),zr(()=>this._pressedLetters.length>0),(0,Ct.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const a=(this._activeItemIndex+i)%r.length,c=r[a];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!e[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Pw(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}const wj=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function Ej(){return null}}),Cj=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Dj=(()=>{class n{constructor(t,r,i,a){this._ngZone=r,this._defaultOptions=a,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let a,c;return 1===r.length&&"number"==typeof r[0]?c=r[0]:[a,c]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=i&&i.politeness?i.politeness:"polite"),null==c&&i&&(c=i.duration),this._liveElement.setAttribute("aria-live",a),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(p=>this._currentResolve=p)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,r;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(r=this._currentResolve)||void 0===r||r.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wj,8),u.LFG(u.R0b),u.LFG(ie),u.LFG(Cj,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fP="cdk-high-contrast-black-on-white",pP="cdk-high-contrast-white-on-black",wx="cdk-high-contrast-active";let Ij=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(wx),t.remove(fP),t.remove(pP),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(wx),t.add(fP)):2===r&&(t.add(wx),t.add(pP))}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(cf),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jo(n){return null!=n&&"false"!=`${n}`}function Ex(n,e=0){return function Tj(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function gP(n){return Array.isArray(n)?n:[n]}function Qr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function aI(n){return n instanceof u.SBq?n.nativeElement:n}function Sj(n,e){if(1&n&&u._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=u.oxw();u.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function Aj(n,e){if(1&n&&(u.TgZ(0,"span",5),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij("(",t.group.label,")")}}const Mj=["*"],Oj=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function xj(){return!0}});let ju=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!mx()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ij),u.LFG(Oj,8),u.LFG(ie))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[kw],kw]}),n})();function kj(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=jo(e)}}}function Rj(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Pj(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=jo(e)}}}function Nj(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ex(t):this.defaultTabIndex}}}function Fj(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Kn.x,this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}let Vj=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Uj{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const _P={enterDuration:225,exitDuration:150},Cx=px({passive:!0}),yP=["mousedown","touchstart"],vP=["mouseup","mouseleave","touchend","touchcancel"];class jj{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=aI(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},_P),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function $j(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),p=e-i.left,_=t-i.top,w=a.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=p-c+"px",I.style.top=_-c+"px",I.style.height=2*c+"px",I.style.width=2*c+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${w}ms`,this._containerElement.appendChild(I),function Hj(n){window.getComputedStyle(n).getPropertyValue("opacity")}(I),I.style.transform="scale(1)";const M=new Uj(this,I,r);return M.state=0,this._activeRipples.add(M),r.persistent||(this._mostRecentTransientRipple=M),this._runTimeoutOutsideZone(()=>{const N=M===this._mostRecentTransientRipple;M.state=1,!r.persistent&&(!N||!this._isPointerDown)&&M.fadeOut()},w),M}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},_P),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=aI(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(yP))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(vP),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=function vj(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function bj(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Cx)})})}_removeTriggerEvents(){this._triggerElement&&(yP.forEach(e=>{this._triggerElement.removeEventListener(e,this,Cx)}),this._pointerUpEventsRegistered&&vP.forEach(e=>{this._triggerElement.removeEventListener(e,this,Cx)}))}}const Gj=new u.OlP("mat-ripple-global-options");let qj=(()=>{class n{constructor(t,r,i,a,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new jj(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(cf),u.Y36(Gj,8),u.Y36(Fy,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Zj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ju],ju]}),n})(),zj=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fy,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,r){2&t&&u.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),Wj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ju]]}),n})();const bP=new u.OlP("MAT_OPTION_PARENT_COMPONENT"),wP=new u.OlP("MatOptgroup");let Kj=0;class Yj{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let Qj=(()=>{class n{constructor(t,r,i,a){this._element=t,this._changeDetectorRef=r,this._parent=i,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Kj++,this.onSelectionChange=new u.vpe,this._stateChanges=new Kn.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=jo(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Pw(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new Yj(this,t))}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),EP=(()=>{class n extends Qj{constructor(t,r,i,a){super(t,r,i,a)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(bP,8),u.Y36(wP,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r._selectViaInteraction()})("keydown",function(a){return r._handleKeydown(a)}),2&t&&(u.Ikx("id",r.id),u.uIk("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),u.ekj("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[u.qOj],ngContentSelectors:Mj,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,r){1&t&&(u.F$t(),u.YNc(0,Sj,1,2,"mat-pseudo-checkbox",0),u.TgZ(1,"span",1),u.Hsn(2),u.qZA(),u.YNc(3,Aj,2,1,"span",2),u._UZ(4,"div",3)),2&t&&(u.Q6J("ngIf",r.multiple),u.xp6(3),u.Q6J("ngIf",r.group&&r.group._inert),u.xp6(1),u.Q6J("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},directives:[zj,Ln,qj],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function CP(n,e,t){if(t.length){let r=e.toArray(),i=t.toArray(),a=0;for(let c=0;c<n+1;c++)r[c].group&&r[c].group===i[a]&&a++;return a}return 0}let DP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Zj,Ai,ju,Wj]]}),n})();const Jj=["*",[["mat-card-footer"]]],eH=["*","mat-card-footer"];let tH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),nH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),rH=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),iH=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fy,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:eH,decls:2,vars:0,template:function(t,r){1&t&&(u.F$t(Jj),u.Hsn(0),u.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),IP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ju],ju]}),n})(),TP=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sH=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=aI(t);return new Jn.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Kn.x,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TP))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oH=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=jo(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ex(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(oh(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(sH),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),aH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[TP]}),n})();var lH=R(1144);const uH=["addListener","removeListener"],cH=["addEventListener","removeEventListener"],dH=["on","off"];function lI(n,e,t,r){if((0,pd.m)(t)&&(r=t,t=void 0),r)return lI(n,e,t).pipe(ws(r));const[i,a]=function pH(n){return(0,pd.m)(n.addEventListener)&&(0,pd.m)(n.removeEventListener)}(n)?cH.map(c=>p=>n[c](e,p,t)):function hH(n){return(0,pd.m)(n.addListener)&&(0,pd.m)(n.removeListener)}(n)?uH.map(SP(n,e)):function fH(n){return(0,pd.m)(n.on)&&(0,pd.m)(n.off)}(n)?dH.map(SP(n,e)):[];if(!i&&(0,lH.z)(n))return(0,Vi.z)(c=>lI(c,e,t))((0,Qs.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Jn.y(c=>{const p=(..._)=>c.next(1<_.length?_:_[0]);return i(p),()=>a(p)})}function SP(n,e){return t=>r=>n[t](e,r)}var gH=R(5032);function Ha(n){return(0,kr.e)((e,t)=>{(0,Qs.Xf)(n).subscribe(new hr.Q(t,()=>t.complete(),gH.Z)),!t.closed&&e.subscribe(t)})}const mH=["connectionContainer"],_H=["inputContainer"],yH=["label"];function vH(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15),u._UZ(3,"div",16),u._UZ(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15),u._UZ(7,"div",16),u._UZ(8,"div",17),u.qZA(),u.BQk())}function bH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function wH(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function EH(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function CH(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function DH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,wH,4,1,"ng-container",12),u.YNc(3,EH,1,0,"ng-content",12),u.YNc(4,CH,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function IH(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function TH(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function SH(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function AH(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function MH(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,AH,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const xH=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],OH=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let kH=0;const AP=new u.OlP("MatError");let RH=(()=>{class n{constructor(t,r){this.id="mat-error-"+kH++,t||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(u.$8M("aria-live"),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("id",r.id)},inputs:{id:"id"},features:[u._Bn([{provide:AP,useExisting:n}])]}),n})();const PH={transitionMessages:NM("transitionMessages",[BD("enter",af({opacity:1,transform:"translateY(0%)"})),jD("void => enter",[af({opacity:0,transform:"translateY(-5px)"}),FM("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Dx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const NH=new u.OlP("MatHint");let Ix=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),FH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const LH=new u.OlP("MatPrefix"),VH=new u.OlP("MatSuffix");let MP=0;const BH=Rj(class{constructor(n){this._elementRef=n}},"primary"),jH=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),OP=new u.OlP("MatFormField");let HH=(()=>{class n extends BH{constructor(t,r,i,a,c,p,_){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=a,this._platform=c,this._ngZone=p,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Kn.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+MP++,this._labelId="mat-form-field-label-"+MP++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==_,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=jo(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Po(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Ha(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ha(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Ty.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Po(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Po(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ha(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,lI(this._label.nativeElement,"transitionend").pipe((0,fd.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,i=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",a=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const I=r.querySelectorAll(`${i}, ${a}`);for(let M=0;M<I.length;M++)I[M].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,p=0;const _=r.querySelectorAll(i),w=r.querySelectorAll(a);if(this._label&&this._label.nativeElement.children.length){const I=r.getBoundingClientRect();if(0===I.width&&0===I.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const M=this._getStartEnd(I),N=t.children,V=this._getStartEnd(N[0].getBoundingClientRect());let H=0;for(let ee=0;ee<N.length;ee++)H+=N[ee].offsetWidth;c=Math.abs(V-M)-5,p=H>0?.75*H+10:0}for(let I=0;I<_.length;I++)_[I].style.width=`${c}px`;for(let I=0;I<w.length;I++)w[I].style.width=`${p}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(sI,8),u.Y36(jH,8),u.Y36(cf),u.Y36(u.R0b),u.Y36(Fy,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Dx,5),u.Suo(i,Dx,7),u.Suo(i,Ix,5),u.Suo(i,Ix,7),u.Suo(i,FH,5),u.Suo(i,AP,5),u.Suo(i,NH,5),u.Suo(i,LH,5),u.Suo(i,VH,5)),2&t){let a;u.iGM(a=u.CRH())&&(r._controlNonStatic=a.first),u.iGM(a=u.CRH())&&(r._controlStatic=a.first),u.iGM(a=u.CRH())&&(r._labelChildNonStatic=a.first),u.iGM(a=u.CRH())&&(r._labelChildStatic=a.first),u.iGM(a=u.CRH())&&(r._placeholderChild=a.first),u.iGM(a=u.CRH())&&(r._errorChildren=a),u.iGM(a=u.CRH())&&(r._hintChildren=a),u.iGM(a=u.CRH())&&(r._prefixChildren=a),u.iGM(a=u.CRH())&&(r._suffixChildren=a)}},viewQuery:function(t,r){if(1&t&&(u.Gf(mH,7),u.Gf(_H,5),u.Gf(yH,5)),2&t){let i;u.iGM(i=u.CRH())&&(r._connectionContainerRef=i.first),u.iGM(i=u.CRH())&&(r._inputContainerRef=i.first),u.iGM(i=u.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:OP,useExisting:n}]),u.qOj],ngContentSelectors:OH,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(u.F$t(xH),u.TgZ(0,"div",0),u.TgZ(1,"div",1,2),u.NdJ("click",function(a){return r._control.onContainerClick&&r._control.onContainerClick(a)}),u.YNc(3,vH,9,0,"ng-container",3),u.YNc(4,bH,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,DH,5,16,"label",8),u.qZA(),u.qZA(),u.YNc(10,IH,2,0,"div",9),u.qZA(),u.YNc(11,TH,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,SH,2,1,"div",12),u.YNc(14,MH,5,2,"div",13),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==r.appearance),u.xp6(1),u.Q6J("ngIf",r._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",r._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",r._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=r.appearance),u.xp6(1),u.Q6J("ngSwitch",r._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[Ln,oH,Hr,gi],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[PH.transitionMessages]},changeDetection:0}),n})(),$H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ai,ju,aH],ju]}),n})();var kP=R(4408);const Fw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Fw;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new Fa.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Fw;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Fw;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var RP=R(7565);new class qH extends RP.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const a=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<a&&(e=t.shift()));if(this._active=!1,r){for(;++i<a&&(e=t.shift());)e.unsubscribe();throw r}}}(class GH extends kP.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Fw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(Fw.cancelAnimationFrame(t),e._scheduled=void 0)}});let Tx,zH=1;const uI={};function PP(n){return n in uI&&(delete uI[n],!0)}const WH={setImmediate(n){const e=zH++;return uI[e]=!0,Tx||(Tx=Promise.resolve()),Tx.then(()=>PP(e)&&n()),e},clearImmediate(n){PP(n)}},{setImmediate:KH,clearImmediate:YH}=WH,cI={setImmediate(...n){const{delegate:e}=cI;return((null==e?void 0:e.setImmediate)||KH)(...n)},clearImmediate(n){const{delegate:e}=cI;return((null==e?void 0:e.clearImmediate)||YH)(n)},delegate:void 0};new class XH extends RP.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const a=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<a&&(e=t.shift()));if(this._active=!1,r){for(;++i<a&&(e=t.shift());)e.unsubscribe();throw r}}}(class QH extends kP.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=cI.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(cI.clearImmediate(t),e._scheduled=void 0)}});var t$=R(3532);function NP(n,e=iu.P){return function e$(n){return(0,kr.e)((e,t)=>{let r=!1,i=null,a=null,c=!1;const p=()=>{if(null==a||a.unsubscribe(),a=null,r){r=!1;const w=i;i=null,t.next(w)}c&&t.complete()},_=()=>{a=null,c&&t.complete()};e.subscribe(new hr.Q(t,w=>{r=!0,i=w,a||(0,Qs.Xf)(n(w)).subscribe(a=new hr.Q(t,p,_))},()=>{c=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>function r$(n=0,e,t=iu.P){let r=-1;return null!=e&&((0,t$.K)(e)?t=e:r=e),new Jn.y(i=>{let a=function n$(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e))}let s$=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Kn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Jn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(NP(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):pt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(zr(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=aI(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>lI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(cf),u.LFG(ie,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sx=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Kn.x,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(NP(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(cf),u.LFG(u.R0b),u.LFG(ie,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),FP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[kw,Ax],kw,Ax]}),n})();class Mx{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class a$ extends Mx{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class LP extends Mx{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class l$ extends Mx{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class c$ extends class u${constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof a$?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof LP?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof l$?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,r,i,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const p=c.element,_=this._document.createComment("dom-portal");p.parentNode.insertBefore(_,p),this.outletElement.appendChild(p),this._attachedPortal=c,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(p,_)})},this._document=a}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let d$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const VP=Y2();class f${constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Qr(-this._previousScrollPosition.left),e.style.top=Qr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,a=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),VP&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),VP&&(r.scrollBehavior=a,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class p${constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class UP{enable(){}disable(){}attach(){}}function xx(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function BP(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class g${constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();xx(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let m$=(()=>{class n{constructor(t,r,i,a){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new UP,this.close=c=>new p$(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new f$(this._viewportRuler,this._document),this.reposition=c=>new g$(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(s$),u.LFG(Sx),u.LFG(u.R0b),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jP{constructor(e){if(this.scrollStrategy=new UP,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class _${constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class y${constructor(e,t,r,i,a,c,p,_,w){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=c,this._document=p,this._location=_,this._outsideClickDispatcher=w,this._backdropElement=null,this._backdropClick=new Kn.x,this._attachments=new Kn.x,this._detachments=new Kn.x,this._locationChanges=Fa.w0.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new Kn.x,this._outsidePointerEvents=new Kn.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,fd.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Qr(this._config.width),e.height=Qr(this._config.height),e.minWidth=Qr(this._config.minWidth),e.minHeight=Qr(this._config.minHeight),e.maxWidth=Qr(this._config.maxWidth),e.maxHeight=Qr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=gP(t||[]).filter(a=>!!a);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ha((0,Ty.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let HP=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||mx()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].remove()}const r=this._document.createElement("div");r.classList.add(t),mx()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(cf))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $P="cdk-overlay-connected-position-bounding-box",v$=/([A-Za-z%]+)$/;class b${constructor(e,t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Kn.x,this._resizeSubscription=Fa.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add($P),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,a=[];let c;for(let p of this._preferredPositions){let _=this._getOriginPoint(e,i,p),w=this._getOverlayPoint(_,t,p),I=this._getOverlayFit(w,t,r,p);if(I.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(p,_);this._canFitWithFlexibleDimensions(I,w,r)?a.push({position:p,origin:_,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(_,p)}):(!c||c.overlayFit.visibleArea<I.visibleArea)&&(c={overlayFit:I,overlayPoint:w,originPoint:_,position:p,overlayRect:t})}if(a.length){let p=null,_=-1;for(const w of a){const I=w.boundingBoxRect.width*w.boundingBoxRect.height*(w.position.weight||1);I>_&&(_=I,p=w)}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ig(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($P),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,a;if("center"==r.originX)i=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,p=this._isRtl()?e.left:e.right;i="start"==r.originX?c:p}return t.left<0&&(i-=t.left),a="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(a-=t.top),{x:i,y:a}}_getOverlayPoint(e,t,r){let i,a;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+a}}_getOverlayFit(e,t,r,i){const a=qP(t);let{x:c,y:p}=e,_=this._getOffset(i,"x"),w=this._getOffset(i,"y");_&&(c+=_),w&&(p+=w);let N=0-p,V=p+a.height-r.height,H=this._subtractOverflows(a.width,0-c,c+a.width-r.width),ee=this._subtractOverflows(a.height,N,V),ue=H*ee;return{visibleArea:ue,isCompletelyWithinViewport:a.width*a.height===ue,fitsInViewportVertically:ee===a.height,fitsInViewportHorizontally:H==a.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,a=r.right-t.x,c=GP(this._overlayRef.getConfig().minHeight),p=GP(this._overlayRef.getConfig().minWidth),w=e.fitsInViewportHorizontally||null!=p&&p<=a;return(e.fitsInViewportVertically||null!=c&&c<=i)&&w}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=qP(t),a=this._viewportRect,c=Math.max(e.x+i.width-a.width,0),p=Math.max(e.y+i.height-a.height,0),_=Math.max(a.top-r.top-e.y,0),w=Math.max(a.left-r.left-e.x,0);let I=0,M=0;return I=i.width<=a.width?w||-c:e.x<this._viewportMargin?a.left-r.left-e.x:0,M=i.height<=a.height?_||-p:e.y<this._viewportMargin?a.top-r.top-e.y:0,this._previousPushAmount={x:I,y:M},{x:e.x+I,y:e.y+M}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new _$(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let a,c,p,I,M,N;if("top"===t.overlayY)c=e.y,a=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)p=r.height-e.y+2*this._viewportMargin,a=r.height-p+this._viewportMargin;else{const V=Math.min(r.bottom-e.y+r.top,e.y),H=this._lastBoundingBoxSize.height;a=2*V,c=e.y-V,a>H&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-H/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)N=r.width-e.x+this._viewportMargin,I=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)M=e.x,I=r.right-e.x;else{const V=Math.min(r.right-e.x+r.left,e.x),H=this._lastBoundingBoxSize.width;I=2*V,M=e.x-V,I>H&&!this._isInitialRender&&!this._growAfterOpen&&(M=e.x-H/2)}return{top:c,left:M,bottom:p,right:N,width:I,height:a}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=Qr(r.height),i.top=Qr(r.top),i.bottom=Qr(r.bottom),i.width=Qr(r.width),i.left=Qr(r.left),i.right=Qr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=Qr(a)),c&&(i.maxWidth=Qr(c))}this._lastBoundingBoxSize=r,Ig(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ig(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ig(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const I=this._viewportRuler.getViewportScrollPosition();Ig(r,this._getExactOverlayY(t,e,I)),Ig(r,this._getExactOverlayX(t,e,I))}else r.position="static";let p="",_=this._getOffset(t,"x"),w=this._getOffset(t,"y");_&&(p+=`translateX(${_}px) `),w&&(p+=`translateY(${w}px)`),r.transform=p.trim(),c.maxHeight&&(i?r.maxHeight=Qr(c.maxHeight):a&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=Qr(c.maxWidth):a&&(r.maxWidth="")),Ig(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=Qr(a.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=Qr(a.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BP(e,r),isOriginOutsideView:xx(e,r),isOverlayClipped:BP(t,r),isOverlayOutsideView:xx(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&gP(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Ig(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function GP(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(v$);return t&&"px"!==t?null:parseFloat(e)}return n||null}function qP(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const ZP="cdk-global-overlay-wrapper";class w${constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ZP),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:c,maxHeight:p}=r,_=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),w=!("100%"!==a&&"100vh"!==a||p&&"100%"!==p&&"100vh"!==p);e.position=this._cssPosition,e.marginLeft=_?"0":this._leftOffset,e.marginTop=w?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,_?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=w?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(ZP),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let E$=(()=>{class n{constructor(t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a}global(){return new w$}flexibleConnectedTo(t){return new b$(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Sx),u.LFG(ie),u.LFG(cf),u.LFG(HP))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zP=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C$=(()=>{class n extends zP{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){const p=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>p.next(i)):p.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D$=(()=>{class n extends zP{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=oP(a)},this._clickListener=a=>{const c=oP(a),p="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const _=this._attachedOverlays.slice();for(let w=_.length-1;w>-1;w--){const I=_[w];if(I._outsidePointerEvents.observers.length<1||!I.hasAttached())continue;if(I.overlayElement.contains(c)||I.overlayElement.contains(p))break;const M=I._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>M.next(a)):M.next(a)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(cf),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I$=0,dI=(()=>{class n{constructor(t,r,i,a,c,p,_,w,I,M,N){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=p,this._ngZone=_,this._document=w,this._directionality=I,this._location=M,this._outsideClickDispatcher=N}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),a=this._createPortalOutlet(i),c=new jP(t);return c.direction=c.direction||this._directionality.value,new y$(a,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+I$++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new c$(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(m$),u.LFG(HP),u.LFG(u._Vd),u.LFG(E$),u.LFG(C$),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(ie),u.LFG(sI),u.LFG(Je),u.LFG(D$))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const T$=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],WP=new u.OlP("cdk-connected-overlay-scroll-strategy");let KP=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),YP=(()=>{class n{constructor(t,r,i,a,c){this._overlay=t,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Fa.w0.EMPTY,this._attachSubscription=Fa.w0.EMPTY,this._detachSubscription=Fa.w0.EMPTY,this._positionSubscription=Fa.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new u.vpe,this.positionChange=new u.vpe,this.attach=new u.vpe,this.detach=new u.vpe,this.overlayKeydown=new u.vpe,this.overlayOutsideClick=new u.vpe,this._templatePortal=new LP(r,i),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=jo(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=jo(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=jo(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=jo(t)}get push(){return this._push}set push(t){this._push=jo(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=T$);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!Pw(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new jP({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof KP?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function h$(n,e=!1){return(0,kr.e)((t,r)=>{let i=0;t.subscribe(new hr.Q(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dI),u.Y36(u.Rgc),u.Y36(u.s_b),u.Y36(WP),u.Y36(sI,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[u.TTD]}),n})();const A$={provide:WP,deps:[dI],useFactory:function S$(n){return()=>n.scrollStrategies.reposition()}};let M$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[dI,A$],imports:[[kw,d$,FP],FP]}),n})();class x${constructor(e=!1,t,r=!0){this._multiple=e,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Kn.x,t&&t.length&&(e?t.forEach(i=>this._markSelected(i)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const O$=["trigger"],k$=["panel"];function R$(n,e){if(1&n&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.placeholder)}}function P$(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.triggerValue)}}function N$(n,e){1&n&&u.Hsn(0,0,["*ngSwitchCase","true"])}function F$(n,e){if(1&n&&(u.TgZ(0,"span",9),u.YNc(1,P$,2,1,"span",10),u.YNc(2,N$,1,0,"ng-content",11),u.qZA()),2&n){const t=u.oxw();u.Q6J("ngSwitch",!!t.customTrigger),u.xp6(2),u.Q6J("ngSwitchCase",!0)}}function L$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13),u.TgZ(1,"div",14,15),u.NdJ("@transformPanel.done",function(i){return u.CHM(t),u.oxw()._panelDoneAnimatingStream.next(i.toState)})("keydown",function(i){return u.CHM(t),u.oxw()._handleKeydown(i)}),u.Hsn(3,1),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("@transformPanelWrap",void 0),u.xp6(1),u.Gre("mat-select-panel ",t._getPanelTheme(),""),u.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),u.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),u.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const V$=[[["mat-select-trigger"]],"*"],U$=["mat-select-trigger","*"],QP={transformPanelWrap:NM("transformPanelWrap",[jD("* => void",_B("@transformPanel",[mB()],{optional:!0}))]),transformPanel:NM("transformPanel",[BD("void",af({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),BD("showing",af({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),BD("showing-multiple",af({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),jD("void => *",FM("120ms cubic-bezier(0, 0, 0.2, 1)")),jD("* => void",FM("100ms 25ms linear",af({opacity:0})))])};let XP=0;const eN=new u.OlP("mat-select-scroll-strategy"),$$=new u.OlP("MAT_SELECT_CONFIG"),G$={provide:eN,deps:[dI],useFactory:function H$(n){return()=>n.scrollStrategies.reposition()}};class q${constructor(e,t){this.source=e,this.value=t}}const Z$=Pj(Nj(kj(Fj(class{constructor(n,e,t,r,i){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=r,this.ngControl=i}})))),z$=new u.OlP("MatSelectTrigger");let W$=(()=>{class n extends Z${constructor(t,r,i,a,c,p,_,w,I,M,N,V,H,ee){var ue,Ge,Qe;super(c,a,_,w,M),this._viewportRuler=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=p,this._parentFormField=I,this._liveAnnouncer=H,this._defaultOptions=ee,this._panelOpen=!1,this._compareWith=($e,Be)=>$e===Be,this._uid="mat-select-"+XP++,this._triggerAriaLabelledBy=null,this._destroy=new Kn.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+XP++,this._panelDoneAnimatingStream=new Kn.x,this._overlayPanelClass=(null===(ue=this._defaultOptions)||void 0===ue?void 0:ue.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(Qe=null===(Ge=this._defaultOptions)||void 0===Ge?void 0:Ge.disableOptionCentering)&&void 0!==Qe&&Qe,this.ariaLabel="",this.optionSelectionChanges=hM(()=>{const $e=this.options;return $e?$e.changes.pipe(Po($e),Gn(()=>(0,Ty.T)(...$e.map(Be=>Be.onSelectionChange)))):this._ngZone.onStable.pipe((0,fd.q)(1),Gn(()=>this.optionSelectionChanges))}),this.openedChange=new u.vpe,this._openedStream=this.openedChange.pipe(zr($e=>$e),(0,Ct.U)(()=>{})),this._closedStream=this.openedChange.pipe(zr($e=>!$e),(0,Ct.U)(()=>{})),this.selectionChange=new u.vpe,this.valueChange=new u.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ee?void 0:ee.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ee.typeaheadDebounceInterval),this._scrollStrategyFactory=V,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(N)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,r,i,a;return null!==(a=null!==(t=this._required)&&void 0!==t?t:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(yi.required))&&void 0!==a&&a}set required(t){this._required=jo(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=jo(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=jo(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Ex(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new x$(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Pc(),Ha(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ha(this._destroy)).subscribe(t=>{t.added.forEach(r=>r.select()),t.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(Po(null),Ha(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),r=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,r;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(r=this._selectionModel)||void 0===r?void 0:r.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const r=t.keyCode,i=40===r||38===r||37===r||39===r,a=13===r||32===r,c=this._keyManager;if(!c.isTyping()&&a&&!Pw(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const p=this.selected;c.onKeydown(t);const _=this.selected;_&&p!==_&&this._liveAnnouncer.announce(_.viewValue,1e4)}}_handleOpenKeydown(t){const r=this._keyManager,i=t.keyCode,a=40===i||38===i,c=r.isTyping();if(a&&t.altKey)t.preventDefault(),this.close();else if(c||13!==i&&32!==i||!r.activeItem||Pw(t))if(!c&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const p=this.options.some(_=>!_.disabled&&!_.selected);this.options.forEach(_=>{_.disabled||(p?_.select():_.deselect())})}else{const p=r.activeItemIndex;r.onKeydown(t),this._multiple&&a&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==p&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,fd.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(t);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch(a){return!1}});return r&&this._selectionModel.select(r),r}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new fj(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Ha(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Ha(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,Ty.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ha(t)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Ty.T)(...this.options.map(r=>r._stateChanges)).pipe(Ha(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,r){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),r&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),r&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,t):t.indexOf(r)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const r=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(r?r+" ":"")+this.ariaLabelledby:r}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const r=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let i=(r?r+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Sx),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(Vj),u.Y36(u.SBq),u.Y36(sI,8),u.Y36(Ts,8),u.Y36(ga,8),u.Y36(OP,8),u.Y36(mn,10),u.$8M("tabindex"),u.Y36(eN),u.Y36(Dj),u.Y36($$,8))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,r){if(1&t&&(u.Gf(O$,5),u.Gf(k$,5),u.Gf(YP,5)),2&t){let i;u.iGM(i=u.CRH())&&(r.trigger=i.first),u.iGM(i=u.CRH())&&(r.panel=i.first),u.iGM(i=u.CRH())&&(r._overlayDir=i.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[u.qOj,u.TTD]}),n})(),K$=(()=>{class n extends W${constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,r,i){const a=this._getItemHeight();return Math.min(Math.max(0,a*t-r+a/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Ha(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,fd.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const r=CP(t,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===r?0:function Xj(n,e,t,r){return n<t?n:n+e>t+r?Math.max(0,n-r+e):t}((t+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new q$(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),a=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let w=this._selectionModel.selected[0]||this.options.first;c=w&&w.group?32:16}i||(c*=-1);const p=0-(t.left+c-(i?a:0)),_=t.right+c-r.width+(i?0:a);p>0?c+=p+8:_>0&&(c-=_+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,r,i){const a=this._getItemHeight(),c=(a-this._triggerRect.height)/2,p=Math.floor(256/a);let _;return this.disableOptionCentering?0:(_=0===this._scrollTop?t*a:this._scrollTop===i?(t-(this._getItemCount()-p))*a+(a-(this._getItemCount()*a-256)%a):r-a/2,Math.round(-1*_-c))}_checkOverlayWithinViewport(t){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),a=this._triggerRect.top-8,c=i.height-this._triggerRect.bottom-8,p=Math.abs(this._offsetY),w=Math.min(this._getItemCount()*r,256)-p-this._triggerRect.height;w>c?this._adjustPanelUp(w,c):p>a?this._adjustPanelDown(p,a,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,r){const i=Math.round(t-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,r,i){const a=Math.round(t-r);if(this._scrollTop+=a,this._offsetY+=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*t,256),c=r*t-i;let p;p=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),p+=CP(p,this.options,this.optionGroups);const _=i/2;this._scrollTop=this._calculateOverlayScroll(p,_,c),this._offsetY=this._calculateOverlayOffsetY(p,_,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const t=this._getItemHeight(),r=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,z$,5),u.Suo(i,EP,5),u.Suo(i,wP,5)),2&t){let a;u.iGM(a=u.CRH())&&(r.customTrigger=a.first),u.iGM(a=u.CRH())&&(r.options=a),u.iGM(a=u.CRH())&&(r.optionGroups=a)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,r){1&t&&u.NdJ("keydown",function(a){return r._handleKeydown(a)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&t&&(u.uIk("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-describedby",r._ariaDescribedby||null)("aria-activedescendant",r._getAriaActiveDescendant()),u.ekj("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[u._Bn([{provide:Dx,useExisting:n},{provide:bP,useExisting:n}]),u.qOj],ngContentSelectors:U$,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,r){if(1&t&&(u.F$t(V$),u.TgZ(0,"div",0,1),u.NdJ("click",function(){return r.toggle()}),u.TgZ(3,"div",2),u.YNc(4,R$,2,1,"span",3),u.YNc(5,F$,3,2,"span",4),u.qZA(),u.TgZ(6,"div",5),u._UZ(7,"div",6),u.qZA(),u.qZA(),u.YNc(8,L$,4,14,"ng-template",7),u.NdJ("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&t){const i=u.MAs(1);u.uIk("aria-owns",r.panelOpen?r.id+"-panel":null),u.xp6(3),u.Q6J("ngSwitch",r.empty),u.uIk("id",r._valueId),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(3),u.Q6J("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},directives:[KP,Hr,gi,Rl,YP,_s],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[QP.transformPanelWrap,QP.transformPanel]},changeDetection:0}),n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[G$],imports:[[Ai,M$,DP,ju],Ax,$H,DP,ju]}),n})();function Y$(n,e){if(1&n&&(u.TgZ(0,"mat-option",13),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t.cat),u.xp6(1),u.hij(" ",t.name," ")}}function Q$(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1,"Testament is mandatory!"),u.qZA())}function X$(n,e){if(1&n&&(u.TgZ(0,"mat-option",13),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t.book),u.xp6(1),u.hij(" ",t.book," ")}}function J$(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1,"Book is mandatory!"),u.qZA())}function eG(n,e){if(1&n&&(u.TgZ(0,"mat-option",13),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t.name),u.xp6(1),u.hij(" ",t.name," ")}}function tG(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1,"Track is mandatory!"),u.qZA())}function nG(n,e){if(1&n&&(u.TgZ(0,"div",14),u._UZ(1,"audio",15),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.playingTrack.path,u.LSH)}}const rG=[{path:"",component:lB},{path:"about",component:aB},{path:"videos",component:iB},{path:"wordftd",component:rB},{path:"wordftdta/:id",component:(()=>{class n{constructor(){this.heading="Word for the Day - Audio / Text",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-wordftdta"]],decls:4,vars:2,consts:[[3,"title","heading"],[1,"banner","p-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u._uU(3,"Content awaited..."),u.qZA()),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading))},directives:[Va,Ua],styles:[""]}),n})()},{path:"wordftdv",component:uB},{path:"wtbaudio",component:(()=>{class n{constructor(t){this.fileService=t,this.heading="With the Bible - Audio (Kannada)",this.verse="In the beginning was the Word, and the Word was with God, and the Word was God.",this.tracks=[],this.bibook="Genesis",this.cat="old",this.testaments=[{cat:"old",name:"Old Testament"},{cat:"new",name:"New Testament"}],this.currentTrack=!1,this.activeTrack=!1,this.testaSubscription=new Fa.w0,this.bookSubscription=new Fa.w0,this.form=new Jd({testament:new pc("old",{updateOn:"blur",validators:yi.required}),book:new pc("",{updateOn:"blur",validators:yi.required}),track:new pc("",{updateOn:"blur",validators:yi.required})})}ngOnInit(){this.books$=this.fileService.loadBooks(this.cat),this.getTracks(),this.onChangeTestament(),this.onChangeBook()}getTracks(){this.fileService.loadTracks(this.bibook).pipe((0,fd.q)(1)).subscribe(t=>{this.tracks=t})}onChangeTestament(){this.testaSubscription=this.form.get("testament").valueChanges.subscribe(t=>{this.cat=t,this.books$=this.fileService.loadBooks(this.cat),this.form.controls.track.setValue(null)})}onChangeBook(){this.bookSubscription=this.form.get("book").valueChanges.subscribe(t=>{this.bibook=t,this.getTracks(),this.currentTrack=!1})}onSelectTrack(){this.currentTrack=!0}playTrack(){this.activeTrack=!0;const t=this.form.controls.track.value;this.playingTrack=this.tracks.find(({name:r})=>r===t)}ngOnDestroy(){this.testaSubscription&&this.testaSubscription.unsubscribe(),this.bookSubscription&&this.bookSubscription.unsubscribe()}get testa(){return this.form.controls.testament}get book(){return this.form.controls.book}get track(){return this.form.controls.track}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pB))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-wtbaudio"]],decls:31,vars:13,consts:[[3,"title","heading"],[1,"container","text-center","w-50","mb-4"],[1,"mb-3"],[3,"formGroup"],["appearance","fill",1,"formgroup","mx-5","mt-3"],["formControlName","testament"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","fill",1,"formgroup","mx-5"],["formControlName","book"],["formControlName","track",3,"selectionChange"],["type","button",1,"btn","btn-primary","px-5",3,"disabled","click"],["class","container d-flex justify-content-center px-5 mb-5",4,"ngIf"],[3,"value"],[1,"container","d-flex","justify-content-center","px-5","mb-5"],["controls","","autoplay","",3,"src"]],template:function(t,r){1&t&&(u._UZ(0,"app-header"),u._UZ(1,"app-subhead",0),u.TgZ(2,"div",1),u.TgZ(3,"mat-card"),u.TgZ(4,"mat-card-subtitle",2),u._uU(5,"Select Testament, Book & Chapter "),u.qZA(),u.TgZ(6,"mat-card-content"),u.TgZ(7,"form",3),u.TgZ(8,"mat-form-field",4),u.TgZ(9,"mat-label"),u._uU(10,"Testament"),u.qZA(),u.TgZ(11,"mat-select",5),u.YNc(12,Y$,2,2,"mat-option",6),u.qZA(),u.YNc(13,Q$,2,0,"mat-error",7),u.qZA(),u.TgZ(14,"mat-form-field",8),u.TgZ(15,"mat-label"),u._uU(16,"Book"),u.qZA(),u.TgZ(17,"mat-select",9),u.YNc(18,X$,2,2,"mat-option",6),u.ALo(19,"async"),u.qZA(),u.YNc(20,J$,2,0,"mat-error",7),u.qZA(),u.TgZ(21,"mat-form-field",8),u.TgZ(22,"mat-label"),u._uU(23,"Chapter"),u.qZA(),u.TgZ(24,"mat-select",10),u.NdJ("selectionChange",function(){return r.onSelectTrack()}),u.YNc(25,eG,2,2,"mat-option",6),u.qZA(),u.YNc(26,tG,2,0,"mat-error",7),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"mat-card-actions"),u.TgZ(28,"button",11),u.NdJ("click",function(){return r.playTrack()}),u._uU(29," PLAY "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(30,nG,2,1,"div",12)),2&t&&(u.xp6(1),u.Q6J("title",r.verse)("heading",r.heading),u.xp6(6),u.Q6J("formGroup",r.form),u.xp6(5),u.Q6J("ngForOf",r.testaments),u.xp6(1),u.Q6J("ngIf",r.testa.invalid),u.xp6(5),u.Q6J("ngForOf",u.lcZ(19,11,r.books$)),u.xp6(2),u.Q6J("ngIf",r.book.invalid),u.xp6(5),u.Q6J("ngForOf",r.tracks),u.xp6(1),u.Q6J("ngIf",r.track.invalid),u.xp6(2),u.Q6J("disabled",!r.form.valid||!r.currentTrack),u.xp6(2),u.Q6J("ngIf",r.activeTrack))},directives:[Va,Ua,iH,nH,tH,Pf,oc,ga,HH,Ix,K$,sc,rs,Fn,EP,Ln,RH,rH],pipes:[$u],styles:[".formgroup[_ngcontent-%COMP%]{display:block}"]}),n})()},{path:"qanda",component:dB},{path:"qandata/:id",component:fB},{path:"wtbvideo",component:hB},{path:"books",component:cB},{path:"resources",component:oB},{path:"contact",component:sB},{path:"**",redirectTo:"",pathMatch:"full"}];let iG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[s1.forRoot(rG)],s1]}),n})(),sG=(()=>{class n{constructor(){}ngOnInit(){}goTopOfPage(){window.scroll({top:0,left:0,behavior:"smooth"})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-footer"]],decls:23,vars:0,consts:[[1,"container-fluid","vh-10","bg-primary"],[1,"row","align-items-center"],[1,"col-md-4","py-3","text-center"],["routerLink","/"],["src","../../../assets/econ.png","alt","Ft-Logo",1,"ft-logo","rounded","shadow"],[1,"col-md-4","text-center"],[1,"row","inblock"],["href","https://facebook.com/","target","_blank",1,"text-secondary","social","text-decoration-none"],[1,"bi","bi-facebook"],["href","https://youtube.com/","target","_blank",1,"text-secondary","social","text-decoration-none"],[1,"bi","bi-youtube"],["href","https://instagram.com/","target","_blank",1,"text-secondary","social","text-decoration-none"],[1,"bi","bi-instagram"],["href","https://open.spotify.com/show/0v51nnk1ZJRcbDyvCk7z00?si=rsvXP8rDRhi7C2A9DkfkXQ/","target","_blank",1,"text-secondary","social","text-decoration-none"],[1,"bi","bi-spotify"],["href","https://www.apple.com/in/apple-podcasts/","target","_blank",1,"text-secondary","social","text-decoration-none"],[1,"bi","bi-apple"],[1,"row","mt-md-2"],[1,"copy"],["type","button",1,"btn","btn-secondary","topofpage",3,"click"],[1,"bi","bi-arrow-up-circle-fill"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"a",3),u._UZ(4,"img",4),u.qZA(),u.qZA(),u.TgZ(5,"div",5),u.TgZ(6,"div",6),u.TgZ(7,"a",7),u._UZ(8,"i",8),u.qZA(),u.TgZ(9,"a",9),u._UZ(10,"i",10),u.qZA(),u.TgZ(11,"a",11),u._UZ(12,"i",12),u.qZA(),u.TgZ(13,"a",13),u._UZ(14,"i",14),u.qZA(),u.TgZ(15,"a",15),u._UZ(16,"i",16),u.qZA(),u.qZA(),u.TgZ(17,"div",17),u.TgZ(18,"p",18),u._uU(19,"\xa9 edchelladurai.com 2022"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(20,"div",5),u.TgZ(21,"button",19),u.NdJ("click",function(){return r.goTopOfPage()}),u._UZ(22,"i",20),u.qZA(),u.qZA(),u.qZA(),u.qZA())},directives:[Oy],styles:[".ft-logo[_ngcontent-%COMP%]{width:8vw;display:inline-block}.copy[_ngcontent-%COMP%]{font-size:.7rem;margin-bottom:0}.soc-blocks[_ngcontent-%COMP%]{display:inline-block;font-size:.8rem;margin-top:2rem}.inblock[_ngcontent-%COMP%]{display:inline-block;font-size:1.2rem;margin-top:2rem}.topofpage[_ngcontent-%COMP%]{border-radius:50%;border:none}"]}),n})(),oG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(u._UZ(0,"router-outlet"),u._UZ(1,"app-footer"))},directives:[TM,sG],styles:[""]}),n})();const aG=[Ai,IP,tN];let lG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[aG,Ai,IP,tN]}),n})(),uG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[oG]}),n.\u0275inj=u.cJS({providers:[],imports:[[Bl,iG,on.hO.initializeApp(sR_firebase),Ci,zL,G2,lG,ni]]}),n})();(0,u.G48)(),na().bootstrapModule(uG).catch(n=>console.error(n))},5867:(Xe,ye,R)=>{R.d(ye,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=R(9681);(0,u.registerVersion)("firebase","9.9.0","app")},127:(Xe,ye,R)=>{R.d(ye,{Z:()=>u.Z});var u=R(3942);u.Z.registerVersion("firebase","9.9.0","app-compat")},1121:(Xe,ye,R)=>{R.r(ye);var u=R(5861),X=R(3942),P=R(2090),ae=R(9681);function ce(y,f){var g={};for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&f.indexOf(b)<0&&(g[b]=y[b]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(b=Object.getOwnPropertySymbols(y);T<b.length;T++)f.indexOf(b[T])<0&&Object.prototype.propertyIsEnumerable.call(y,b[T])&&(g[b[T]]=y[b[T]])}return g}var se=R(1877),yt=R(4859);const hn=function nn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ui=function yr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ci=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Us=new se.Yd("@firebase/auth");function jr(y,...f){Us.logLevel<=se.in.ERROR&&Us.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function Kt(y,...f){throw xr(y,...f)}function Rn(y,...f){return xr(y,...f)}function fs(y,f,g){const b=Object.assign(Object.assign({},ui()),{[f]:g});return new P.LL("auth","Firebase",b).create(f,{appName:y.name})}function di(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Kt(y,"argument-error"),fs(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xr(y,...f){if("string"!=typeof y){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return ci.create(y,...f)}function Pe(y,f,...g){if(!y)throw xr(f,...g)}function lt(y){const f="INTERNAL ASSERTION FAILED: "+y;throw jr(f),new Error(f)}function Pn(y,f){y||lt(f)}const Nn=new Map;function rn(y){Pn(y instanceof Function,"Expected a class definition");let f=Nn.get(y);return f?(Pn(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Nn.set(y,f),f)}function Hn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Tn(){return"http:"===hi()||"https:"===hi()}function hi(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class at{constructor(f,g){this.shortDelay=f,this.longDelay=g,Pn(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function kl(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tn()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vt(y,f){Pn(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Bs{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ji={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ht=new at(3e4,6e4);function fn(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function zt(y,f,g,b){return fi.apply(this,arguments)}function fi(){return(fi=(0,u.Z)(function*(y,f,g,b,T={}){return ft(y,T,(0,u.Z)(function*(){let x={},U={};b&&("GET"===f?U=b:x={body:JSON.stringify(b)});const J=(0,P.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Te=yield y._getAdditionalHeaders();return Te["Content-Type"]="application/json",y.languageCode&&(Te["X-Firebase-Locale"]=y.languageCode),Bs.fetch()(B(y,y.config.apiHost,g,J),Object.assign({method:f,headers:Te,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ft(y,f,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,u.Z)(function*(y,f,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},ji),f);try{const T=new $(y),x=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const U=yield x.json();if("needConfirmation"in U)throw W(y,"account-exists-with-different-credential",U);if(x.ok&&!("errorMessage"in U))return U;{const J=x.ok?U.errorMessage:U.error.message,[Te,Se]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Te)throw W(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Te)throw W(y,"email-already-in-use",U);if("USER_DISABLED"===Te)throw W(y,"user-disabled",U);const et=b[Te]||Te.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw fs(y,et,Se);Kt(y,et)}}catch(T){if(T instanceof P.ZR)throw T;Kt(y,"network-request-failed")}})).apply(this,arguments)}function j(y,f,g,b){return z.apply(this,arguments)}function z(){return(z=(0,u.Z)(function*(y,f,g,b,T={}){const x=yield zt(y,f,g,b,T);return"mfaPendingCredential"in x&&Kt(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function B(y,f,g,b){const T=`${f}${g}?${b}`;return y.config.emulator?vt(y.config,T):`${y.config.apiScheme}://${T}`}class ${constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Rn(this.auth,"network-request-failed")),Ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function W(y,f,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const T=Rn(y,f,b);return T.customData._tokenResponse=g,T}function Ze(){return(Ze=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function bt(y,f){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function an(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Lt(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Go(){return(Go=(0,u.Z)(function*(y,f=!1){const g=(0,P.m9)(y),b=yield g.getIdToken(f),T=$n(b);Pe(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,U=null==x?void 0:x.sign_in_provider;return{claims:T,token:b,authTime:Lt(qo(T.auth_time)),issuedAtTime:Lt(qo(T.iat)),expirationTime:Lt(qo(T.exp)),signInProvider:U||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function qo(y){return 1e3*Number(y)}function $n(y){var f;const[g,b,T]=y.split(".");if(void 0===g||void 0===b||void 0===T)return jr("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,P.tV)(b);return x?JSON.parse(x):(jr("Failed to decode base64 JWT payload"),null)}catch(x){return jr("Caught error parsing JWT payload as JSON",null===(f=x)||void 0===f?void 0:f.toString()),null}}function vr(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,u.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof P.ZR&&js(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function js({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class vd{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,u.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(g=b)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Hs{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lt(this.lastLoginAt),this.creationTime=Lt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gs(y){return ms.apply(this,arguments)}function ms(){return(ms=(0,u.Z)(function*(y){var f;const g=y.auth,b=yield y.getIdToken(),T=yield vr(y,an(g,{idToken:b}));Pe(null==T?void 0:T.users.length,g,"internal-error");const x=T.users[0];y._notifyReloadListener(x);const U=(null===(f=x.providerUserInfo)||void 0===f?void 0:f.length)?We(x.providerUserInfo):[],J=Jr(y.providerData,U),et=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==J?void 0:J.length)),ot={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:J,metadata:new Hs(x.createdAt,x.lastLoginAt),isAnonymous:et};Object.assign(y,ot)})).apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(y){const f=(0,P.m9)(y);yield gs(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Jr(y,f){return[...y.filter(b=>!f.some(T=>T.providerId===b.providerId)),...f]}function We(y){return y.map(f=>{var{providerId:g}=f,b=ce(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function sn(){return(sn=(0,u.Z)(function*(y,f){const g=yield ft(y,{},(0,u.Z)(function*(){const b=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=y.config,U=B(y,T,"/v1/token",`key=${x}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",Bs.fetch()(U,{method:"POST",headers:J,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Pe(f.idToken,"internal-error"),Pe(void 0!==f.idToken,"internal-error"),Pe(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Gi(y){const f=$n(y);return Pe(f,"internal-error"),Pe(void 0!==f.exp,"internal-error"),Pe(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,u.Z)(function*(){return Pe(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,u.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:U}=yield function Pt(y,f){return sn.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(T,x,Number(U))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:T,expirationTime:x}=g,U=new cr;return b&&(Pe("string"==typeof b,"internal-error",{appName:f}),U.refreshToken=b),T&&(Pe("string"==typeof T,"internal-error",{appName:f}),U.accessToken=T),x&&(Pe("number"==typeof x,"internal-error",{appName:f}),U.expirationTime=x),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new cr,this.toJSON())}_performRefresh(){return lt("not implemented")}}function wr(y,f){Pe("string"==typeof y||void 0===y,"internal-error",{appName:f})}class yn{constructor(f){var{uid:g,auth:b,stsTokenManager:T}=f,x=ce(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Hs(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,u.Z)(function*(){const b=yield vr(g,g.stsTokenManager.getToken(g.auth,f));return Pe(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function ps(y){return Go.apply(this,arguments)}(this,f)}reload(){return function br(y){return co.apply(this,arguments)}(this)}_assign(f){this!==f&&(Pe(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new yn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,u.Z)(function*(){let T=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield gs(b)),yield b.auth._persistUserIfCurrent(b),T&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,u.Z)(function*(){const g=yield f.getIdToken();return yield vr(f,function xe(y,f){return Ze.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,T,x,U,J,Te,Se,et;const ot=null!==(b=g.displayName)&&void 0!==b?b:void 0,Bt=null!==(T=g.email)&&void 0!==T?T:void 0,pr=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,jn=null!==(U=g.photoURL)&&void 0!==U?U:void 0,Mo=null!==(J=g.tenantId)&&void 0!==J?J:void 0,ch=null!==(Te=g._redirectEventId)&&void 0!==Te?Te:void 0,xo=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,Mc=null!==(et=g.lastLoginAt)&&void 0!==et?et:void 0,{uid:dh,emailVerified:xc,isAnonymous:Yf,providerData:_l,stsTokenManager:yl}=g;Pe(dh&&yl,f,"internal-error");const lm=cr.fromJSON(this.name,yl);Pe("string"==typeof dh,f,"internal-error"),wr(ot,f.name),wr(Bt,f.name),Pe("boolean"==typeof xc,f,"internal-error"),Pe("boolean"==typeof Yf,f,"internal-error"),wr(pr,f.name),wr(jn,f.name),wr(Mo,f.name),wr(ch,f.name),wr(xo,f.name),wr(Mc,f.name);const hh=new yn({uid:dh,auth:f,email:Bt,emailVerified:xc,displayName:ot,isAnonymous:Yf,photoURL:jn,phoneNumber:pr,tenantId:Mo,stsTokenManager:lm,createdAt:xo,lastLoginAt:Mc});return _l&&Array.isArray(_l)&&(hh.providerData=_l.map(ov=>Object.assign({},ov))),ch&&(hh._redirectEventId=ch),hh}static _fromIdTokenResponse(f,g,b=!1){return(0,u.Z)(function*(){const T=new cr;T.updateFromServerResponse(g);const x=new yn({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:b});return yield gs(x),x})()}}const Xt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,b){var T=this;return(0,u.Z)(function*(){T.storage[g]=b})()}_get(g){var b=this;return(0,u.Z)(function*(){const T=b.storage[g];return void 0===T?null:T})()}_remove(g){var b=this;return(0,u.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function pi(y,f,g){return`firebase:${y}:${f}:${g}`}class vn{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:T,name:x}=this.auth;this.fullUserKey=pi(this.userKey,T.apiKey,x),this.fullPersistenceKey=pi("persistence",T.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,u.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?yn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,u.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,u.Z)(function*(){if(!g.length)return new vn(rn(Xt),f,b);const T=(yield Promise.all(g.map(function(){var Se=(0,u.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let x=T[0]||rn(Xt);const U=pi(b,f.config.apiKey,f.name);let J=null;for(const Se of g)try{const et=yield Se._get(U);if(et){const ot=yn._fromJSON(f,et);Se!==x&&(J=ot),x=Se;break}}catch(et){}const Te=T.filter(Se=>Se._shouldAllowMigration);return x._shouldAllowMigration&&Te.length?(x=Te[0],J&&(yield x._set(U,J.toJSON())),yield Promise.all(g.map(function(){var Se=(0,u.Z)(function*(et){if(et!==x)try{yield et._remove(U)}catch(ot){}});return function(et){return Se.apply(this,arguments)}}())),new vn(x,f,b)):new vn(x,f,b)})()}}function kt(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ho(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if($a(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Zo(f))return"Blackberry";if(zo(f))return"Webos";if(_s(f))return"Safari";if((f.includes("chrome/")||Ga(f))&&!f.includes("edge/"))return"Chrome";if(Fn(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function $a(y=(0,P.z$)()){return/firefox\//i.test(y)}function _s(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ga(y=(0,P.z$)()){return/crios\//i.test(y)}function ho(y=(0,P.z$)()){return/iemobile/i.test(y)}function Fn(y=(0,P.z$)()){return/android/i.test(y)}function Zo(y=(0,P.z$)()){return/blackberry/i.test(y)}function zo(y=(0,P.z$)()){return/webos/i.test(y)}function Ln(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Hr(y=(0,P.z$)()){return Ln(y)||Fn(y)||zo(y)||Zo(y)||/windows phone/i.test(y)||ho(y)}function Rl(y,f=[]){let g;switch(y){case"Browser":g=kt((0,P.z$)());break;case"Worker":g=`${kt((0,P.z$)())}-${y}`;break;default:g=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${b}`}class wd{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const b=x=>new Promise((U,J)=>{try{U(f(x))}catch(Te){J(Te)}});b.onAbort=g,this.queue.push(b);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,u.Z)(function*(){var b;if(g.auth.currentUser===f)return;const T=[];try{for(const x of g.queue)yield x(f),x.onAbort&&T.push(x.onAbort)}catch(x){T.reverse();for(const U of T)try{U()}catch(J){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=x)||void 0===b?void 0:b.message})}})()}}class Gs{constructor(f,g,b){this.app=f,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ed(this),this.idTokenSubscription=new Ed(this),this.beforeStateQueue=new wd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ci,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=rn(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var T,x;if(!b._deleted&&(b.persistenceManager=yield vn.create(b,f),!b._deleted)){if(null===(T=b._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(U){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(x=b.currentUser)||void 0===x?void 0:x.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,u.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,u.Z)(function*(){var b;const T=yield g.assertedPersistence.getCurrentUser();let x=T,U=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const J=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Te=null==x?void 0:x._redirectEventId,Se=yield g.tryRedirectSignIn(f);(!J||J===Te)&&(null==Se?void 0:Se.user)&&(x=Se.user,U=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(U)try{yield g.beforeStateQueue.runMiddleware(x)}catch(J){x=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(J))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return Pe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var g=this;return(0,u.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,u.Z)(function*(){var b;try{yield gs(f)}catch(T){if("auth/network-request-failed"!==(null===(b=T)||void 0===b?void 0:b.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Yt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,u.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,u.Z)(function*(){const b=f?(0,P.m9)(f):null;return b&&Pe(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f,g=!1){var b=this;return(0,u.Z)(function*(){if(!b._deleted)return f&&Pe(b.tenantId===f.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(f)),b.queue((0,u.Z)(function*(){yield b.directlySetCurrentUser(f),b.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,u.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(rn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,u.Z)(function*(){const T=yield b.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&rn(f)||g._popupRedirectResolver;Pe(b,g,"argument-error"),g.redirectPersistenceManager=yield vn.create(g,[rn(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,u.Z)(function*(){var b,T;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,u.Z)(function*(){if(f===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,T){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),U=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(U,this,"internal-error"),U.then(()=>x(this.currentUser)),"function"==typeof g?f.addObserver(g,b,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Rl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,u.Z)(function*(){var g;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(b["X-Firebase-Client"]=T),b})()}}function ln(y){return(0,P.m9)(y)}class Ed{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ff(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function pf(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Za{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return lt("not implemented")}_getIdTokenResponse(f){return lt("not implemented")}_linkToIdToken(f,g){return lt("not implemented")}_getReauthenticationResolver(f){return lt("not implemented")}}function gf(y,f){return $u.apply(this,arguments)}function $u(){return($u=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:resetPassword",fn(y,f))})).apply(this,arguments)}function mf(y,f){return za.apply(this,arguments)}function za(){return(za=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Wo(y,f){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:update",fn(y,f))})).apply(this,arguments)}function Dd(){return(Dd=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithPassword",fn(y,f))})).apply(this,arguments)}function Gu(y,f){return Id.apply(this,arguments)}function Id(){return(Id=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:sendOobCode",fn(y,f))})).apply(this,arguments)}function kg(y,f){return qu.apply(this,arguments)}function qu(){return(qu=(0,u.Z)(function*(y,f){return Gu(y,f)})).apply(this,arguments)}function Wa(y,f){return Td.apply(this,arguments)}function Td(){return(Td=(0,u.Z)(function*(y,f){return Gu(y,f)})).apply(this,arguments)}function Zu(y,f){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,u.Z)(function*(y,f){return Gu(y,f)})).apply(this,arguments)}function fo(y,f){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,u.Z)(function*(y,f){return Gu(y,f)})).apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithEmailLink",fn(y,f))})).apply(this,arguments)}function Ad(){return(Ad=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithEmailLink",fn(y,f))})).apply(this,arguments)}class Ai extends Za{constructor(f,g,b,T=null){super("password",b),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new Ai(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Ai(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function Og(y,f){return Dd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ka(y,f){return po.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Kt(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return mf(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function _f(y,f){return Ad.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:Kt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function qi(y,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithIdp",fn(y,f))})).apply(this,arguments)}class Zi extends Za{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Kt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:T}=g,x=ce(g,["providerId","signInMethod"]);if(!b||!T)return null;const U=new Zi(b,T);return U.idToken=x.idToken||void 0,U.accessToken=x.accessToken||void 0,U.secret=x.secret,U.nonce=x.nonce,U.pendingToken=x.pendingToken||null,U}_getIdTokenResponse(f){return qi(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,qi(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,qi(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function $r(y,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:sendVerificationCode",fn(y,f))})).apply(this,arguments)}function Nl(){return(Nl=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithPhoneNumber",fn(y,f))})).apply(this,arguments)}function Qa(){return(Qa=(0,u.Z)(function*(y,f){const g=yield j(y,"POST","/v1/accounts:signInWithPhoneNumber",fn(y,f));if(g.temporaryProof)throw W(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Rg={USER_NOT_FOUND:"user-not-found"};function zi(){return(zi=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithPhoneNumber",fn(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Rg)})).apply(this,arguments)}class Zs extends Za{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Zs({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Zs({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Md(y,f){return Nl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function xd(y,f){return Qa.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function En(y,f){return zi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:T,temporaryProof:x}=f;return b||g||T||x?new Zs({verificationId:g,verificationCode:b,phoneNumber:T,temporaryProof:x}):null}}class zs{constructor(f){var g,b,T,x,U,J;const Te=(0,P.zd)((0,P.pd)(f)),Se=null!==(g=Te.apiKey)&&void 0!==g?g:null,et=null!==(b=Te.oobCode)&&void 0!==b?b:null,ot=function Sn(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Te.mode)&&void 0!==T?T:null);Pe(Se&&et&&ot,"argument-error"),this.apiKey=Se,this.operation=ot,this.code=et,this.continueUrl=null!==(x=Te.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(U=Te.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(J=Te.tenantId)&&void 0!==J?J:null}static parseLink(f){const g=function Od(y){const f=(0,P.zd)((0,P.pd)(y)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,b=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(b?(0,P.zd)((0,P.pd)(b)).link:null)||b||g||f||y}(f);try{return new zs(g)}catch(b){return null}}}let Er=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return Ai._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const T=zs.parseLink(b);return Pe(T,"argument-error"),Ai._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class mi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Wi extends mi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Gr extends Wi{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Pe("providerId"in g&&"signInMethod"in g,"argument-error"),Zi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Pe(f.idToken||f.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Gr.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Gr.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:T,pendingToken:x,nonce:U,providerId:J}=f;if(!b&&!T&&!g&&!x||!J)return null;try{return new Gr(J)._credential({idToken:g,accessToken:b,nonce:U,pendingToken:x})}catch(Te){return null}}}let qr=(()=>{class y extends Wi{constructor(){super("facebook.com")}static credential(g){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Qn=(()=>{class y extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:T}=g;if(!b&&!T)return null;try{return y.credential(b,T)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ko=(()=>{class y extends Wi{constructor(){super("github.com")}static credential(g){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Cr extends Za{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return qi(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,qi(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,qi(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:T,pendingToken:x}=g;return b&&T&&x&&b===T?new Cr(b,x):null}static _create(f,g){return new Cr(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ws extends mi{constructor(f){Pe(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ws.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ws.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Cr.fromJSON(f);return Pe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return Cr._create(b,g)}catch(T){return null}}}let _t=(()=>{class y extends Wi{constructor(){super("twitter.com")}static credential(g,b){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:T}=g;if(!b||!T)return null;try{return y.credential(b,T)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function mo(y,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signUp",fn(y,f))})).apply(this,arguments)}class Dr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,T=!1){return(0,u.Z)(function*(){const x=yield yn._fromIdTokenResponse(f,b,T),U=Xa(b);return new Dr({user:x,providerId:U,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,u.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const T=Xa(b);return new Dr({user:f,providerId:T,_tokenResponse:b,operationType:g})})()}}function Xa(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Fl(){return(Fl=(0,u.Z)(function*(y){var f;const g=ln(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Dr({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield mo(g,{returnSecureToken:!0}),T=yield Dr._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Qo extends P.ZR{constructor(f,g,b,T){var x;super(g.code,g.message),this.operationType=b,this.user=T,Object.setPrototypeOf(this,Qo.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,T){return new Qo(f,g,b,T)}}function Ie(y,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Qo._fromErrorAndOperation(y,x,f,b):x})}function Vt(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function gn(){return(gn=(0,u.Z)(function*(y,f){const g=(0,P.m9)(y);yield Ir(!0,g,f);const{providerUserInfo:b}=yield bt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Vt(b||[]);return g.providerData=g.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Xo(y,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(y,f,g=!1){const b=yield vr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Dr._forOperation(y,"link",b)})).apply(this,arguments)}function Ir(y,f,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,u.Z)(function*(y,f,g){yield gs(f);const T=!1===y?"provider-already-linked":"no-such-provider";Pe(Vt(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function Ll(y,f){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,u.Z)(function*(y,f,g=!1){var b;const{auth:T}=y,x="reauthenticate";try{const U=yield vr(y,Ie(T,x,f,y),g);Pe(U.idToken,T,"internal-error");const J=$n(U.idToken);Pe(J,T,"internal-error");const{sub:Te}=J;return Pe(y.uid===Te,T,"user-mismatch"),Dr._forOperation(y,x,U)}catch(U){throw"auth/user-not-found"===(null===(b=U)||void 0===b?void 0:b.code)&&Kt(T,"user-mismatch"),U}})).apply(this,arguments)}function Rd(y,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,u.Z)(function*(y,f,g=!1){const b="signIn",T=yield Ie(y,b,f),x=yield Dr._fromIdTokenResponse(y,b,T);return g||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function _o(y,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(y,f){return Rd(ln(y),f)})).apply(this,arguments)}function xi(y,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,u.Z)(function*(y,f){const g=(0,P.m9)(y);return yield Ir(!1,g,f.providerId),Xo(g,f)})).apply(this,arguments)}function Ki(y,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,u.Z)(function*(y,f){return Ll((0,P.m9)(y),f)})).apply(this,arguments)}function Pd(y,f){return ea.apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(y,f){return j(y,"POST","/v1/accounts:signInWithCustomToken",fn(y,f))})).apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(y,f){const g=ln(y),b=yield Pd(g,{token:f,returnSecureToken:!0}),T=yield Dr._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class ta{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?yo._fromServerResponse(f,g):Kt(f,"internal-error")}}class yo extends ta{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new yo(g)}}function na(y,f,g){var b;Pe((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),Pe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Pe(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Pe(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Bl(){return(Bl=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&na(b,T,g),yield Wa(b,T)})).apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(y,f,g){yield gf((0,P.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function tl(){return(tl=(0,u.Z)(function*(y,f){yield Wo((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function jl(y,f){return nl.apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(y,f){const g=(0,P.m9)(y),b=yield gf(g,{oobCode:f}),T=b.requestType;switch(Pe(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(b.mfaInfo,g,"internal-error");default:Pe(b.email,g,"internal-error")}let x=null;return b.mfaInfo&&(x=ta._fromServerResponse(ln(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Nd(){return(Nd=(0,u.Z)(function*(y,f){const{data:g}=yield jl((0,P.m9)(y),f);return g.email})).apply(this,arguments)}function Xn(){return(Xn=(0,u.Z)(function*(y,f,g){const b=ln(y),T=yield mo(b,{returnSecureToken:!0,email:f,password:g}),x=yield Dr._fromIdTokenResponse(b,"signIn",T);return yield b._updateCurrentUser(x.user),x})).apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};Pe(g.handleCodeInApp,b,"argument-error"),g&&na(b,T,g),yield Zu(b,T)})).apply(this,arguments)}function wf(){return(wf=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y),T=Er.credentialWithLink(f,g||Hn());return Pe(T._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),_o(b,T)})).apply(this,arguments)}function Fd(y,f){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:createAuthUri",fn(y,f))})).apply(this,arguments)}function Ys(){return(Ys=(0,u.Z)(function*(y,f){const b={identifier:f,continueUri:Tn()?Hn():"http://localhost"},{signinMethods:T}=yield Fd((0,P.m9)(y),b);return T||[]})).apply(this,arguments)}function Gl(){return(Gl=(0,u.Z)(function*(y,f){const g=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&na(g.auth,T,f);const{email:x}=yield kg(g.auth,T);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ld(){return(Ld=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&na(b.auth,x,g);const{email:U}=yield fo(b.auth,x);U!==y.email&&(yield y.reload())})).apply(this,arguments)}function bs(y,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,u.Z)(function*(y,f){return zt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vd(){return(Vd=(0,u.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,P.m9)(y),x={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},U=yield vr(b,bs(b.auth,x));b.displayName=U.displayName||null,b.photoURL=U.photoUrl||null;const J=b.providerData.find(({providerId:Te})=>"password"===Te);J&&(J.displayName=b.displayName,J.photoURL=b.photoURL),yield b._updateTokensIfNecessary(U)})).apply(this,arguments)}function Xu(y,f,g){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,u.Z)(function*(y,f,g){const{auth:b}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(x.email=f),g&&(x.password=g);const U=yield vr(y,mf(b,x));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class il{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class Zl extends il{constructor(f,g,b,T){super(f,g,b),this.username=T}}class un extends il{constructor(f,g){super(f,"facebook.com",g)}}class Jn extends Zl{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Tr extends il{constructor(f,g){super(f,"google.com",g)}}class jd extends Zl{constructor(f,g,b){super(f,"twitter.com",g,b)}}function Hd(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function If(y){var f,g;if(!y)return null;const{providerId:b}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const U=null===(g=null===(f=$n(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(U)return new il(x,"anonymous"!==U&&"custom"!==U?U:null)}if(!b)return null;switch(b){case"facebook.com":return new un(x,T);case"github.com":return new Jn(x,T);case"google.com":return new Tr(x,T);case"twitter.com":return new jd(x,T,y.screenName||null);case"custom":case"anonymous":return new il(x,null);default:return new il(x,b,T)}}(g)}class ws{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ws("enroll",f)}static _fromMfaPendingCredential(f){return new ws("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ws._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return ws._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Xs{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=ln(f),T=g.customData._serverResponse,x=(T.mfaInfo||[]).map(J=>ta._fromServerResponse(b,J));Pe(T.mfaPendingCredential,b,"internal-error");const U=ws._fromMfaPendingCredential(T.mfaPendingCredential);return new Xs(U,x,function(){var J=(0,u.Z)(function*(Te){const Se=yield Te._process(b,U);delete T.mfaInfo,delete T.mfaPendingCredential;const et=Object.assign(Object.assign({},T),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const ot=yield Dr._fromIdTokenResponse(b,g.operationType,et);return yield b._updateCurrentUser(ot.user),ot;case"reauthenticate":return Pe(g.user,b,"internal-error"),Dr._forOperation(g.user,g.operationType,et);default:Kt(b,"internal-error")}});return function(Te){return J.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,u.Z)(function*(){return g.signInResolver(f)})()}}function ia(y,f){return zt(y,"POST","/v2/accounts/mfaEnrollment:start",fn(y,f))}class ec{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>ta._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new ec(f)}getSession(){var f=this;return(0,u.Z)(function*(){return ws._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,u.Z)(function*(){const T=f,x=yield b.getSession(),U=yield vr(b.user,T._process(b.user.auth,x,g));return yield b.user._updateTokensIfNecessary(U),b.user.reload()})()}unenroll(f){var g=this;return(0,u.Z)(function*(){var b;const T="string"==typeof f?f:f.uid,x=yield g.user.getIdToken(),U=yield vr(g.user,function Or(y,f){return zt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(y,f))}(g.user.auth,{idToken:x,mfaEnrollmentId:T}));g.enrolledFactors=g.enrolledFactors.filter(({uid:J})=>J!==T),yield g.user._updateTokensIfNecessary(U);try{yield g.user.reload()}catch(J){if("auth/user-token-expired"!==(null===(b=J)||void 0===b?void 0:b.code))throw J}})()}}const vo=new WeakMap,bo="__sak";class tc{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(bo,"1"),this.storage.removeItem(bo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const _i=(()=>{class y extends tc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ll(){const y=(0,P.z$)();return _s(y)||Ln(y)}()&&function gi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Hr(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const T=this.storage.getItem(b),x=this.localCache[b];T!==x&&g(b,x,T)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((J,Te,Se)=>{this.notifyListeners(J,Se)});const T=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(T);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!b)return}const x=()=>{const J=this.storage.getItem(T);!b&&this.localCache[T]===J||this.notifyListeners(T,J)},U=this.storage.getItem(T);!function qa(){return(0,P.w1)()&&10===document.documentMode}()||U===g.newValue||g.newValue===g.oldValue?x():setTimeout(x,10)}notifyListeners(g,b){this.localCache[g]=b;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var T=()=>super._set,x=this;return(0,u.Z)(function*(){yield T().call(x,g,b),x.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,T=this;return(0,u.Z)(function*(){const x=yield b().call(T,g);return T.localCache[g]=JSON.stringify(x),x})()}_remove(g){var b=()=>super._remove,T=this;return(0,u.Z)(function*(){yield b().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),yi=(()=>{class y extends tc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let nc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(x=>x.isListeningto(g));if(b)return b;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,u.Z)(function*(){const T=g,{eventId:x,eventType:U,data:J}=T.data,Te=b.handlersMap[U];if(!(null==Te?void 0:Te.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:U});const Se=Array.from(Te).map(function(){var ot=(0,u.Z)(function*(Bt){return Bt(T.origin,J)});return function(Bt){return ot.apply(this,arguments)}}()),et=yield function Es(y){return Promise.all(y.map(function(){var f=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(Se);T.ports[0].postMessage({status:"done",eventId:x,eventType:U,response:et})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Xi(y="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return y+g}class zl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var T=this;return(0,u.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let U,J;return new Promise((Te,Se)=>{const et=Xi("",20);x.port1.start();const ot=setTimeout(()=>{Se(new Error("unsupported_event"))},b);J={messageChannel:x,onMessage(Bt){const pr=Bt;if(pr.data.eventId===et)switch(pr.data.status){case"ack":clearTimeout(ot),U=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Te(pr.data.response);break;default:clearTimeout(ot),clearTimeout(U),Se(new Error("invalid_response"))}}},T.handlers.add(J),x.port1.addEventListener("message",J.onMessage),T.target.postMessage({eventType:f,eventId:et,data:g},[x.port2])}).finally(()=>{J&&T.removeMessageHandler(J)})})()}}function $t(){return window}function Ji(){return void 0!==$t().WorkerGlobalScope&&"function"==typeof $t().importScripts}function es(){return(es=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const ul="firebaseLocalStorageDb",Wl="firebaseLocalStorage",zd="fbase_key";class Kl{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function cl(y,f){return y.transaction([Wl],f?"readwrite":"readonly").objectStore(Wl)}function oa(){const y=indexedDB.open(ul,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Wl,{keyPath:zd})}catch(T){g(T)}}),y.addEventListener("success",(0,u.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Wl)?f(b):(b.close(),yield function Tf(){const y=indexedDB.deleteDatabase(ul);return new Kl(y).toPromise()}(),f(yield oa()))}))})}function Sf(y,f,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,u.Z)(function*(y,f,g){const b=cl(y,!0).put({[zd]:f,value:g});return new Kl(b).toPromise()})).apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(y,f){const g=cl(y,!1).get(f),b=yield new Kl(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function aa(y,f){const g=cl(y,!0).delete(f);return new Kl(g).toPromise()}const mn=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield oa()),g.db})()}_withRetries(g){var b=this;return(0,u.Z)(function*(){let T=0;for(;;)try{const x=yield b._openDb();return yield g(x)}catch(x){if(T++>3)throw x;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return Ji()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=nc._getInstance(function Cs(){return Ji()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(T,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(T,x){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var b,T;if(g.activeServiceWorker=yield function sa(){return es.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new zl(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);!x||(null===(b=x[0])||void 0===b?void 0:b.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function to(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield oa();return yield Sf(g,bo,"1"),yield aa(g,bo),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var T=this;return(0,u.Z)(function*(){return T._withPendingWrite((0,u.Z)(function*(){return yield T._withRetries(x=>Sf(x,g,b)),T.localCache[g]=b,T.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,u.Z)(function*(){const T=yield b._withRetries(x=>function Ng(y,f){return On.apply(this,arguments)}(x,g));return b.localCache[g]=T,T})()}_remove(g){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(T=>aa(T,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const b=yield g._withRetries(U=>{const J=cl(U,!1).getAll();return new Kl(J).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:U,value:J}of b)x.add(U),JSON.stringify(g.localCache[U])!==JSON.stringify(J)&&(g.notifyListeners(U,J),T.push(U));for(const U of Object.keys(g.localCache))g.localCache[U]&&!x.has(U)&&(g.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(g,b){this.localCache[g]=b;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function bn(y,f){return zt(y,"POST","/v2/accounts/mfaSignIn:start",fn(y,f))}function ua(){return(ua=(0,u.Z)(function*(y){return(yield zt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oc(y){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=T=>{const x=Rn("internal-error");x.customData=T,g(x)},b.type="text/javascript",b.charset="UTF-8",function sc(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function ac(y){return`__${y}${Math.floor(1e6*Math.random())}`}const no=1e12;class ei{constructor(f){this.auth=f,this.counter=no,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Kd(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||no;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||no))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,u.Z)(function*(){var b;return null===(b=g._widgets.get(f||no))||void 0===b||b.execute(),""})()}}class Kd{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;Pe(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Co(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uc=ac("rcb"),cc=new at(3e4,6e4);class Qd{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=$t().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return Pe(function dc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve($t().grecaptcha):new Promise((b,T)=>{const x=$t().setTimeout(()=>{T(Rn(f,"network-request-failed"))},cc.get());$t()[uc]=()=>{$t().clearTimeout(x),delete $t()[uc];const J=$t().grecaptcha;if(!J)return void T(Rn(f,"internal-error"));const Te=J.render;J.render=(Se,et)=>{const ot=Te(Se,et);return this.counter++,ot},this.hostLanguage=g,b(J)},oc(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:uc,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),T(Rn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=$t().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yl{load(f){return(0,u.Z)(function*(){return new ei(f)})()}clearedOneInstance(){}}const Af="recaptcha",Mf={theme:"light",type:"image"};class Xd{constructor(f,g=Object.assign({},Mf),b){this.parameters=g,this.type=Af,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ln(b),this.isInvisible="invisible"===this.parameters.size,Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;Pe(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yl:new Qd,this.validateStartingState()}verify(){var f=this;return(0,u.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(x=>{const U=J=>{!J||(f.tokenChangeListeners.delete(U),x(J))};f.tokenChangeListeners.add(U),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=$t()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,u.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,u.Z)(function*(){Pe(Tn()&&!Ji(),f.auth,"internal-error"),yield function Do(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ic(y){return ua.apply(this,arguments)}(f.auth);Pe(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ca{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Zs._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Ds(){return(Ds=(0,u.Z)(function*(y,f,g){const b=ln(y),T=yield ki(b,f,(0,P.m9)(g));return new ca(T,x=>_o(b,x))})).apply(this,arguments)}function dl(){return(dl=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y);yield Ir(!1,b,"phone");const T=yield ki(b.auth,f,(0,P.m9)(g));return new ca(T,x=>xi(b,x))})).apply(this,arguments)}function hc(){return(hc=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y),T=yield ki(b.auth,f,(0,P.m9)(g));return new ca(T,x=>Ki(b,x))})).apply(this,arguments)}function ki(y,f,g){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,u.Z)(function*(y,f,g){var b;const T=yield g.verify();try{let x;if(Pe("string"==typeof T,y,"argument-error"),Pe(g.type===Af,y,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const U=x.session;if("phoneNumber"in x)return Pe("enroll"===U.type,y,"internal-error"),(yield ia(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Pe("signin"===U.type,y,"internal-error");const J=(null===(b=x.multiFactorHint)||void 0===b?void 0:b.uid)||x.multiFactorUid;return Pe(J,y,"missing-multi-factor-info"),(yield bn(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield $r(y,{phoneNumber:x.phoneNumber,recaptchaToken:T});return U}}finally{g._reset()}})).apply(this,arguments)}function da(){return(da=(0,u.Z)(function*(y,f){yield Xo((0,P.m9)(y),f)})).apply(this,arguments)}let hl=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=ln(g)}verifyPhoneNumber(g,b){return ki(this.auth,g,(0,P.m9)(b))}static credential(g,b){return Zs._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:T}=g;return b&&T?Zs._fromTokenResponse(b,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Cn(y,f){return f?rn(f):(Pe(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class fc extends Za{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return qi(f,this._buildIdpRequest())}_linkToIdToken(f,g){return qi(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return qi(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function D(y){return Rd(y.auth,new fc(y),y.bypassAuthState)}function S(y){const{auth:f,user:g}=y;return Pe(g,f,"internal-error"),Ll(g,new fc(y),y.bypassAuthState)}function k(y){return L.apply(this,arguments)}function L(){return(L=(0,u.Z)(function*(y){const{auth:f,user:g}=y;return Pe(g,f,"internal-error"),Xo(g,new fc(y),y.bypassAuthState)})).apply(this,arguments)}class Y{constructor(f,g,b,T,x=!1){this.auth=f,this.resolver=b,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,u.Z)(function*(b,T){f.pendingPromise={resolve:b,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(b,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:T,postBody:x,tenantId:U,error:J,type:Te}=f;if(J)return void g.reject(J);const Se={auth:g.auth,requestUri:b,sessionId:T,tenantId:U||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Te)(Se))}catch(et){g.reject(et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return D;case"linkViaPopup":case"linkViaRedirect":return k;case"reauthViaPopup":case"reauthViaRedirect":return S;default:Kt(this.auth,"internal-error")}}resolve(f){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oe=new at(2e3,1e4);function Ue(){return(Ue=(0,u.Z)(function*(y,f,g){const b=ln(y);di(y,f,mi);const T=Cn(b,g);return new kn(b,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function dt(){return(dt=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y);di(b.auth,f,mi);const T=Cn(b.auth,g);return new kn(b.auth,"reauthViaPopup",f,T,b).executeNotNull()})).apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y);di(b.auth,f,mi);const T=Cn(b.auth,g);return new kn(b.auth,"linkViaPopup",f,T,b).executeNotNull()})).apply(this,arguments)}let kn=(()=>{class y extends Y{constructor(g,b,T,x,U){super(g,b,x,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const b=yield g.execute();return Pe(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,u.Z)(function*(){Pn(1===g.filter.length,"Popup operations only handle one event");const b=Xi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Rn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,T;this.pollId=(null===(T=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,oe.get())};g()}}return y.currentPopupAction=null,y})();const Ri=new Map;class ha extends Y{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,u.Z)(function*(){let b=Ri.get(g.auth._key());if(!b){try{const x=(yield function ro(y,f){return Is.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(x)}catch(T){b=()=>Promise.reject(T)}Ri.set(g.auth._key(),b)}return g.bypassAuthState||Ri.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const T=yield b.auth._redirectUserForId(f.eventId);if(T)return b.user=T,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Is(){return(Is=(0,u.Z)(function*(y,f){const g=xf(f),b=eu(y);if(!(yield b._isAvailable()))return!1;const T="true"===(yield b._get(g));return yield b._remove(g),T})).apply(this,arguments)}function Pi(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,u.Z)(function*(y,f){return eu(y)._set(xf(f),"true")})).apply(this,arguments)}function ns(y,f){Ri.set(y._key(),f)}function eu(y){return rn(y._redirectPersistence)}function xf(y){return pi("pendingRedirect",y.config.apiKey,y.name)}function Of(){return(Of=(0,u.Z)(function*(y,f,g){const b=ln(y);di(y,f,mi);const T=Cn(b,g);return yield Pi(T,b),T._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Ts(){return(Ts=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y);di(b.auth,f,mi);const T=Cn(b.auth,g);yield Pi(T,b.auth);const x=yield Rf(b);return T._openRedirect(b.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function Uy(){return(Uy=(0,u.Z)(function*(y,f,g){const b=(0,P.m9)(y);di(b.auth,f,mi);const T=Cn(b.auth,g);yield Ir(!1,b,f.providerId),yield Pi(T,b.auth);const x=yield Rf(b);return T._openRedirect(b.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function th(){return(th=(0,u.Z)(function*(y,f){return yield ln(y)._initializationPromise,gc(y,f,!1)})).apply(this,arguments)}function gc(y,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(y,f,g=!1){const b=ln(y),T=Cn(b,f),U=yield new ha(b,T,g).execute();return U&&!g&&(delete U.user._redirectEventId,yield b._persistUserIfCurrent(U.user),yield b._setRedirectUser(null,f)),U})).apply(this,arguments)}function Rf(y){return _c.apply(this,arguments)}function _c(){return(_c=(0,u.Z)(function*(y){const f=Xi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Pf{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function By(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nf(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!Nf(f)){const T=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Rn(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bg(f))}saveEventToCache(f){this.cachedEventUids.add(Bg(f)),this.lastProcessedEventTime=Date.now()}}function Bg(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Nf({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function fa(y){return pa.apply(this,arguments)}function pa(){return(pa=(0,u.Z)(function*(y,f={}){return zt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const jy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hy=/^https?/;function Ff(){return(Ff=(0,u.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield fa(y);for(const g of f)try{if(jg(g))return}catch(b){}Kt(y,"unauthorized-domain")})).apply(this,arguments)}function jg(y){const f=Hn(),{protocol:g,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&U.hostname===b}if(!Hy.test(g))return!1;if(jy.test(y))return b===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(b)}const jw=new at(3e4,6e4);function nh(){const y=$t().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ga=null;function Gy(y){return ga=ga||function $y(y){return new Promise((f,g)=>{var b,T,x;function U(){nh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{nh(),g(Rn(y,"network-request-failed"))},timeout:jw.get()})}if(null===(T=null===(b=$t().gapi)||void 0===b?void 0:b.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(x=$t().gapi)||void 0===x?void 0:x.load)){const J=ac("iframefcb");return $t()[J]=()=>{gapi.load?U():g(Rn(y,"network-request-failed"))},oc(`https://apis.google.com/js/api.js?onload=${J}`).catch(Te=>g(Te))}U()}}).catch(f=>{throw ga=null,f})}(y),ga}const Lf=new at(5e3,15e3),yc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rs(y){const f=y.config;Pe(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?vt(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},T=Hg.get(y.config.apiHost);T&&(b.eid=T);const x=y._getFrameworks();return x.length&&(b.fw=x.join(",")),`${g}?${(0,P.xO)(b).slice(1)}`}function bc(){return bc=(0,u.Z)(function*(y){const f=yield Gy(y),g=$t().gapi;return Pe(g,y,"internal-error"),f.open({where:document.body,url:rs(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yc,dontclear:!0},b=>new Promise(function(){var T=(0,u.Z)(function*(x,U){yield b.restyle({setHideOnLeave:!1});const J=Rn(y,"network-request-failed"),Te=$t().setTimeout(()=>{U(J)},Lf.get());function Se(){$t().clearTimeout(Te),x(b)}b.ping(Se).then(Se,()=>{U(J)})});return function(x,U){return T.apply(this,arguments)}}()))}),bc.apply(this,arguments)}const $g={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ih{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ec(y,f,g,b,T,x){Pe(y.config.authDomain,y,"auth-domain-config-required"),Pe(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:ae.SDK_VERSION,eventId:T};if(f instanceof mi){f.setDefaultLanguage(y.languageCode),U.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(U.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Te,Se]of Object.entries(x||{}))U[Te]=Se}if(f instanceof Wi){const Te=f.getScopes().filter(Se=>""!==Se);Te.length>0&&(U.scopes=Te.join(","))}y.tenantId&&(U.tid=y.tenantId);const J=U;for(const Te of Object.keys(J))void 0===J[Te]&&delete J[Te];return`${function Cc({config:y}){return y.emulator?vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(J).slice(1)}`}const Uf="webStorageSupport";class tu extends class Bf{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return lt("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new tu(f)}_finalizeEnroll(f,g,b){return function Qi(y,f){return zt(y,"POST","/v2/accounts/mfaEnrollment:finalize",fn(y,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function rc(y,f){return zt(y,"POST","/v2/accounts/mfaSignIn:finalize",fn(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zy=(()=>{class y{constructor(){}static assertion(g){return tu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var nu="@firebase/auth";class sr{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var T;f((null===(T=b)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ma(){return window}function sh(){return(sh=(0,u.Z)(function*(y,f,g){var b;const{BuildInfo:T}=ma();Pn(f.sessionId,"AuthEvent did not contain a session ID");const x=yield Yg(f.sessionId),U={};return Ln()?U.ibi=T.packageName:Fn()?U.apn=T.packageName:Kt(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=x,Ec(y,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,U)})).apply(this,arguments)}function Kg(){return(Kg=(0,u.Z)(function*(y){const{BuildInfo:f}=ma(),g={};Ln()?g.iosBundleId=f.packageName:Fn()?g.androidPackageName=f.packageName:Kt(y,"operation-not-supported-in-this-environment"),yield fa(y,g)})).apply(this,arguments)}function ru(){return(ru=(0,u.Z)(function*(y,f,g){const{cordova:b}=ma();let T=()=>{};try{yield new Promise((x,U)=>{let J=null;function Te(){var ot;x();const Bt=null===(ot=b.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Bt&&Bt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){J||(J=window.setTimeout(()=>{U(Rn(y,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}f.addPassiveListener(Te),document.addEventListener("resume",Se,!1),Fn()&&document.addEventListener("visibilitychange",et,!1),T=()=>{f.removePassiveListener(Te),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",et,!1),J&&window.clearTimeout(J)}})}finally{T()}})).apply(this,arguments)}function Yg(y){return $f.apply(this,arguments)}function $f(){return($f=(0,u.Z)(function*(y){const f=Yy(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Yy(y){if(Pn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}!function Wy(y){(0,ae._registerComponent)(new yt.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:x,authDomain:U}=b.options;return((J,Te)=>{Pe(x&&!x.includes(":"),"invalid-api-key",{appName:J.name}),Pe(!(null==U?void 0:U.includes(":")),"argument-error",{appName:J.name});const Se={apiKey:x,authDomain:U,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rl(y)},et=new Gs(J,Te,Se);return function uo(y,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(rn);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(et,g),et})(b,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new yt.wA("auth-internal",f=>{const g=ln(f.getProvider("auth").getImmediate());return new sr(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(nu,"0.20.5",function zg(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(nu,"0.20.5","esm2017")}("Browser");class pt extends Pf{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,u.Z)(function*(){yield f.initPromise})()}}function oh(y){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,u.Z)(function*(y){const f=yield ge()._get(vi(y));return f&&(yield ge()._remove(vi(y))),f})).apply(this,arguments)}function Gf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function ge(){return rn(_i)}function vi(y){return pi("authEvent",y.config.apiKey,y.name)}function pl(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Bn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rn("no-auth-event")}}function Dc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Xg(y=(0,P.z$)()){return!("file:"!==Dc()&&"ionic:"!==Dc()&&"capacitor:"!==Dc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function tm(){try{const y=self.localStorage,f=Xi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function nv(y=(0,P.z$)()){return function em(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function tv(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return Ic()&&(0,P.hl)()}return!1}function Ic(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function zf(){return(function ev(){return"http:"===Dc()||"https:"===Dc()}()||(0,P.ru)()||Xg())&&!function Jg(){return(0,P.b$)()||(0,P.UG)()}()&&tm()&&!Ic()}function nm(){return Xg()&&"undefined"!=typeof document}function So(){return(So=(0,u.Z)(function*(){return!!nm()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Zr={LOCAL:"local",NONE:"none",SESSION:"session"},_a=Pe,Sr="persistence";function is(y){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,u.Z)(function*(y){yield y._initializationPromise;const f=rm(),g=pi(Sr,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function rm(){var y;try{return(null===(y=function Ss(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const im=Pe;class ri{constructor(){this.browserResolver=rn(class qg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yi,this._completeRedirectFn=gc,this._overrideRedirectResult=ns}_openPopup(f,g,b,T){var x=this;return(0,u.Z)(function*(){var U;Pn(null===(U=x.eventManagers[f._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const J=Ec(f,g,b,Hn(),T);return function Gg(y,f,g,b=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-b)/2,0).toString();let J="";const Te=Object.assign(Object.assign({},$g),{width:b.toString(),height:T.toString(),top:x,left:U}),Se=(0,P.z$)().toLowerCase();g&&(J=Ga(Se)?"_blank":g),$a(Se)&&(f=f||"http://localhost",Te.scrollbars="yes");const et=Object.entries(Te).reduce((Bt,[pr,jn])=>`${Bt}${pr}=${jn},`,"");if(function bd(y=(0,P.z$)()){var f;return Ln(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Se)&&"_self"!==J)return function wc(y,f){const g=document.createElement("a");g.href=y,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",J),new ih(null);const ot=window.open(f||"",J,et);Pe(ot,y,"popup-blocked");try{ot.focus()}catch(Bt){}return new ih(ot)}(f,J,Xi())})()}_openRedirect(f,g,b,T){var x=this;return(0,u.Z)(function*(){return yield x._originValidation(f),function eo(y){$t().location.href=y}(Ec(f,g,b,Hn(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:x}=this.eventManagers[g];return T?Promise.resolve(T):(Pn(x,"If manager is not set, promise should be"),x)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,u.Z)(function*(){const b=yield function vc(y){return bc.apply(this,arguments)}(f),T=new Pf(f);return b.register("authEvent",x=>(Pe(null==x?void 0:x.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=b,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Uf,{type:Uf},T=>{var x;const U=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Uf];void 0!==U&&g(!!U),Kt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Bw(y){return Ff.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Hr()||_s()||Ln()}}),this.cordovaResolver=rn(class Qy{constructor(){this._redirectPersistence=yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gc,this._overrideRedirectResult=ns}_initialize(f){var g=this;return(0,u.Z)(function*(){const b=f._key();let T=g.eventManagers.get(b);return T||(T=new pt(f),g.eventManagers.set(b,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Kt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,T){var x=this;return(0,u.Z)(function*(){!function ni(y){var f,g,b,T,x,U,J,Te,Se,et;const ot=ma();Pe("function"==typeof(null===(f=null==ot?void 0:ot.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pe(void 0!==(null===(g=null==ot?void 0:ot.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pe("function"==typeof(null===(x=null===(T=null===(b=null==ot?void 0:ot.cordova)||void 0===b?void 0:b.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(Te=null===(J=null===(U=null==ot?void 0:ot.cordova)||void 0===U?void 0:U.plugins)||void 0===J?void 0:J.browsertab)||void 0===Te?void 0:Te.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(et=null===(Se=null==ot?void 0:ot.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===et?void 0:et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const U=yield x._initialize(f);yield U.initialized(),U.resetRedirect(),function To(){Ri.clear()}(),yield x._originValidation(f);const J=function iu(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Gf(),postBody:null,tenantId:y.tenantId,error:Rn(y,"no-auth-event")}}(f,b,T);yield function kr(y,f){return ge()._set(vi(y),f)}(f,J);const Te=yield function Ky(y,f,g){return sh.apply(this,arguments)}(f,J,g),Se=yield function fI(y){const{cordova:f}=ma();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let T=null;b?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function pn(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Te);return function zw(y,f,g){return ru.apply(this,arguments)}(f,U,Se)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Zw(y){return Kg.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:T,BuildInfo:x}=ma(),U=setTimeout((0,u.Z)(function*(){yield oh(f),g.onEvent(Bn())}),500),J=function(){var et=(0,u.Z)(function*(ot){clearTimeout(U);const Bt=yield oh(f);let pr=null;Bt&&(null==ot?void 0:ot.url)&&(pr=function Un(y,f){var g,b;const T=function su(y){const f=pl(y),g=f.link?decodeURIComponent(f.link):void 0,b=pl(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return pl(T).link||T||b||g||y}(f);if(T.includes("/__/auth/callback")){const x=pl(T),U=x.firebaseError?function Dt(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(x.firebaseError)):null,J=null===(b=null===(g=null==U?void 0:U.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],Te=J?Rn(J):null;return Te?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Te,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Bt,ot.url)),g.onEvent(pr||Bn())});return function(Bt){return et.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,J);const Te=T,Se=`${x.packageName.toLowerCase()}://`;ma().handleOpenURL=function(){var et=(0,u.Z)(function*(ot){if(ot.toLowerCase().startsWith(Se)&&J({url:ot}),"function"==typeof Te)try{Te(ot)}catch(Bt){console.error(Bt)}});return function(ot){return et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=yi,this._completeRedirectFn=gc,this._overrideRedirectResult=ns}_initialize(f){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,T){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,g,b,T)})()}_openRedirect(f,g,b,T){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,g,b,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return nm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return im(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,u.Z)(function*(){if(f.underlyingResolver)return;const g=yield function ou(){return So.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ah(y){return y.unwrap()}function Sc(y){return uh(y)}function uh(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return hl.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=Qn;break;case"facebook.com":b=qr;break;case"github.com":b=Ko;break;case"twitter.com":b=_t;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:U,pendingToken:J,nonce:Te}=f;return x||U||T||J?J?g.startsWith("saml.")?Cr._create(g,J):Zi._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:T,accessToken:x}):new Gr(g).credential({idToken:T,accessToken:x,rawNonce:Te}):null}return y instanceof P.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function or(y,f){return f.catch(g=>{throw g instanceof P.ZR&&function As(y,f){var g,b;const T=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=f)||void 0===b?void 0:b.code))f.resolver=new sm(y,function Ju(y,f){var g;const b=(0,P.m9)(y),T=f;return Pe(f.customData.operationType,b,"argument-error"),Pe(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),Xs._fromError(b,T)}(y,f));else if(T){const x=uh(f),U=f;x&&(U.credential=x,U.tenantId=T.tenantId||void 0,U.email=T.email||void 0,U.phoneNumber=T.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Sc(g),additionalUserInfo:Hd(g),user:Ao.getOrCreate(T)}})}function ya(y,f){return va.apply(this,arguments)}function va(){return(va=(0,u.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>or(y,g.confirm(b))}})).apply(this,arguments)}class sm{constructor(f,g){this.resolver=g,this.auth=function lh(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return or(ah(this.auth),this.resolver.resolveSignIn(f))}}class Ao{constructor(f){this._delegate=f,this.multiFactor=function qd(y){const f=(0,P.m9)(y);return vo.has(f)||vo.set(f,ec._fromUser(f)),vo.get(f)}(f)}static getOrCreate(f){return Ao.USER_MAP.has(f)||Ao.USER_MAP.set(f,new Ao(f)),Ao.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,u.Z)(function*(){return or(g.auth,xi(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,u.Z)(function*(){return ya(b.auth,function Ql(y,f,g){return dl.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,u.Z)(function*(){return or(g.auth,function Mt(y,f,g){return ht.apply(this,arguments)}(g._delegate,f,ri))})()}linkWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield is(ln(g.auth)),function Vg(y,f,g){return function Uw(y,f,g){return Uy.apply(this,arguments)}(y,f,g)}(g._delegate,f,ri)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,u.Z)(function*(){return or(g.auth,Ki(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return ya(this.auth,function ts(y,f,g){return hc.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return or(this.auth,function ct(y,f,g){return dt.apply(this,arguments)}(this._delegate,f,ri))}reauthenticateWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield is(ln(g.auth)),function eh(y,f,g){return function fl(y,f,g){return Ts.apply(this,arguments)}(y,f,g)}(g._delegate,f,ri)})()}sendEmailVerification(f){return function $l(y,f){return Gl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,u.Z)(function*(){return yield function kd(y,f){return gn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function ql(y,f){return Xu((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Ud(y,f){return Xu((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Jl(y,f){return da.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Df(y,f){return Vd.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Cf(y,f,g){return Ld.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ao.USER_MAP=new WeakMap;const ml=Pe;let om=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;ml(T,"invalid-api-key",{appName:g.name}),ml(T,"invalid-api-key",{appName:g.name});const x="undefined"!=typeof window?ri:void 0;this._delegate=b.initialize({options:{persistence:rv(T,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(hn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ao.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function Mg(y,f,g){const b=ln(y);Pe(b._canInitEmulator,b,"emulator-config-failed"),Pe(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),x=ff(f),{host:U,port:J}=function Si(y){const f=ff(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(b);if(T){const x=T[1];return{host:x,port:pf(b.substr(x.length+1))}}{const[x,U]=b.split(":");return{host:x,port:pf(U)}}}(f);b.config.emulator={url:`${x}//${U}${null===J?"":`:${J}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:U,port:J,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function xg(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function vf(y,f){return tl.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return jl(this._delegate,g)}confirmPasswordReset(g,b){return function Ku(y,f,g){return ra.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var T=this;return(0,u.Z)(function*(){return or(T._delegate,function Pg(y,f,g){return Xn.apply(this,arguments)}(T._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Qu(y,f){return Ys.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Yu(y,f){const g=zs.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){ml(zf(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function kf(y,f){return th.apply(this,arguments)}(g._delegate,ri);return b?or(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Zf(y,f){ln(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,T){const{next:x,error:U,complete:J}=am(g,b,T);return this._delegate.onAuthStateChanged(x,U,J)}onIdTokenChanged(g,b,T){const{next:x,error:U,complete:J}=am(g,b,T);return this._delegate.onIdTokenChanged(x,U,J)}sendSignInLinkToEmail(g,b){return function An(y,f,g){return rl.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function el(y,f,g){return Bl.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,u.Z)(function*(){let T;switch(function Ww(y,f){_a(Object.values(Zr).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?_a(f!==Zr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?_a(f===Zr.NONE,y,"unsupported-persistence-type"):Ic()?_a(f===Zr.NONE||f===Zr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):_a(f===Zr.NONE||tm(),y,"unsupported-persistence-type")}(b._delegate,g),g){case Zr.SESSION:T=yi;break;case Zr.LOCAL:T=(yield rn(mn)._isAvailable())?mn:_i;break;case Zr.NONE:T=Xt;break;default:return Kt("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return or(this._delegate,function Wu(y){return Fl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return or(this._delegate,_o(this._delegate,g))}signInWithCustomToken(g){return or(this._delegate,function yf(y,f){return Ja.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return or(this._delegate,function dr(y,f,g){return _o((0,P.m9)(y),Er.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return or(this._delegate,function bf(y,f,g){return wf.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return ya(this._delegate,function ti(y,f,g){return Ds.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,u.Z)(function*(){return ml(zf(),b._delegate,"operation-not-supported-in-this-environment"),or(b._delegate,function Ee(y,f,g){return Ue.apply(this,arguments)}(b._delegate,g,ri))})()}signInWithRedirect(g){var b=this;return(0,u.Z)(function*(){return ml(zf(),b._delegate,"operation-not-supported-in-this-environment"),yield is(b._delegate),function pc(y,f,g){return function Jd(y,f,g){return Of.apply(this,arguments)}(y,f,g)}(b._delegate,g,ri)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Hl(y,f){return Nd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Zr,y})();function am(y,f,g){let b=y;"function"!=typeof y&&({next:b,error:f,complete:g}=y);const T=b;return{next:U=>T(U&&Ao.getOrCreate(U)),error:f,complete:g}}function rv(y,f){const g=function Wf(y,f){const g=rm();if(!g)return[];const b=pi(Sr,y,f);switch(g.getItem(b)){case Zr.NONE:return[Xt];case Zr.LOCAL:return[mn,yi];case Zr.SESSION:return[yi];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(mn)&&g.push(mn),"undefined"!=typeof window)for(const b of[_i,yi])g.includes(b)||g.push(b);return g.includes(Xt)||g.push(Xt),g}class Kf{constructor(){this.providerId="phone",this._delegate=new hl(ah(X.Z.auth()))}static credential(f,g){return hl.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Kf.PHONE_SIGN_IN_METHOD=hl.PHONE_SIGN_IN_METHOD,Kf.PROVIDER_ID=hl.PROVIDER_ID;const iv=Pe;class sv{constructor(f,g,b=X.Z.app()){var T;iv(null===(T=b.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Xd(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ac(y){y.INTERNAL.registerComponent(new yt.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new om(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Er,FacebookAuthProvider:qr,GithubAuthProvider:Ko,GoogleAuthProvider:Qn,OAuthProvider:Gr,SAMLAuthProvider:Ws,PhoneAuthProvider:Kf,PhoneMultiFactorGenerator:zy,RecaptchaVerifier:sv,TwitterAuthProvider:_t,Auth:om,AuthCredential:Za,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(X.Z)},8306:(Xe,ye,R)=>{R.d(ye,{y:()=>G});var u=R(930),X=R(727),P=R(8822),ae=R(4671);var ie=R(2416),ce=R(576),fe=R(2806);let G=(()=>{class De{constructor(je){je&&(this._subscribe=je)}lift(je){const pe=new De;return pe.source=this,pe.operator=je,pe}subscribe(je,pe,me){const ke=function qe(De){return De&&De instanceof u.Lv||function ne(De){return De&&(0,ce.m)(De.next)&&(0,ce.m)(De.error)&&(0,ce.m)(De.complete)}(De)&&(0,X.Nn)(De)}(je)?je:new u.Hp(je,pe,me);return(0,fe.x)(()=>{const{operator:He,source:Le}=this;ke.add(He?He.call(ke,Le):Le?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(je){try{return this._subscribe(je)}catch(pe){je.error(pe)}}forEach(je,pe){return new(pe=K(pe))((me,ke)=>{let He;He=this.subscribe(Le=>{try{je(Le)}catch(Je){ke(Je),null==He||He.unsubscribe()}},ke,me)})}_subscribe(je){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(je)}[P.L](){return this}pipe(...je){return function ve(De){return 0===De.length?ae.y:1===De.length?De[0]:function(je){return De.reduce((pe,me)=>me(pe),je)}}(je)(this)}toPromise(je){return new(je=K(je))((pe,me)=>{let ke;this.subscribe(He=>ke=He,He=>me(He),()=>pe(ke))})}}return De.create=Re=>new De(Re),De})();function K(De){var Re;return null!==(Re=null!=De?De:ie.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Xe,ye,R)=>{R.d(ye,{x:()=>ie});var u=R(8306),X=R(727);const ae=(0,R(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=R(8737),ve=R(2806);let ie=(()=>{class fe extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(K){const ne=new ce(this,this);return ne.operator=K,ne}_throwIfClosed(){if(this.closed)throw new ae}next(K){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const qe of ne)qe.next(K)}})}error(K){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=K;const{observers:ne}=this;for(;ne.length;)ne.shift().error(K)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:K}=this;for(;K.length;)K.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var K;return(null===(K=this.observers)||void 0===K?void 0:K.length)>0}_trySubscribe(K){return this._throwIfClosed(),super._trySubscribe(K)}_subscribe(K){return this._throwIfClosed(),this._checkFinalizedStatuses(K),this._innerSubscribe(K)}_innerSubscribe(K){const{hasError:ne,isStopped:qe,observers:De}=this;return ne||qe?X.Lc:(De.push(K),new X.w0(()=>(0,le.P)(De,K)))}_checkFinalizedStatuses(K){const{hasError:ne,thrownError:qe,isStopped:De}=this;ne?K.error(qe):De&&K.complete()}asObservable(){const K=new u.y;return K.source=this,K}}return fe.create=(G,K)=>new ce(G,K),fe})();class ce extends ie{constructor(G,K){super(),this.destination=G,this.source=K}next(G){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.next)||void 0===ne||ne.call(K,G)}error(G){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.error)||void 0===ne||ne.call(K,G)}complete(){var G,K;null===(K=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===K||K.call(G)}_subscribe(G){var K,ne;return null!==(ne=null===(K=this.source)||void 0===K?void 0:K.subscribe(G))&&void 0!==ne?ne:X.Lc}}},930:(Xe,ye,R)=>{R.d(ye,{Hp:()=>qe,Lv:()=>ne});var u=R(576),X=R(727),P=R(2416),ae=R(7849),le=R(5032);const ve=fe("C",void 0,void 0);function fe(me,ke,He){return{kind:me,value:ke,error:He}}var G=R(3410),K=R(2806);class ne extends X.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,X.Nn)(ke)&&ke.add(this)):this.destination=pe}static create(ke,He,Le){return new qe(ke,He,Le)}next(ke){this.isStopped?je(function ce(me){return fe("N",me,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?je(function ie(me){return fe("E",void 0,me)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?je(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class qe extends ne{constructor(ke,He,Le){let Je;if(super(),(0,u.m)(ke))Je=ke;else if(ke){let Ae;({next:Je,error:He,complete:Le}=ke),this&&P.v.useDeprecatedNextContext?(Ae=Object.create(ke),Ae.unsubscribe=()=>this.unsubscribe()):Ae=ke,Je=null==Je?void 0:Je.bind(Ae),He=null==He?void 0:He.bind(Ae),Le=null==Le?void 0:Le.bind(Ae)}this.destination={next:Je?De(Je):le.Z,error:De(null!=He?He:Re),complete:Le?De(Le):le.Z}}}function De(me,ke){return(...He)=>{try{me(...He)}catch(Le){P.v.useDeprecatedSynchronousErrorHandling?(0,K.O)(Le):(0,ae.h)(Le)}}}function Re(me){throw me}function je(me,ke){const{onStoppedNotification:He}=P.v;He&&G.z.setTimeout(()=>He(me,ke))}const pe={closed:!0,next:le.Z,error:Re,complete:le.Z}},727:(Xe,ye,R)=>{R.d(ye,{Lc:()=>ve,w0:()=>le,Nn:()=>ie});var u=R(576);const P=(0,R(3888).d)(fe=>function(K){fe(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((ne,qe)=>`${qe+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K});var ae=R(8737);class le{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:K}=this;if(K)if(this._parentage=null,Array.isArray(K))for(const De of K)De.remove(this);else K.remove(this);const{initialTeardown:ne}=this;if((0,u.m)(ne))try{ne()}catch(De){G=De instanceof P?De.errors:[De]}const{_teardowns:qe}=this;if(qe){this._teardowns=null;for(const De of qe)try{ce(De)}catch(Re){G=null!=G?G:[],Re instanceof P?G=[...G,...Re.errors]:G.push(Re)}}if(G)throw new P(G)}}add(G){var K;if(G&&G!==this)if(this.closed)ce(G);else{if(G instanceof le){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(K=this._teardowns)&&void 0!==K?K:[]).push(G)}}_hasParent(G){const{_parentage:K}=this;return K===G||Array.isArray(K)&&K.includes(G)}_addParent(G){const{_parentage:K}=this;this._parentage=Array.isArray(K)?(K.push(G),K):K?[K,G]:G}_removeParent(G){const{_parentage:K}=this;K===G?this._parentage=null:Array.isArray(K)&&(0,ae.P)(K,G)}remove(G){const{_teardowns:K}=this;K&&(0,ae.P)(K,G),G instanceof le&&G._removeParent(this)}}le.EMPTY=(()=>{const fe=new le;return fe.closed=!0,fe})();const ve=le.EMPTY;function ie(fe){return fe instanceof le||fe&&"closed"in fe&&(0,u.m)(fe.remove)&&(0,u.m)(fe.add)&&(0,u.m)(fe.unsubscribe)}function ce(fe){(0,u.m)(fe)?fe():fe.unsubscribe()}},2416:(Xe,ye,R)=>{R.d(ye,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Xe,ye,R)=>{R.d(ye,{E:()=>X});const X=new(R(8306).y)(le=>le.complete())},8996:(Xe,ye,R)=>{R.d(ye,{D:()=>Je});var u=R(8421),X=R(5363),P=R(9468),ve=R(8306),ce=R(2202),fe=R(576),G=R(9672);function ne(Ae,tt){if(!Ae)throw new Error("Iterable cannot be null");return new ve.y(Ke=>{(0,G.f)(Ke,tt,()=>{const we=Ae[Symbol.asyncIterator]();(0,G.f)(Ke,tt,()=>{we.next().then(Z=>{Z.done?Ke.complete():Ke.next(Z.value)})},0,!0)})})}var qe=R(3670),De=R(8239),Re=R(1144),je=R(6495),pe=R(2206),me=R(4532),ke=R(3260);function Je(Ae,tt){return tt?function Le(Ae,tt){if(null!=Ae){if((0,qe.c)(Ae))return function ae(Ae,tt){return(0,u.Xf)(Ae).pipe((0,P.R)(tt),(0,X.Q)(tt))}(Ae,tt);if((0,Re.z)(Ae))return function ie(Ae,tt){return new ve.y(Ke=>{let we=0;return tt.schedule(function(){we===Ae.length?Ke.complete():(Ke.next(Ae[we++]),Ke.closed||this.schedule())})})}(Ae,tt);if((0,De.t)(Ae))return function le(Ae,tt){return(0,u.Xf)(Ae).pipe((0,P.R)(tt),(0,X.Q)(tt))}(Ae,tt);if((0,pe.D)(Ae))return ne(Ae,tt);if((0,je.T)(Ae))return function K(Ae,tt){return new ve.y(Ke=>{let we;return(0,G.f)(Ke,tt,()=>{we=Ae[ce.h](),(0,G.f)(Ke,tt,()=>{let Z,te;try{({value:Z,done:te}=we.next())}catch(he){return void Ke.error(he)}te?Ke.complete():Ke.next(Z)},0,!0)}),()=>(0,fe.m)(null==we?void 0:we.return)&&we.return()})}(Ae,tt);if((0,ke.L)(Ae))return function He(Ae,tt){return ne((0,ke.Q)(Ae),tt)}(Ae,tt)}throw(0,me.z)(Ae)}(Ae,tt):(0,u.Xf)(Ae)}},8421:(Xe,ye,R)=>{R.d(ye,{Xf:()=>qe});var u=R(5987),X=R(1144),P=R(8239),ae=R(8306),le=R(3670),ve=R(2206),ie=R(4532),ce=R(6495),fe=R(3260),G=R(576),K=R(7849),ne=R(8822);function qe(Le){if(Le instanceof ae.y)return Le;if(null!=Le){if((0,le.c)(Le))return function De(Le){return new ae.y(Je=>{const Ae=Le[ne.L]();if((0,G.m)(Ae.subscribe))return Ae.subscribe(Je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,X.z)(Le))return function Re(Le){return new ae.y(Je=>{for(let Ae=0;Ae<Le.length&&!Je.closed;Ae++)Je.next(Le[Ae]);Je.complete()})}(Le);if((0,P.t)(Le))return function je(Le){return new ae.y(Je=>{Le.then(Ae=>{Je.closed||(Je.next(Ae),Je.complete())},Ae=>Je.error(Ae)).then(null,K.h)})}(Le);if((0,ve.D)(Le))return me(Le);if((0,ce.T)(Le))return function pe(Le){return new ae.y(Je=>{for(const Ae of Le)if(Je.next(Ae),Je.closed)return;Je.complete()})}(Le);if((0,fe.L)(Le))return function ke(Le){return me((0,fe.Q)(Le))}(Le)}throw(0,ie.z)(Le)}function me(Le){return new ae.y(Je=>{(function He(Le,Je){var Ae,tt,Ke,we;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,u.KL)(Le);!(tt=yield Ae.next()).done;)if(Je.next(tt.value),Je.closed)return}catch(Z){Ke={error:Z}}finally{try{tt&&!tt.done&&(we=Ae.return)&&(yield we.call(Ae))}finally{if(Ke)throw Ke.error}}Je.complete()})})(Le,Je).catch(Ae=>Je.error(Ae))})}},6451:(Xe,ye,R)=>{R.d(ye,{T:()=>ve});var u=R(8189),X=R(8421),P=R(515),ae=R(3269),le=R(8996);function ve(...ie){const ce=(0,ae.yG)(ie),fe=(0,ae._6)(ie,1/0),G=ie;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,u.J)(fe)((0,le.D)(G,ce)):P.E}},5403:(Xe,ye,R)=>{R.d(ye,{Q:()=>X});var u=R(930);class X extends u.Lv{constructor(ae,le,ve,ie,ce){super(ae),this.onFinalize=ce,this._next=le?function(fe){try{le(fe)}catch(G){ae.error(G)}}:super._next,this._error=ie?function(fe){try{ie(fe)}catch(G){ae.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(fe){ae.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;const{closed:le}=this;super.unsubscribe(),!le&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}},4004:(Xe,ye,R)=>{R.d(ye,{U:()=>P});var u=R(4482),X=R(5403);function P(ae,le){return(0,u.e)((ve,ie)=>{let ce=0;ve.subscribe(new X.Q(ie,fe=>{ie.next(ae.call(le,fe,ce++))}))})}},8189:(Xe,ye,R)=>{R.d(ye,{J:()=>P});var u=R(5577),X=R(4671);function P(ae=1/0){return(0,u.z)(X.y,ae)}},5577:(Xe,ye,R)=>{R.d(ye,{z:()=>ce});var u=R(4004),X=R(8421),P=R(4482),ae=R(9672),le=R(5403),ie=R(576);function ce(fe,G,K=1/0){return(0,ie.m)(G)?ce((ne,qe)=>(0,u.U)((De,Re)=>G(ne,De,qe,Re))((0,X.Xf)(fe(ne,qe))),K):("number"==typeof G&&(K=G),(0,P.e)((ne,qe)=>function ve(fe,G,K,ne,qe,De,Re,je){const pe=[];let me=0,ke=0,He=!1;const Le=()=>{He&&!pe.length&&!me&&G.complete()},Je=tt=>me<ne?Ae(tt):pe.push(tt),Ae=tt=>{De&&G.next(tt),me++;let Ke=!1;(0,X.Xf)(K(tt,ke++)).subscribe(new le.Q(G,we=>{null==qe||qe(we),De?Je(we):G.next(we)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(me--;pe.length&&me<ne;){const we=pe.shift();Re?(0,ae.f)(G,Re,()=>Ae(we)):Ae(we)}Le()}catch(we){G.error(we)}}))};return fe.subscribe(new le.Q(G,Je,()=>{He=!0,Le()})),()=>{null==je||je()}}(ne,qe,fe,K)))}},5363:(Xe,ye,R)=>{R.d(ye,{Q:()=>ae});var u=R(9672),X=R(4482),P=R(5403);function ae(le,ve=0){return(0,X.e)((ie,ce)=>{ie.subscribe(new P.Q(ce,fe=>(0,u.f)(ce,le,()=>ce.next(fe),ve),()=>(0,u.f)(ce,le,()=>ce.complete(),ve),fe=>(0,u.f)(ce,le,()=>ce.error(fe),ve)))})}},3099:(Xe,ye,R)=>{R.d(ye,{B:()=>ve});var u=R(8996),X=R(5698),P=R(7579),ae=R(930),le=R(4482);function ve(ce={}){const{connector:fe=(()=>new P.x),resetOnError:G=!0,resetOnComplete:K=!0,resetOnRefCountZero:ne=!0}=ce;return qe=>{let De=null,Re=null,je=null,pe=0,me=!1,ke=!1;const He=()=>{null==Re||Re.unsubscribe(),Re=null},Le=()=>{He(),De=je=null,me=ke=!1},Je=()=>{const Ae=De;Le(),null==Ae||Ae.unsubscribe()};return(0,le.e)((Ae,tt)=>{pe++,!ke&&!me&&He();const Ke=je=null!=je?je:fe();tt.add(()=>{pe--,0===pe&&!ke&&!me&&(Re=ie(Je,ne))}),Ke.subscribe(tt),De||(De=new ae.Hp({next:we=>Ke.next(we),error:we=>{ke=!0,He(),Re=ie(Le,G,we),Ke.error(we)},complete:()=>{me=!0,He(),Re=ie(Le,K),Ke.complete()}}),(0,u.D)(Ae).subscribe(De))})(qe)}}function ie(ce,fe,...G){return!0===fe?(ce(),null):!1===fe?null:fe(...G).pipe((0,X.q)(1)).subscribe(()=>ce())}},9468:(Xe,ye,R)=>{R.d(ye,{R:()=>X});var u=R(4482);function X(P,ae=0){return(0,u.e)((le,ve)=>{ve.add(P.schedule(()=>le.subscribe(ve),ae))})}},5698:(Xe,ye,R)=>{R.d(ye,{q:()=>ae});var u=R(515),X=R(4482),P=R(5403);function ae(le){return le<=0?()=>u.E:(0,X.e)((ve,ie)=>{let ce=0;ve.subscribe(new P.Q(ie,fe=>{++ce<=le&&(ie.next(fe),le<=ce&&ie.complete())}))})}},8505:(Xe,ye,R)=>{R.d(ye,{b:()=>le});var u=R(576),X=R(4482),P=R(5403),ae=R(4671);function le(ve,ie,ce){const fe=(0,u.m)(ve)||ie||ce?{next:ve,error:ie,complete:ce}:ve;return fe?(0,X.e)((G,K)=>{var ne;null===(ne=fe.subscribe)||void 0===ne||ne.call(fe);let qe=!0;G.subscribe(new P.Q(K,De=>{var Re;null===(Re=fe.next)||void 0===Re||Re.call(fe,De),K.next(De)},()=>{var De;qe=!1,null===(De=fe.complete)||void 0===De||De.call(fe),K.complete()},De=>{var Re;qe=!1,null===(Re=fe.error)||void 0===Re||Re.call(fe,De),K.error(De)},()=>{var De,Re;qe&&(null===(De=fe.unsubscribe)||void 0===De||De.call(fe)),null===(Re=fe.finalize)||void 0===Re||Re.call(fe)}))}):ae.y}},4408:(Xe,ye,R)=>{R.d(ye,{o:()=>le});var u=R(727);class X extends u.w0{constructor(ie,ce){super()}schedule(ie,ce=0){return this}}const P={setInterval(...ve){const{delegate:ie}=P;return((null==ie?void 0:ie.setInterval)||setInterval)(...ve)},clearInterval(ve){const{delegate:ie}=P;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ve)},delegate:void 0};var ae=R(8737);class le extends X{constructor(ie,ce){super(ie,ce),this.scheduler=ie,this.work=ce,this.pending=!1}schedule(ie,ce=0){if(this.closed)return this;this.state=ie;const fe=this.id,G=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(G,fe,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(G,this.id,ce),this}requestAsyncId(ie,ce,fe=0){return P.setInterval(ie.flush.bind(ie,this),fe)}recycleAsyncId(ie,ce,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ce;P.clearInterval(ce)}execute(ie,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ie,ce);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ce){let G,fe=!1;try{this.work(ie)}catch(K){fe=!0,G=K||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ce}=this,{actions:fe}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(fe,this),null!=ie&&(this.id=this.recycleAsyncId(ce,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xe,ye,R)=>{R.d(ye,{v:()=>P});var u=R(6063);class X{constructor(le,ve=X.now){this.schedulerActionCtor=le,this.now=ve}schedule(le,ve=0,ie){return new this.schedulerActionCtor(this,le).schedule(ie,ve)}}X.now=u.l.now;class P extends X{constructor(le,ve=X.now){super(le,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ve}=this;if(this._active)return void ve.push(le);let ie;this._active=!0;do{if(ie=le.execute(le.state,le.delay))break}while(le=ve.shift());if(this._active=!1,ie){for(;le=ve.shift();)le.unsubscribe();throw ie}}}},4986:(Xe,ye,R)=>{R.d(ye,{P:()=>ae,z:()=>P});var u=R(4408);const P=new(R(7565).v)(u.o),ae=P},6063:(Xe,ye,R)=>{R.d(ye,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(Xe,ye,R)=>{R.d(ye,{z:()=>u});const u={setTimeout(...X){const{delegate:P}=u;return((null==P?void 0:P.setTimeout)||setTimeout)(...X)},clearTimeout(X){const{delegate:P}=u;return((null==P?void 0:P.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Xe,ye,R)=>{R.d(ye,{h:()=>X});const X=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xe,ye,R)=>{R.d(ye,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Xe,ye,R)=>{R.d(ye,{_6:()=>ve,jO:()=>ae,yG:()=>le});var u=R(576),X=R(3532);function P(ie){return ie[ie.length-1]}function ae(ie){return(0,u.m)(P(ie))?ie.pop():void 0}function le(ie){return(0,X.K)(P(ie))?ie.pop():void 0}function ve(ie,ce){return"number"==typeof P(ie)?ie.pop():ce}},8737:(Xe,ye,R)=>{function u(X,P){if(X){const ae=X.indexOf(P);0<=ae&&X.splice(ae,1)}}R.d(ye,{P:()=>u})},3888:(Xe,ye,R)=>{function u(X){const ae=X(le=>{Error.call(le),le.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}R.d(ye,{d:()=>u})},2806:(Xe,ye,R)=>{R.d(ye,{O:()=>ae,x:()=>P});var u=R(2416);let X=null;function P(le){if(u.v.useDeprecatedSynchronousErrorHandling){const ve=!X;if(ve&&(X={errorThrown:!1,error:null}),le(),ve){const{errorThrown:ie,error:ce}=X;if(X=null,ie)throw ce}}else le()}function ae(le){u.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=le)}},9672:(Xe,ye,R)=>{function u(X,P,ae,le=0,ve=!1){const ie=P.schedule(function(){ae(),ve?X.add(this.schedule(null,le)):this.unsubscribe()},le);if(X.add(ie),!ve)return ie}R.d(ye,{f:()=>u})},4671:(Xe,ye,R)=>{function u(X){return X}R.d(ye,{y:()=>u})},1144:(Xe,ye,R)=>{R.d(ye,{z:()=>u});const u=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Xe,ye,R)=>{R.d(ye,{D:()=>X});var u=R(576);function X(P){return Symbol.asyncIterator&&(0,u.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Xe,ye,R)=>{function u(X){return"function"==typeof X}R.d(ye,{m:()=>u})},3670:(Xe,ye,R)=>{R.d(ye,{c:()=>P});var u=R(8822),X=R(576);function P(ae){return(0,X.m)(ae[u.L])}},6495:(Xe,ye,R)=>{R.d(ye,{T:()=>P});var u=R(2202),X=R(576);function P(ae){return(0,X.m)(null==ae?void 0:ae[u.h])}},8239:(Xe,ye,R)=>{R.d(ye,{t:()=>X});var u=R(576);function X(P){return(0,u.m)(null==P?void 0:P.then)}},3260:(Xe,ye,R)=>{R.d(ye,{L:()=>ae,Q:()=>P});var u=R(5987),X=R(576);function P(le){return(0,u.FC)(this,arguments,function*(){const ie=le.getReader();try{for(;;){const{value:ce,done:fe}=yield(0,u.qq)(ie.read());if(fe)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ce)}}finally{ie.releaseLock()}})}function ae(le){return(0,X.m)(null==le?void 0:le.getReader)}},3532:(Xe,ye,R)=>{R.d(ye,{K:()=>X});var u=R(576);function X(P){return P&&(0,u.m)(P.schedule)}},4482:(Xe,ye,R)=>{R.d(ye,{A:()=>X,e:()=>P});var u=R(576);function X(ae){return(0,u.m)(null==ae?void 0:ae.lift)}function P(ae){return le=>{if(X(le))return le.lift(function(ve){try{return ae(ve,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Xe,ye,R)=>{function u(){}R.d(ye,{Z:()=>u})},7849:(Xe,ye,R)=>{R.d(ye,{h:()=>P});var u=R(2416),X=R(3410);function P(ae){X.z.setTimeout(()=>{const{onUnhandledError:le}=u.v;if(!le)throw ae;le(ae)})}},4532:(Xe,ye,R)=>{function u(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(ye,{z:()=>u})},5987:(Xe,ye,R)=>{function ce(Z,te,he,_e){return new(he||(he=Promise))(function(se,yt){function Ft(It){try{st(_e.next(It))}catch(In){yt(In)}}function Dn(It){try{st(_e.throw(It))}catch(In){yt(In)}}function st(It){It.done?se(It.value):function Oe(se){return se instanceof he?se:new he(function(yt){yt(se)})}(It.value).then(Ft,Dn)}st((_e=_e.apply(Z,te||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function me(Z,te,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,_e=he.apply(Z,te||[]),se=[];return Oe={},yt("next"),yt("throw"),yt("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function yt(nn){_e[nn]&&(Oe[nn]=function(yr){return new Promise(function(hn,ui){se.push([nn,yr,hn,ui])>1||Ft(nn,yr)})})}function Ft(nn,yr){try{!function Dn(nn){nn.value instanceof pe?Promise.resolve(nn.value.v).then(st,It):In(se[0][2],nn)}(_e[nn](yr))}catch(hn){In(se[0][3],hn)}}function st(nn){Ft("next",nn)}function It(nn){Ft("throw",nn)}function In(nn,yr){nn(yr),se.shift(),se.length&&Ft(se[0][0],se[0][1])}}function He(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,te=Z[Symbol.asyncIterator];return te?te.call(Z):(Z=function ne(Z){var te="function"==typeof Symbol&&Symbol.iterator,he=te&&Z[te],_e=0;if(he)return he.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&_e>=Z.length&&(Z=void 0),{value:Z&&Z[_e++],done:!Z}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),he={},_e("next"),_e("throw"),_e("return"),he[Symbol.asyncIterator]=function(){return this},he);function _e(se){he[se]=Z[se]&&function(yt){return new Promise(function(Ft,Dn){!function Oe(se,yt,Ft,Dn){Promise.resolve(Dn).then(function(st){se({value:st,done:Ft})},yt)}(Ft,Dn,(yt=Z[se](yt)).done,yt.value)})}}}R.d(ye,{FC:()=>me,KL:()=>He,mG:()=>ce,qq:()=>pe})},5e3:(Xe,ye,R)=>{R.d(ye,{$8M:()=>zl,$Z:()=>Sh,AFp:()=>Wb,ALo:()=>Vp,AaK:()=>ce,BQk:()=>Xm,CHM:()=>kd,CRH:()=>Nb,CZH:()=>id,CqO:()=>zv,EJc:()=>Ur,EpF:()=>Zv,F$t:()=>uE,F4k:()=>e_,FYo:()=>tC,FiY:()=>Ue,G48:()=>CS,Gf:()=>Yc,GfV:()=>Ab,Gpc:()=>K,Gre:()=>DE,Hsn:()=>cE,Ikx:()=>v_,JOm:()=>is,LFG:()=>Cn,LSH:()=>Hf,Lbi:()=>SC,MAs:()=>Wr,NdJ:()=>Wv,OlP:()=>xn,Oqu:()=>Rh,PXZ:()=>yS,Q6J:()=>$v,QGY:()=>Jm,Qsj:()=>Pp,R0b:()=>Ps,RDi:()=>xd,Rgc:()=>Bp,SBq:()=>re,Sil:()=>Yp,Suo:()=>Rs,TTD:()=>Ka,TgZ:()=>Ah,Udp:()=>si,VLi:()=>Zh,X6Q:()=>ES,XFs:()=>lt,Xpm:()=>Ze,Y36:()=>up,YKP:()=>iC,YNc:()=>J0,Yjl:()=>qo,Yz7:()=>hn,ZZ4:()=>ay,_Bn:()=>kp,_UZ:()=>Ym,_Vd:()=>Uh,_c5:()=>tD,_uU:()=>lb,aQg:()=>ly,c2e:()=>Kb,cJS:()=>ci,cg1:()=>b_,dDg:()=>Jb,deG:()=>Wl,dqk:()=>Ht,eFA:()=>Lo,ekj:()=>a_,f3M:()=>D,g9A:()=>TC,h0i:()=>Wn,hGG:()=>Kh,hij:()=>du,iGM:()=>H_,ifc:()=>Yt,ip1:()=>K_,kL8:()=>RE,lG2:()=>Go,lcZ:()=>Pb,n5z:()=>nc,n_E:()=>Oa,oAB:()=>Lt,oxw:()=>dp,q4F:()=>O_,qLn:()=>gl,qOj:()=>K0,qZA:()=>cp,sBO:()=>$C,sIi:()=>rp,s_b:()=>$p,soG:()=>X_,tBr:()=>Ee,tb:()=>AC,tp0:()=>dt,uIk:()=>Po,vHH:()=>Re,vpe:()=>xa,wAp:()=>gt,xp6:()=>t0,ynx:()=>Qm,z2F:()=>Qp,zSh:()=>Mv,zs3:()=>Ms});var u=R(7579),X=R(727),P=R(8306),ae=R(6451),le=R(3099);function ve(s){for(let o in s)if(s[o]===ve)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ve({__forward_ref__:ve});function K(s){return s.__forward_ref__=K,s.toString=function(){return ce(this())},s}function ne(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===K}class Re extends Error{constructor(o,l){super(function je(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function Je(s,o){const l=o?` in ${o}`:"";throw new Re(-201,`No provider for ${me(s)} found${l}`)}function st(s,o){null==s&&function It(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function hn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ci(s){return{providers:s.providers||[],imports:s.imports||[]}}function rr(s){return Us(s,fs)||Us(s,xr)}function Us(s,o){return s.hasOwnProperty(o)?s[o]:null}function Rn(s){return s&&(s.hasOwnProperty(di)||s.hasOwnProperty(Pe))?s[di]:null}const fs=ve({\u0275prov:ve}),di=ve({\u0275inj:ve}),xr=ve({ngInjectableDef:ve}),Pe=ve({ngInjectorDef:ve});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Pn;function rn(s){const o=Pn;return Pn=s,o}function Bi(s,o,l){const d=rr(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&lt.Optional?null:void 0!==o?o:void Je(ce(s),"Injector")}function Hn(s){return{toString:s}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const at="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,Bs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=at||"undefined"!=typeof global&&global||vt||Bs,fi={},ft=[],Hi=ve({\u0275cmp:ve}),j=ve({\u0275dir:ve}),z=ve({\u0275pipe:ve}),B=ve({\u0275mod:ve}),$=ve({\u0275fac:ve}),W=ve({__NG_ELEMENT_ID__:ve});let xe=0;function Ze(s){return Hn(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,id:"c",styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return d.id+=xe++,d.inputs=ps(s.inputs,l),d.outputs=ps(s.outputs),m&&m.forEach(E=>E(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(Qt):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(an):null,d})}function Qt(s){return $n(s)||function Gi(s){return s[j]||null}(s)}function an(s){return function vr(s){return s[z]||null}(s)}const Xr={};function Lt(s){return Hn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Xr[s.id]=s.type),o})}function ps(s,o){if(null==s)return fi;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=d,o&&(o[h]=m)}return l}const Go=Ze;function qo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function $n(s){return s[Hi]||null}function Yn(s,o){const l=s[B]||null;if(!l&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return l}function Hr(s){return Array.isArray(s)&&"object"==typeof s[1]}function gi(s){return Array.isArray(s)&&!0===s[1]}function Rl(s){return 0!=(8&s.flags)}function wd(s){return 2==(2&s.flags)}function Gs(s){return 1==(1&s.flags)}function ln(s){return null!==s.template}function Ed(s){return 0!=(512&s[2])}function fo(s,o){return s.hasOwnProperty($)?s[$]:null}class Pl{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ka(){return po}function po(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ad),_f}function _f(){const s=qi(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===fi)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Ad(s,o,l,d){const h=qi(s)||function qs(s,o){return s[Ai]=o}(s,{previous:fi,current:null}),m=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[l],C=v[E];m[E]=new Pl(C&&C.currentValue,o,v===fi),s[d]=o}Ka.ngInherit=!0;const Ai="__ngSimpleChanges__";function qi(s){return s[Ai]||null}let Nl;function xd(s){Nl=s}function En(s){return!!s.listen}const zi={createRenderer:(s,o)=>function Qa(){return void 0!==Nl?Nl:"undefined"!=typeof document?document:void 0}()};function Sn(s){for(;Array.isArray(s);)s=s[0];return s}function ys(s,o){return Sn(o[s])}function Er(s,o){return Sn(o[s.index])}function Wi(s,o){return s.data[o]}function Gr(s,o){return s[o]}function qr(s,o){const l=o[s];return Hr(l)?l:l[0]}function Qn(s){return 4==(4&s[2])}function Ko(s){return 128==(128&s[2])}function Cr(s,o){return null==o?null:s[o]}function go(s){s[18]=0}function Ws(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const _t={lFrame:tl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Wu(){return _t.bindingsEnabled}function Ie(){return _t.lFrame.lView}function Vt(){return _t.lFrame.tView}function kd(s){return _t.lFrame.contextLView=s,s[8]}function gn(){let s=Xo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Xo(){return _t.lFrame.currentTNode}function Ir(s,o){const l=_t.lFrame;l.currentTNode=s,l.isParent=o}function vs(){return _t.lFrame.isParent}function Ll(){_t.lFrame.isParent=!1}function Jo(){return _t.isInCheckNoChangesMode}function _o(s){_t.isInCheckNoChangesMode=s}function Ki(){return _t.lFrame.bindingIndex++}function Oi(s){const o=_t.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function yf(s,o){const l=_t.lFrame;l.bindingIndex=l.bindingRootIndex=s,ta(o)}function ta(s){_t.lFrame.currentDirectiveIndex=s}function na(){return _t.lFrame.currentQueryIndex}function el(s){_t.lFrame.currentQueryIndex=s}function Bl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ku(s,o,l){if(l&lt.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&lt.Host||(h=Bl(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=_t.lFrame=vf();return d.currentTNode=o,d.lView=s,!0}function ra(s){const o=vf(),l=s[1];_t.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function vf(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?tl(s):o}function tl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function jl(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const nl=jl;function Hl(){const s=jl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Xn(){return _t.lFrame.selectedIndex}function dr(s){_t.lFrame.selectedIndex=s}function An(){const s=_t.lFrame;return Wi(s.tView,s.selectedIndex)}function Qu(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:O}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function Ys(s,o,l){Cf(s,o,3,l)}function $l(s,o,l,d){(3&s[2])===l&&Cf(s,o,l,d)}function Gl(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Cf(s,o,l,d){const m=null!=d?d:-1,v=o.length-1;let E=0;for(let C=void 0!==d?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=d&&E>=d)break}else o[C]<0&&(s[18]+=65536),(E<m||-1==m)&&(Ld(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Ld(s,o,l,d){const h=l[d]<0,m=l[d+1],E=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class Mn{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Zl(s,o,l){const d=En(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],E=l[h++],C=l[h++];d?s.setAttribute(o,E,C,v):o.setAttributeNS(v,E,C)}else{const v=m,E=l[++h];Jn(v)?d&&s.setProperty(o,v,E):d?s.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function un(s){return 3===s||4===s||6===s}function Jn(s){return 64===s.charCodeAt(0)}function Tr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||jd(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function jd(s,o,l,d,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const E=s[m++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=m-1;break}}}for(;m<s.length;){const E=s[m];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function Hd(s){return-1!==s}function sl(s){return 32767&s}function ol(s,o){let l=function $d(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let Qs=!0;function Yi(s){const o=Qs;return Qs=s,o}let al=0;function Xs(s,o){const l=ia(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Ju(d.data,s),Ju(o,null),Ju(d.blueprint,null));const h=Qi(s,o),m=s.injectorIndex;if(Hd(h)){const v=sl(h),E=ol(h,o),C=E[1].data;for(let A=0;A<8;A++)o[m+A]=E[v+A]|C[v+A]}return o[m+8]=h,m}function Ju(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ia(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(d=2===v?m.declTNode:1===v?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Or(s,o,l){!function ws(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(W)&&(d=l[W]),null==d&&(d=l[W]=al++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function vo(s,o,l){if(l&lt.Optional)return s;Je(o,"NodeInjector")}function qd(s,o,l,d){if(l&lt.Optional&&void 0===d&&(d=null),0==(l&(lt.Self|lt.Host))){const h=s[9],m=rn(void 0);try{return h?h.get(o,d,l&lt.Optional):Bi(o,d,l&lt.Optional)}finally{rn(m)}}return vo(d,o,l)}function bo(s,o,l,d=lt.Default,h){if(null!==s){const m=function _i(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(W)?s[W]:void 0;return"number"==typeof o?o>=0?255&o:ll:o}(l);if("function"==typeof m){if(!Ku(o,s,d))return d&lt.Host?vo(h,l,d):qd(o,l,d,h);try{const v=m(d);if(null!=v||d&lt.Optional)return v;Je(l)}finally{nl()}}else if("number"==typeof m){let v=null,E=ia(s,o),C=-1,A=d&lt.Host?o[16][6]:null;for((-1===E||d&lt.SkipSelf)&&(C=-1===E?Qi(s,o):o[E+8],-1!==C&&yi(d,!1)?(v=o[1],E=sl(C),o=ol(C,o)):E=-1);-1!==E;){const O=o[1];if(Zd(m,E,O.data)){const F=Js(E,o,l,v,d,A);if(F!==tc)return F}C=o[E+8],-1!==C&&yi(d,o[1].data[E+8]===A)&&Zd(m,E,o)?(v=O,E=sl(C),o=ol(C,o)):E=-1}}}return qd(o,l,d,h)}const tc={};function ll(){return new Es(gn(),Ie())}function Js(s,o,l,d,h,m){const v=o[1],E=v.data[s+8],O=wo(E,v,l,null==d?wd(E)&&Qs:d!=v&&0!=(3&E.type),h&lt.Host&&m===E);return null!==O?Vn(o,v,O,E):tc}function wo(s,o,l,d,h){const m=s.providerIndexes,v=o.data,E=1048575&m,C=s.directiveStart,O=m>>20,q=h?E+O:s.directiveEnd;for(let Q=d?E:E+O;Q<q;Q++){const be=v[Q];if(Q<C&&l===be||Q>=C&&be.type===l)return Q}if(h){const Q=v[C];if(Q&&ln(Q)&&Q.type===l)return C}return null}function Vn(s,o,l,d){let h=s[l];const m=o.data;if(function Df(s){return s instanceof Mn}(h)){const v=h;v.resolving&&function ke(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Re(-200,`Circular dependency in DI detected for ${s}${l}`)}(me(m[l]));const E=Yi(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?rn(v.injectImpl):null;Ku(s,d,lt.Default);try{h=s[l]=v.factory(void 0,m,s,d),o.firstCreatePass&&l>=d.directiveStart&&function Ef(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const v=po(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==C&&rn(C),Yi(E),v.resolving=!1,nl()}}return h}function Zd(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function yi(s,o){return!(s&lt.Self||s&lt.Host&&o)}class Es{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return bo(this._tNode,this._lView,o,d,l)}}function nc(s){return Hn(()=>{const o=s.prototype.constructor,l=o[$]||Xi(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[$]||Xi(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Xi(s){return qe(s)?()=>{const o=Xi(ne(s));return o&&o()}:fo(s)}function zl(s){return function ec(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const m=l[h];if(un(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(gn(),s)}const eo="__parameters__";function to(s,o,l){return Hn(()=>{const d=function es(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const v=new h(...m);return E.annotation=v,E;function E(C,A,O){const F=C.hasOwnProperty(eo)?C[eo]:Object.defineProperty(C,eo,{value:[]})[eo];for(;F.length<=O;)F.push(null);return(F[O]=F[O]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class xn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=hn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wl=new xn("AnalyzeForEntryComponents");function mn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),mn(d,o)):o!==s&&o.push(d)}return o}function bn(s,o){s.forEach(l=>Array.isArray(l)?bn(l,o):o(l))}function rc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function ic(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ua(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}function ei(s,o,l){let d=Co(s,o);return d>=0?s[1|d]=l:(d=~d,function ac(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function Kd(s,o){const l=Co(s,o);if(l>=0)return s[1|l]}function Co(s,o){return function cc(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const m=d+(h-d>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:d=m+1}return~(h<<l)}(s,o,1)}const ti={},Ds="__NG_DI_FLAG__",Ql="ngTempTokenPath",ts=/\n/gm,ki="__source",Xl=ve({provide:String,useValue:ve});let Jl;function da(s){const o=Jl;return Jl=s,o}function hl(s,o=lt.Default){if(void 0===Jl)throw new Re(203,"");return null===Jl?Bi(s,void 0,o):Jl.get(s,o&lt.Optional?null:void 0,o)}function Cn(s,o=lt.Default){return(function Nn(){return Pn}()||hl)(ne(s),o)}const D=Cn;function S(s){const o=[];for(let l=0;l<s.length;l++){const d=ne(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Re(900,"");let h,m=lt.Default;for(let v=0;v<d.length;v++){const E=d[v],C=L(E);"number"==typeof C?-1===C?h=E.token:m|=C:h=E}o.push(Cn(h,m))}else o.push(Cn(d))}return o}function k(s,o){return s[Ds]=o,s.prototype[Ds]=o,s}function L(s){return s[Ds]}const Ee=k(to("Inject",s=>({token:s})),-1),Ue=k(to("Optional"),8),dt=k(to("SkipSelf"),4);class _c{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function fa(s){return s instanceof _c?s.changingThisBreaksApplicationSecurity:s}const Lf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var sr=(()=>((sr=sr||{})[sr.NONE=0]="NONE",sr[sr.HTML=1]="HTML",sr[sr.STYLE=2]="STYLE",sr[sr.SCRIPT=3]="SCRIPT",sr[sr.URL=4]="URL",sr[sr.RESOURCE_URL=5]="RESOURCE_URL",sr))();function Hf(s){const o=function ru(){const s=Ie();return s&&s[12]}();return o?o.sanitize(sr.URL,s)||"":function pa(s,o){const l=function jy(s){return s instanceof _c&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?fa(s):function yc(s){return(s=String(s)).match(Lf)||s.match(Vf)?s:"unsafe:"+s}(pe(s))}const Yy="__ngContext__";function on(s,o){s[Yy]=o}function iu(s){const o=function pt(s){return s[Yy]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function qf(s){return s.ngOriginalError}function Zf(s,...o){s.error(...o)}class gl{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function Bn(s){return s&&s.ngErrorLogger||Zf}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&qf(o);for(;l&&qf(l);)l=qf(l);return l||null}}const Ic=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Ss(s){return s instanceof Function?s():s}var is=(()=>((is=is||{})[is.Important=1]="Important",is[is.DashCase=2]="DashCase",is))();function Wf(s,o){return undefined(s,o)}function ri(s){const o=s[3];return gi(o)?o[3]:o}function Sc(s){return uh(s[13])}function As(s){return uh(s[4])}function uh(s){for(;null!==s&&!gi(s);)s=s[4];return s}function ya(s,o,l,d,h){if(null!=d){let m,v=!1;gi(d)?m=d:Hr(d)&&(v=!0,d=d[0]);const E=Sn(d);0===s&&null!==l?null==h?J(o,l,E):U(o,l,E,h||null,!0):1===s&&null!==l?U(o,l,E,h||null,!0):2===s?function Yf(s,o,l){const d=et(s,o);d&&function Se(s,o,l,d){En(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,E,v):3===s&&o.destroyNode(E),null!=m&&function ov(s,o,l,d,h){const m=l[7];m!==Sn(l)&&ya(o,s,d,m,h);for(let E=10;E<l.length;E++){const C=l[E];yl(C[1],C,s,o,d,m)}}(o,s,m,l,h)}}function ml(s,o,l){return En(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function bi(s,o){const l=s[9],d=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ws(h,-1)),l.splice(d,1)}function Ac(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&bi(h,d),o>0&&(s[l-1][4]=d[4]);const m=ic(s,10+o);!function om(s,o){yl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function y(s,o){if(!(256&o[2])){const l=o[11];En(l)&&l.destroyNode&&yl(s,o,l,3,null,null),function Kf(s){let o=s[13];if(!o)return f(s[1],s);for(;o;){let l=null;if(Hr(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)Hr(o)&&f(o[1],o),o=o[3];null===o&&(o=s),Hr(o)&&f(o[1],o),l=o&&o[4]}o=l}}(o)}}function f(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function b(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof Mn)){const m=l[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=h[m[v]],C=m[v+1];try{C.call(E)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function g(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],E="function"==typeof v?v(o):Sn(o[v]),C=d[h=l[m+2]],A=l[m+3];"boolean"==typeof A?E.removeEventListener(l[m],C,A):A>=0?d[h=A]():d[h=-A].unsubscribe(),m+=2}else{const v=d[h=l[m+1]];l[m].call(v)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&En(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&gi(o[3])){l!==o[3]&&bi(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function T(s,o,l){return function x(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Yt.None||h===Yt.Emulated)return null}return Er(d,l)}(s,o.parent,l)}function U(s,o,l,d,h){En(s)?s.insertBefore(o,l,d,h):o.insertBefore(l,d,h)}function J(s,o,l){En(s)?s.appendChild(o,l):o.appendChild(l)}function Te(s,o,l,d,h){null!==d?U(s,o,l,d,h):J(s,o,l)}function et(s,o){return En(s)?s.parentNode(o):o.parentNode}function Bt(s,o,l){return jn(s,o,l)}let jn=function pr(s,o,l){return 40&s.type?Er(s,l):null};function xo(s,o,l,d){const h=T(s,d,o),m=o[11],E=Bt(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)Te(m,h,l[C],E,!1);else Te(m,h,l,E,!1)}function Mc(s,o){if(null!==o){const l=o.type;if(3&l)return Er(o,s);if(4&l)return xc(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return Mc(s,d);{const h=s[o.index];return gi(h)?xc(-1,h):Sn(h)}}if(32&l)return Wf(o,s)()||Sn(s[o.index]);{const d=dh(s,o);return null!==d?Array.isArray(d)?d[0]:Mc(ri(s[16]),d):Mc(s,o.next)}}return null}function dh(s,o){return null!==o?s[16][6].projection[o.projection]:null}function xc(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return Mc(d,h)}return o[7]}function _l(s,o,l,d,h,m,v){for(;null!=l;){const E=d[l.index],C=l.type;if(v&&0===o&&(E&&on(Sn(E),d),l.flags|=4),64!=(64&l.flags))if(8&C)_l(s,o,l.child,d,h,m,!1),ya(o,s,h,E,m);else if(32&C){const A=Wf(l,d);let O;for(;O=A();)ya(o,s,h,O,m);ya(o,s,h,E,m)}else 16&C?hh(s,o,d,l,h,m):ya(o,s,h,E,m);l=v?l.projectionNext:l.next}}function yl(s,o,l,d,h,m){_l(l,d,s.firstChild,o,h,m,!1)}function hh(s,o,l,d,h,m){const v=l[16],C=v[6].projection[d.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)ya(o,s,h,C[A],m);else _l(s,o,C,v[3],h,m,!0)}function Oo(s,o,l){En(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function fh(s,o,l){En(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Kw(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}l=h+1}}const Oc="ng-template";function Qf(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==Kw(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function av(s){return 4===s.type&&s.value!==Oc}function pI(s,o,l){return o===(4!==s.type||l?s.value:Oc)}function Yw(s,o,l){let d=4;const h=s.attrs||[],m=function Xw(s){for(let o=0;o<s.length;o++)if(un(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!v)if(4&d){if(d=2|1&d,""!==C&&!pI(s,C,l)||""===C&&1===o.length){if(ko(d))return!1;v=!0}}else{const A=8&d?C:o[++E];if(8&d&&null!==s.attrs){if(!Qf(s.attrs,A,l)){if(ko(d))return!1;v=!0}continue}const F=gI(8&d?"class":C,h,av(s),l);if(-1===F){if(ko(d))return!1;v=!0;continue}if(""!==A){let q;q=F>m?"":h[F+1].toLowerCase();const Q=8&d?q:null;if(Q&&-1!==Kw(Q,A,0)||2&d&&A!==q){if(ko(d))return!1;v=!0}}}}else{if(!v&&!ko(d)&&!ko(C))return!1;if(v&&ko(C))continue;v=!1,d=C|1&d}}return ko(d)||v}function ko(s){return 0==(1&s)}function gI(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function Jw(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function Qw(s,o,l=!1){for(let d=0;d<o.length;d++)if(Yw(s,o[d],l))return!0;return!1}function um(s,o){e:for(let l=0;l<o.length;l++){const d=o[l];if(s.length===d.length){for(let h=0;h<s.length;h++)if(s[h]!==d[h])continue e;return!0}}return!1}function cm(s,o){return s?":not("+o.trim()+")":o}function _I(s){let o=s[0],l=1,d=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const E=s[++l];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!ko(v)&&(o+=cm(m,h),h=""),d=v,m=m||!ko(d);l++}return""!==h&&(o+=cm(m,h)),o}const Rt={};function t0(s){wi(Vt(),Ie(),Xn()+s,Jo())}function wi(s,o,l,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Ys(o,m,l)}else{const m=s.preOrderHooks;null!==m&&$l(o,m,0,l)}dr(l)}function hm(s,o){return s<<17|o<<2}function Ei(s){return s>>17&32767}function uv(s){return 2|s}function Rr(s){return(131068&s)>>2}function cv(s,o){return-131069&s|o<<2}function dv(s){return 1|s}function g0(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],m=l[d+1];if(-1!==m){const v=s.data[m];el(h),v.contentQueries(2,o[m],m)}}}function gh(s,o,l,d,h,m,v,E,C,A){const O=o.blueprint.slice();return O[0]=h,O[2]=140|d,go(O),O[3]=O[15]=s,O[8]=l,O[10]=v||s&&s[10],O[11]=E||s&&s[11],O[12]=C||s&&s[12]||null,O[9]=A||s&&s[9]||null,O[6]=m,O[16]=2==o.type?s[16]:O,O}function ss(s,o,l,d,h){let m=s.data[o];if(null===m)m=function ym(s,o,l,d,h){const m=Xo(),v=vs(),C=s.data[o]=function RI(s,o,l,d,h,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,l,d,h),function Pd(){return _t.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=h;const v=function Ks(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Ir(m,!0),m}function Rc(s,o,l,d){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function Xf(s,o,l){ra(o);try{const d=s.viewQuery;null!==d&&Tm(1,d,l);const h=s.template;null!==h&&_0(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&g0(s,o),s.staticViewQueries&&Tm(2,s.viewQuery,l);const m=s.components;null!==m&&function m0(s,o){for(let l=0;l<o.length;l++)HI(s,o[l])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Hl()}}function mh(s,o,l,d){const h=o[2];if(256==(256&h))return;ra(o);const m=Jo();try{go(o),function Ul(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&_0(s,o,l,2,d);const v=3==(3&h);if(!m)if(v){const A=s.preOrderCheckHooks;null!==A&&Ys(o,A,null)}else{const A=s.preOrderHooks;null!==A&&$l(o,A,0,null),Gl(o,0)}if(function BI(s){for(let o=Sc(s);null!==o;o=As(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],m=h[3];0==(1024&h[2])&&Ws(m,1),h[2]|=1024}}}(o),function Dv(s){for(let o=Sc(s);null!==o;o=As(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];Ko(d)&&mh(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&g0(s,o),!m)if(v){const A=s.contentCheckHooks;null!==A&&Ys(o,A)}else{const A=s.contentHooks;null!==A&&$l(o,A,1),Gl(o,1)}!function MI(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)dr(~h);else{const m=h,v=l[++d],E=l[++d];yf(v,m),E(2,o[m])}}}finally{dr(-1)}}(s,o);const E=s.components;null!==E&&function _m(s,o){for(let l=0;l<o.length;l++)jI(s,o[l])}(o,E);const C=s.viewQuery;if(null!==C&&Tm(2,C,d),!m)if(v){const A=s.viewCheckHooks;null!==A&&Ys(o,A)}else{const A=s.viewHooks;null!==A&&$l(o,A,2),Gl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ws(o[3],-1))}finally{Hl()}}function xI(s,o,l,d){const h=o[10],m=!Jo(),v=Qn(o);try{m&&!v&&h.begin&&h.begin(),v&&Xf(s,o,d),mh(s,o,l,d)}finally{m&&!v&&h.end&&h.end()}}function _0(s,o,l,d,h){const m=Xn(),v=2&d;try{dr(-1),v&&o.length>20&&wi(s,o,20,Jo()),l(d,h)}finally{dr(m)}}function y0(s,o,l){if(Rl(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}function vm(s,o,l){!Wu()||(function wm(s,o,l,d){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||Xs(l,o),on(d,o);const v=l.initialInputs;for(let E=h;E<m;E++){const C=s.data[E],A=ln(C);A&&UI(o,l,C);const O=Vn(o,s,E,l);on(O,o),null!==v&&T0(0,E-h,O,C,0,v),A&&(qr(l.index,o)[8]=O)}}(s,o,l,Er(l,o)),128==(128&l.flags)&&function wv(s,o,l){const d=l.directiveStart,h=l.directiveEnd,v=l.index,E=function Ja(){return _t.lFrame.currentDirectiveIndex}();try{dr(v);for(let C=d;C<h;C++){const A=s.data[C],O=o[C];ta(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&w0(A,O)}}finally{dr(-1),ta(E)}}(s,o,l))}function _h(s,o,l=Er){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],E=-1===v?l(o,s):s[v];s[h++]=E}}}function v0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=vv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function vv(s,o,l,d,h,m,v,E,C,A){const O=20+d,F=O+h,q=function OI(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Rt);return l}(O,F),Q="function"==typeof A?A():A;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:E,declTNode:o,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function b0(s,o,l,d){const h=Sm(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&Sv(s).push(d,h.length-1))}function PI(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function io(s,o,l,d,h,m,v,E){const C=Er(o,l);let O,A=o.inputs;!E&&null!=A&&(O=A[d])?(Am(s,l,O,d,h),wd(o)&&function jx(s,o){const l=qr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function Bx(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,En(m)?m.setProperty(C,d,h):Jn(d)||(C.setProperty?C.setProperty(d,h):C[d]=h))}function bv(s,o,l,d){let h=!1;if(Wu()){const m=function LI(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];Qw(l,v.selectors,!1)&&(h||(h=[]),Or(Xs(l,o),s,v.type),ln(v)?(E0(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===d?null:{"":-1};if(null!==m){h=!0,D0(l,s.data.length,m.length);for(let O=0;O<m.length;O++){const F=m[O];F.providersResolver&&F.providersResolver(F)}let E=!1,C=!1,A=Rc(s,o,m.length,null);for(let O=0;O<m.length;O++){const F=m[O];l.mergedAttrs=Tr(l.mergedAttrs,F.hostAttrs),I0(s,l,o,A,F),VI(A,F,v),null!==F.contentQueries&&(l.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=128);const q=F.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),A++}!function Ux(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,v=[];let E=null,C=null;for(let A=o.directiveStart;A<d;A++){const O=h[A],F=O.inputs,q=null===m||av(o)?null:Ev(F,m);v.push(q),E=PI(F,A,E),C=PI(O.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=C}(s,l)}v&&function C0(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new Re(-301,`Export of name '${o[h+1]}' not found!`);d.push(o[h],m)}}}(l,d,v)}return l.mergedAttrs=Tr(l.mergedAttrs,l.attrs),h}function Pr(s,o,l,d,h,m){const v=m.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function Ro(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=C&&E.push(C),E.push(d,h,v)}}function w0(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function E0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function VI(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;ln(o)&&(l[""]=s)}}function D0(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function I0(s,o,l,d,h){s.data[d]=h;const m=h.factory||(h.factory=fo(h.type)),v=new Mn(m,ln(h),null);s.blueprint[d]=v,l[d]=v,Pr(s,o,0,d,Rc(s,l,h.hostVars,Rt),h)}function UI(s,o,l){const d=Er(o,s),h=v0(l),m=s[10],v=lu(s,gh(s,h,null,l.onPush?64:16,d,o,m,m.createRenderer(d,l),null,null));s[o.index]=v}function qn(s,o,l,d,h,m){const v=Er(s,o);!function yh(s,o,l,d,h,m,v){if(null==m)En(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const E=null==v?pe(m):v(m,d||"",h);En(s)?s.setAttribute(o,h,E,l):l?o.setAttributeNS(l,h,E):o.setAttribute(h,E)}}(o[11],v,m,s.value,l,d,h)}function T0(s,o,l,d,h,m){const v=m[o];if(null!==v){const E=d.setInput;for(let C=0;C<v.length;){const A=v[C++],O=v[C++],F=v[C++];null!==E?d.setInput(l,F,A,O):l[O]=F}}}function Ev(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function Em(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function jI(s,o){const l=qr(o,s);if(Ko(l)){const d=l[1];80&l[2]?mh(d,l,d.template,l[8]):l[5]>0&&Iv(l)}}function Iv(s){for(let d=Sc(s);null!==d;d=As(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const v=m[1];mh(v,m,v.template,m[8])}else m[5]>0&&Iv(m)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=qr(l[d],s);Ko(h)&&h[5]>0&&Iv(h)}}function HI(s,o){const l=qr(o,s),d=l[1];(function $I(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),Xf(d,l,l[8])}function lu(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Cm(s){for(;s;){s[2]|=64;const o=ri(s);if(Ed(s)&&!o)return s;s=o}return null}function Tv(s,o,l){const d=o[10];d.begin&&d.begin();try{mh(s,o,s.template,l)}catch(h){throw x0(o,h),h}finally{d.end&&d.end()}}function S0(s){!function Im(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=iu(l),h=d[1];xI(h,d,h.template,l)}}(s[8])}function Tm(s,o,l){el(0),o(s,l)}const M0=(()=>Promise.resolve(null))();function Sm(s){return s[7]||(s[7]=[])}function Sv(s){return s.cleanup||(s.cleanup=[])}function x0(s,o){const l=s[9],d=l?l.get(gl,null):null;d&&d.handleError(o)}function Am(s,o,l,d,h){for(let m=0;m<l.length;){const v=l[m++],E=l[m++],C=o[v],A=s.data[v];null!==A.setInput?A.setInput(C,h,d,E):C[E]=h}}function wa(s,o,l){const d=ys(o,s);!function sm(s,o,l){En(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function Mm(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?m=E:1==m?h=fe(h,E):2==m&&(d=fe(d,E+": "+o[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}const Jf=new xn("INJECTOR",-1);class k0{get(o,l=ti){if(l===ti){const d=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw d.name="NullInjectorError",d}return l}}const Mv=new xn("Set Injector scope."),ep={},xm={};let tp;function Om(){return void 0===tp&&(tp=new k0),tp}function km(s,o=null,l=null,d){const h=xv(s,o,l,d);return h._resolveInjectorDefTypes(),h}function xv(s,o=null,l=null,d){return new zI(s,l,o||Om(),d)}class zI{constructor(o,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&bn(l,E=>this.processProvider(E,o,l)),bn([o],E=>this.processInjectorType(E,[],m)),this.records.set(Jf,bh(void 0,this));const v=this.records.get(Mv);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=ti,d=lt.Default){this.assertNotDestroyed();const h=da(this),m=rn(void 0);try{if(!(d&lt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function Nm(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(o)&&rr(o);E=C&&this.injectableDefInScope(C)?bh(Rm(o),ep):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(d&lt.Self?Om():this.parent).get(o,l=d&lt.Optional&&l===ti?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Ql]=v[Ql]||[]).unshift(ce(o)),h)throw v;return function Y(s,o,l,d){const h=s[Ql];throw o[ki]&&h.unshift(o[ki]),s.message=function oe(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}h=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(ts,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[Ql]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{rn(m),da(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ce(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,"")}processInjectorType(o,l,d){if(!(o=ne(o)))return!1;let h=Rn(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,E=-1!==d.indexOf(v);if(void 0!==m&&(h=Rn(m)),null==h)return!1;if(null!=h.imports&&!E){let O;d.push(v);try{bn(h.imports,F=>{this.processInjectorType(F,l,d)&&(void 0===O&&(O=[]),O.push(F))})}finally{}if(void 0!==O)for(let F=0;F<O.length;F++){const{ngModule:q,providers:Q}=O[F];bn(Q,be=>this.processProvider(be,q,Q||ft))}}this.injectorDefTypes.add(v);const C=fo(v)||(()=>new v);this.records.set(v,bh(C,ep));const A=h.providers;if(null!=A&&!E){const O=o;bn(A,F=>this.processProvider(F,O,A))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,d){let h=wh(o=ne(o))?o:ne(o&&o.provide);const m=function WI(s,o,l){return P0(s)?bh(void 0,s.useValue):bh(R0(s),ep)}(o);if(wh(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=bh(void 0,ep,!0),v.factory=()=>S(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===ep&&(l.value=xm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function JI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ne(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Rm(s){const o=rr(s),l=null!==o?o.factory:fo(s);if(null!==l)return l;if(s instanceof xn)throw new Re(204,"");if(s instanceof Function)return function Pm(s){const o=s.length;if(o>0)throw ua(o,"?"),new Re(204,"");const l=function jr(s){const o=s&&(s[fs]||s[xr]);if(o){const l=function Kt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Re(204,"")}function R0(s,o,l){let d;if(wh(s)){const h=ne(s);return fo(h)||Rm(h)}if(P0(s))d=()=>ne(s.useValue);else if(function YI(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...S(s.deps||[]));else if(function KI(s){return!(!s||!s.useExisting)}(s))d=()=>Cn(ne(s.useExisting));else{const h=ne(s&&(s.useClass||s.provide));if(!function XI(s){return!!s.deps}(s))return fo(h)||Rm(h);d=()=>new h(...S(s.deps))}return d}function bh(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function P0(s){return null!==s&&"object"==typeof s&&Xl in s}function wh(s){return"function"==typeof s}let Ms=(()=>{class s{static create(l,d){var h;if(Array.isArray(l))return km({name:""},d,l,"");{const m=null!==(h=l.name)&&void 0!==h?h:"";return km({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=ti,s.NULL=new k0,s.\u0275prov=hn({token:s,providedIn:"any",factory:()=>Cn(Jf)}),s.__NG_ELEMENT_ID__=-1,s})();function nT(s,o){Qu(iu(s)[1],gn())}function K0(s){let o=function rT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(ln(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Re(903,"");h=o.\u0275dir}if(h){if(l){d.push(h);const v=s;v.inputs=Y0(s.inputs),v.declaredInputs=Y0(s.declaredInputs),v.outputs=Y0(s.outputs);const E=h.hostBindings;E&&Wx(s,E);const C=h.viewQuery,A=h.contentQueries;if(C&&Zx(s,C),A&&zx(s,A),ie(s.inputs,h.inputs),ie(s.declaredInputs,h.declaredInputs),ie(s.outputs,h.outputs),ln(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(s),E===K0&&(l=!1)}}o=Object.getPrototypeOf(o)}!function iT(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Tr(h.hostAttrs,l=Tr(l,h.hostAttrs))}}(d)}function Y0(s){return s===fi?{}:s===ft?[]:s}function Zx(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function zx(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,m)=>{o(d,h,m),l(d,h,m)}:o}function Wx(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let np=null;function bl(){if(!np){const s=Ht.Symbol;if(s&&s.iterator)np=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(np=d)}}}return np}function rp(s){return!!Pv(s)&&(Array.isArray(s)||!(s instanceof Map)&&bl()in s)}function Pv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ci(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Po(s,o,l,d){const h=Ie();return Ci(h,Ki(),o)&&(Vt(),qn(An(),h,s,o,l,d)),Po}function Eh(s,o,l,d){return Ci(s,Ki(),l)?o+pe(l)+d:Rt}function J0(s,o,l,d,h,m,v,E){const C=Ie(),A=Vt(),O=s+20,F=A.firstCreatePass?function uT(s,o,l,d,h,m,v,E,C){const A=o.consts,O=ss(o,s,4,v||null,Cr(A,E));bv(o,l,O,Cr(A,C)),Qu(o,O);const F=O.tViews=vv(2,O,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,O),F.queries=o.queries.embeddedTView(O)),O}(O,A,C,o,l,d,h,m,v):A.data[O];Ir(F,!1);const q=C[11].createComment("");xo(A,C,q,F),on(q,C),lu(C,C[O]=Em(q,C,q,F)),Gs(F)&&vm(A,C,F),null!=v&&_h(C,F,E)}function Wr(s){return Gr(function Rd(){return _t.lFrame.contextLView}(),20+s)}function up(s,o=lt.Default){const l=Ie();return null===l?Cn(s,o):bo(gn(),l,ne(s),o)}function Sh(){throw new Error("invalid")}function $v(s,o,l){const d=Ie();return Ci(d,Ki(),o)&&io(Vt(),An(),d,s,o,d[11],l,!1),$v}function Gv(s,o,l,d,h){const v=h?"class":"style";Am(s,l,o.inputs[v],v,d)}function Ah(s,o,l,d){const h=Ie(),m=Vt(),v=20+s,E=h[11],C=h[v]=ml(E,o,function Fd(){return _t.lFrame.currentNamespace}()),A=m.firstCreatePass?function Km(s,o,l,d,h,m,v){const E=o.consts,A=ss(o,s,2,h,Cr(E,m));return bv(o,l,A,Cr(E,v)),null!==A.attrs&&Mm(A,A.attrs,!1),null!==A.mergedAttrs&&Mm(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,m,h,0,o,l,d):m.data[v];Ir(A,!0);const O=A.mergedAttrs;null!==O&&Zl(E,C,O);const F=A.classes;null!==F&&fh(E,C,F);const q=A.styles;null!==q&&Oo(E,C,q),64!=(64&A.flags)&&xo(m,h,C,A),0===function Yo(){return _t.lFrame.elementDepthCount}()&&on(C,h),function Dr(){_t.lFrame.elementDepthCount++}(),Gs(A)&&(vm(m,h,A),y0(m,A,h)),null!==d&&_h(h,A)}function cp(){let s=gn();vs()?Ll():(s=s.parent,Ir(s,!1));const o=s;!function Xa(){_t.lFrame.elementDepthCount--}();const l=Vt();l.firstCreatePass&&(Qu(l,s),Rl(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Xu(s){return 0!=(16&s.flags)}(o)&&Gv(l,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bd(s){return 0!=(32&s.flags)}(o)&&Gv(l,o,Ie(),o.stylesWithoutHost,!1)}function Ym(s,o,l,d){Ah(s,o,l,d),cp()}function Qm(s,o,l){const d=Ie(),h=Vt(),m=s+20,v=h.firstCreatePass?function qv(s,o,l,d,h){const m=o.consts,v=Cr(m,d),E=ss(o,s,8,"ng-container",v);return null!==v&&Mm(E,v,!0),bv(o,l,E,Cr(m,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(m,h,d,o,l):h.data[m];Ir(v,!0);const E=d[m]=d[11].createComment("");xo(h,d,E,v),on(E,d),Gs(v)&&(vm(h,d,v),y0(h,v,d)),null!=l&&_h(d,v)}function Xm(){let s=gn();const o=Vt();vs()?Ll():(s=s.parent,Ir(s,!1)),o.firstCreatePass&&(Qu(o,s),Rl(s)&&o.queries.elementEnd(s))}function Zv(){return Ie()}function Jm(s){return!!s&&"function"==typeof s.then}function e_(s){return!!s&&"function"==typeof s.subscribe}const zv=e_;function Wv(s,o,l,d){const h=Ie(),m=Vt(),v=gn();return function n_(s,o,l,d,h,m,v,E){const C=Gs(d),O=s.firstCreatePass&&Sv(s),F=o[8],q=Sm(o);let Q=!0;if(3&d.type||E){const Fe=Er(d,o),it=E?E(Fe):Fe,Ce=q.length,mt=E?Gt=>E(Sn(Gt[d.index])):d.index;if(En(l)){let Gt=null;if(!E&&C&&(Gt=function Kv(s,o,l,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===d){const E=o[7],C=h[m+2];return E.length>C?E[C]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,d.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=m,Gt.__ngLastListenerFn__=m,Q=!1;else{m=Fr(d,o,F,m,!1);const cn=l.listen(it,h,m);q.push(m,cn),O&&O.push(h,mt,Ce,Ce+1)}}else m=Fr(d,o,F,m,!0),it.addEventListener(h,m,v),q.push(m),O&&O.push(h,mt,Ce,v)}else m=Fr(d,o,F,m,!1);const be=d.outputs;let Ve;if(Q&&null!==be&&(Ve=be[h])){const Fe=Ve.length;if(Fe)for(let it=0;it<Fe;it+=2){const Ns=o[Ve[it]][Ve[it+1]].subscribe(m),Pa=q.length;q.push(m,Ns),O&&O.push(h,d.index,Pa,-(Pa+1))}}}(m,h,h[11],v,s,o,!!l,d),Wv}function Nr(s,o,l,d){try{return!1!==l(d)}catch(h){return x0(s,h),!1}}function Fr(s,o,l,d,h){return function m(v){if(v===Function)return d;const E=2&s.flags?qr(s.index,o):o;0==(32&o[2])&&Cm(E);let C=Nr(o,0,d,v),A=m.__ngNextListenerFn__;for(;A;)C=Nr(o,0,A,v)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function dp(s=1){return function Nd(s){return(_t.lFrame.contextLView=function Pg(s,o){for(;s>0;)o=o[15],s--;return o}(s,_t.lFrame.contextLView))[8]}(s)}function Yv(s,o){let l=null;const d=function mI(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const m=o[h];if("*"!==m){if(null===d?Qw(s,m,!0):um(d,m))return h}else l=h}return l}function uE(s){const o=Ie()[16][6];if(!o.projection){const d=o.projection=ua(s?s.length:1,null),h=d.slice();let m=o.child;for(;null!==m;){const v=s?Yv(m,s):0;null!==v&&(h[v]?h[v].projectionNext=m:d[v]=m,h[v]=m),m=m.next}}}function cE(s,o=0,l){const d=Ie(),h=Vt(),m=ss(h,20+s,16,null,l||null);null===m.projection&&(m.projection=o),Ll(),64!=(64&m.flags)&&function lm(s,o,l){hh(o[11],0,o,l,T(s,l,o),Bt(l.parent||o[6],l,o))}(h,d,m)}function mE(s,o,l,d,h){const m=s[l+1],v=null===o;let E=d?Ei(m):Rr(m),C=!1;for(;0!==E&&(!1===C||v);){const O=s[E+1];fp(s[E],o)&&(C=!0,s[E+1]=d?dv(O):uv(O)),E=d?Ei(O):Rr(O)}C&&(s[l+1]=d?uv(m):dv(m))}function fp(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Co(s,o)>=0}const Ar={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tb(s){return s.substring(Ar.key,Ar.keyEnd)}function yE(s,o){const l=Ar.textEnd;return l===o?-1:(o=Ar.keyEnd=function Vc(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Ar.key=o,l),Mh(s,o,l))}function Mh(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function si(s,o,l){return oo(s,o,l,!1),si}function a_(s,o){return oo(s,o,null,!0),a_}function so(s,o){for(let l=function o_(s){return function vE(s){Ar.key=0,Ar.keyEnd=0,Ar.value=0,Ar.valueEnd=0,Ar.textEnd=s.length}(s),yE(s,Mh(s,0,Ar.textEnd))}(o);l>=0;l=yE(o,l))ei(s,tb(o),!0)}function oo(s,o,l,d){const h=Ie(),m=Vt(),v=Oi(2);m.firstUpdatePass&&u_(m,s,v,d),o!==Rt&&Ci(h,v,o)&&ob(m,m.data[Xn()],h,h[11],s,h[v+1]=function ET(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(fa(s)))),s}(o,l),d,v)}function Oh(s,o){return o>=s.expandoStartIndex}function u_(s,o,l,d){const h=s.data;if(null===h[l+1]){const m=h[Xn()],v=Oh(s,l);kh(m,d)&&null===o&&!v&&(o=!1),o=function nb(s,o,l,d){const h=function yo(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=mp(l=d_(null,s,o,l,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=d_(h,s,o,l,d),null===m){let C=function rb(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==Rr(d))return s[Ei(d)]}(s,o,d);void 0!==C&&Array.isArray(C)&&(C=d_(null,s,o,C[1],d),C=mp(C,o.attrs,d),function c_(s,o,l,d){s[Ei(l?o.classBindings:o.styleBindings)]=d}(s,o,d,C))}else m=function gp(s,o,l){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=mp(d,s[m].hostAttrs,l);return mp(d,o.attrs,l)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,d),function eb(s,o,l,d,h,m){let v=m?o.classBindings:o.styleBindings,E=Ei(v),C=Rr(v);s[d]=l;let O,A=!1;if(Array.isArray(l)){const F=l;O=F[1],(null===O||Co(F,O)>0)&&(A=!0)}else O=l;if(h)if(0!==C){const q=Ei(s[E+1]);s[d+1]=hm(q,E),0!==q&&(s[q+1]=cv(s[q+1],d)),s[E+1]=function vI(s,o){return 131071&s|o<<17}(s[E+1],d)}else s[d+1]=hm(E,0),0!==E&&(s[E+1]=cv(s[E+1],d)),E=d;else s[d+1]=hm(C,0),0===E?E=d:s[C+1]=cv(s[C+1],d),C=d;A&&(s[d+1]=uv(s[d+1])),mE(s,O,d,!0),mE(s,O,d,!1),function gE(s,o,l,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Co(m,o)>=0&&(l[d+1]=dv(l[d+1]))}(o,O,s,d,m),v=hm(E,C),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,d)}}function d_(s,o,l,d,h){let m=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(m=o[E],d=mp(d,m.hostAttrs,h),m!==s);)E++;return null!==s&&(l.directiveStylingLast=E),d}function mp(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ei(s,v,!!l||o[++m]))}return void 0===s?null:s}function ob(s,o,l,d,h,m,v,E){if(!(3&o.type))return;const C=s.data,A=C[E+1];yp(function n0(s){return 1==(1&s)}(A)?ab(C,o,l,h,Rr(A),v):void 0)||(yp(m)||function lv(s){return 2==(2&s)}(A)&&(m=ab(C,null,l,h,E,v)),function ba(s,o,l,d,h){const m=En(s);if(o)h?m?s.addClass(l,d):l.classList.add(d):m?s.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:is.DashCase;if(null==h)m?s.removeStyle(l,d,v):l.style.removeProperty(d);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),v|=is.Important),m?s.setStyle(l,d,h,v):l.style.setProperty(d,h,E?"important":"")}}}(d,v,ys(Xn(),l),h,m))}function ab(s,o,l,d,h,m){const v=null===o;let E;for(;h>0;){const C=s[h],A=Array.isArray(C),O=A?C[1]:C,F=null===O;let q=l[h+1];q===Rt&&(q=F?ft:void 0);let Q=F?Kd(q,d):O===d?q:void 0;if(A&&!yp(Q)&&(Q=Kd(C,d)),yp(Q)&&(E=Q,v))return E;const be=s[h+1];h=v?Ei(be):Rr(be)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(E=Kd(C,d))}return E}function yp(s){return void 0!==s}function kh(s,o){return 0!=(s.flags&(o?16:32))}function lb(s,o=""){const l=Ie(),d=Vt(),h=s+20,m=d.firstCreatePass?ss(d,h,1,o,null):d.data[h],v=l[h]=function va(s,o){return En(s)?s.createText(o):s.createTextNode(o)}(l[11],o);xo(d,l,v,m),Ir(m,!1)}function Rh(s){return du("",s,""),Rh}function du(s,o,l){const d=Ie(),h=Eh(d,s,o,l);return h!==Rt&&wa(d,Xn(),h),du}function DE(s,o,l){!function ao(s,o,l,d){const h=Vt(),m=Oi(2);h.firstUpdatePass&&u_(h,null,m,d);const v=Ie();if(l!==Rt&&Ci(v,m,l)){const E=h.data[Xn()];if(kh(E,d)&&!Oh(h,m)){let C=d?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(l=fe(C,l||"")),Gv(h,E,v,l,d)}else!function sb(s,o,l,d,h,m,v,E){h===Rt&&(h=ft);let C=0,A=0,O=0<h.length?h[0]:null,F=0<m.length?m[0]:null;for(;null!==O||null!==F;){const q=C<h.length?h[C+1]:void 0,Q=A<m.length?m[A+1]:void 0;let Ve,be=null;O===F?(C+=2,A+=2,q!==Q&&(be=F,Ve=Q)):null===F||null!==O&&O<F?(C+=2,be=O):(A+=2,be=F,Ve=Q),null!==be&&ob(s,o,l,d,be,Ve,v,E),O=C<h.length?h[C]:null,F=A<m.length?m[A]:null}}(h,E,v,v[11],v[m+1],v[m+1]=function ib(s,o,l){if(null==l||""===l)return ft;const d=[],h=fa(l);if(Array.isArray(h))for(let m=0;m<h.length;m++)s(d,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&s(d,m,h[m]);else"string"==typeof h&&o(d,h);return d}(s,o,l),d,m)}}(ei,so,Eh(Ie(),s,o,l),!0)}function v_(s,o,l){const d=Ie();return Ci(d,Ki(),o)&&io(Vt(),An(),d,s,o,d[11],l,!0),v_}const pu=void 0;var fb=["en",[["a","p"],["AM","PM"],pu],[["AM","PM"],pu,pu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pu,"{1} 'at' {0}",pu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function OE(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let gu={};function b_(s){const o=function wp(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=PE(o);if(l)return l;const d=o.split("-")[0];if(l=PE(d),l)return l;if("en"===d)return fb;throw new Error(`Missing locale data for the locale "${s}".`)}function RE(s){return b_(s)[gt.PluralCase]}function PE(s){return s in gu||(gu[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),gu[s]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const Ep="en-US";let NE=Ep;function Gc(s,o,l,d,h){if(s=ne(s),Array.isArray(s))for(let m=0;m<s.length;m++)Gc(s[m],o,l,d,h);else{const m=Vt(),v=Ie();let E=wh(s)?s:ne(s.provide),C=R0(s);const A=gn(),O=1048575&A.providerIndexes,F=A.directiveStart,q=A.providerIndexes>>20;if(wh(s)||!s.multi){const Q=new Mn(C,h,up),be=er(E,o,h?O:O+q,F);-1===be?(Or(Xs(A,v),m,E),qt(m,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(Q),v.push(Q)):(l[be]=Q,v[be]=Q)}else{const Q=er(E,o,O+q,F),be=er(E,o,O,O+q),Ve=Q>=0&&l[Q],Fe=be>=0&&l[be];if(h&&!Fe||!h&&!Ve){Or(Xs(A,v),m,E);const it=function qc(s,o,l,d,h){const m=new Mn(s,l,up);return m.multi=[],m.index=o,m.componentProviders=0,QE(m,h,d&&!l),m}(h?M_:ze,l.length,h,d,C);!h&&Fe&&(l[be].providerFactory=it),qt(m,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(it),v.push(it)}else qt(m,s,Q>-1?Q:be,QE(l[h?be:Q],C,!h&&d));!h&&d&&Fe&&l[be].componentProviders++}}}function qt(s,o,l,d){const h=wh(o),m=function QI(s){return!!s.useClass}(o);if(h||m){const C=(m?ne(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=A.indexOf(l);-1===O?A.push(l,[d,C]):A[O+1].push(d,C)}else A.push(l,C)}}}function QE(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function er(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function ze(s,o,l,d){return Op(this.multi,[])}function M_(s,o,l,d){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Vn(l,l[1],this.providerFactory.index,d);m=E.slice(0,v),Op(h,m);for(let C=v;C<E.length;C++)m.push(E[C])}else m=[],Op(h,m);return m}function Op(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function kp(s,o=[]){return l=>{l.providersResolver=(d,h)=>function Tt(s,o,l){const d=Vt();if(d.firstCreatePass){const h=ln(s);Gc(l,d.data,d.blueprint,h,!0),Gc(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class Sb{}class eC{resolveComponentFactory(o){throw function XE(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Uh=(()=>{class s{}return s.NULL=new eC,s})();function yu(){return vu(gn(),Ie())}function vu(s,o){return new re(Er(s,o))}let re=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=yu,s})();function x_(s){return s instanceof re?s.nativeElement:s}class tC{}let Pp=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function YT(){const s=Ie(),l=qr(gn().index,s);return function bu(s){return s[11]}(Hr(l)?l:s)}(),s})(),Zc=(()=>{class s{}return s.\u0275prov=hn({token:s,providedIn:"root",factory:()=>null}),s})();class Ab{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const O_=new Ab("13.1.3"),Mb={};function k_(s,o,l,d,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&d.push(Sn(m)),gi(m))for(let E=10;E<m.length;E++){const C=m[E],A=C[1].firstChild;null!==A&&k_(C[1],C,A,d)}const v=l.type;if(8&v)k_(s,o,l.child,d);else if(32&v){const E=Wf(l,o);let C;for(;C=E();)d.push(C)}else if(16&v){const E=dh(o,l);if(Array.isArray(E))d.push(...E);else{const C=ri(o[16]);k_(C[1],C,E,d,!0)}}l=h?l.projectionNext:l.next}return d}class Kr{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return k_(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(gi(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(Ac(o,d),ic(l,d))}this._attachedToViewContainer=!1}y(this._lView[1],this._lView)}onDestroy(o){b0(this._lView[1],this._lView,null,o)}markForCheck(){Cm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Tv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function GI(s,o,l){_o(!0);try{Tv(s,o,l)}finally{_o(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rv(s,o){yl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=o}}class nC extends Kr{constructor(o){super(o),this._view=o}detectChanges(){S0(this._view)}checkNoChanges(){!function qI(s){_o(!0);try{S0(s)}finally{_o(!1)}}(this._view)}get context(){return null}}class wu extends Uh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=$n(o);return new _n(l,this.ngModule)}}function xb(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const R_=new xn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ic});class _n extends Sb{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function yI(s){return s.map(_I).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return xb(this.componentDef.inputs)}get outputs(){return xb(this.componentDef.outputs)}create(o,l,d,h){const m=(h=h||this.ngModule)?function oi(s,o){return{get:(l,d,h)=>{const m=s.get(l,Mb,h);return m!==Mb||d===Mb?m:o.get(l,d,h)}}}(o,h.injector):o,v=m.get(tC,zi),E=m.get(Zc,null),C=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=d?function kI(s,o,l){if(En(s))return s.selectRootElement(o,l===Yt.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(C,d,this.componentDef.encapsulation):ml(v.createRenderer(null,this.componentDef),A,function lr(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(A)),F=this.componentDef.onPush?576:528,q=function tT(s,o){return{components:[],scheduler:s||Ic,clean:M0,playerHandler:o||null,flags:0}}(),Q=vv(0,null,null,1,0,null,null,null,null,null),be=gh(null,Q,q,F,null,null,v,C,E,m);let Ve,Fe;ra(be);try{const it=function eT(s,o,l,d,h,m){const v=l[1];l[20]=s;const C=ss(v,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Mm(C,A,!0),null!==s&&(Zl(h,s,A),null!==C.classes&&fh(h,s,C.classes),null!==C.styles&&Oo(h,s,C.styles)));const O=d.createRenderer(s,o),F=gh(l,v0(o),null,o.onPush?64:16,l[20],C,d,O,m||null,null);return v.firstCreatePass&&(Or(Xs(C,l),v,o.type),E0(v,C),D0(C,l.length,1)),lu(l,F),l[20]=F}(O,this.componentDef,be,v,C);if(O)if(d)Zl(C,O,["ng-version",O_.full]);else{const{attrs:Ce,classes:mt}=function e0(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&l.push(m);else{if(!ko(h))break;h=m}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ce&&Zl(C,O,Ce),mt&&mt.length>0&&fh(C,O,mt.join(" "))}if(Fe=Wi(Q,20),void 0!==l){const Ce=Fe.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Gt=l[mt];Ce.push(null!=Gt?Array.from(Gt):null)}}Ve=function W0(s,o,l,d,h){const m=l[1],v=function FI(s,o,l){const d=gn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),I0(s,d,o,Rc(s,o,1,null),l));const h=Vn(o,s,d.directiveStart,d);on(h,o);const m=Er(d,o);return m&&on(m,o),h}(m,l,o);if(d.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=gn();o.contentQueries(1,v,C.directiveStart)}const E=gn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(dr(E.index),Pr(l[1],E,0,E.directiveStart,E.directiveEnd,o),w0(o,v)),v}(it,this.componentDef,be,q,[nT]),Xf(Q,be,null)}finally{Hl()}return new Os(this.componentType,Ve,vu(Fe,be),be,Fe)}}class Os extends class Rp{}{constructor(o,l,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new nC(h),this.componentType=o}get injector(){return new Es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Wn{}class iC{}const ks=new Map;class Aa extends Wn{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wu(this);const d=Yn(o);this._bootstrapComponents=Ss(d.bootstrap),this._r3Injector=xv(o,l,[{provide:Wn,useValue:this},{provide:Uh,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=Ms.THROW_IF_NOT_FOUND,d=lt.Default){return o===Ms||o===Wn||o===Jf?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class zc extends iC{constructor(o){super(),this.moduleType=o,null!==Yn(o)&&function Ob(s){const o=new Set;!function l(d){const h=Yn(d,!0),m=h.id;null!==m&&(function Eu(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ce(o)} vs ${ce(o.name)}`)}(m,ks.get(m),d),ks.set(m,d));const v=Ss(h.imports);for(const E of v)o.has(E)||(o.add(E),l(E))}(s)}(o)}create(o){return new Aa(this.moduleType,o)}}function Iu(s,o,l,d,h,m){const v=o+l;return Ci(s,v,h)?function wl(s,o,l){return s[o]=l}(s,v+1,m?d.call(m,h):d(h)):function Kc(s,o){const l=s[o];return l===Rt?void 0:l}(s,v+1)}function Vp(s,o){const l=Vt();let d;const h=s+20;l.firstCreatePass?(d=function Up(s,o){if(o)for(let l=o.length-1;l>=0;l--){const d=o[l];if(s===d.name)return d}}(o,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,d.onDestroy)):d=l.data[h];const m=d.factory||(d.factory=fo(d.type)),v=rn(up);try{const E=Yi(!1),C=m();return Yi(E),function cT(s,o,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=d}(l,Ie(),h,C),C}finally{rn(v)}}function Pb(s,o,l){const d=s+20,h=Ie(),m=Gr(h,d);return function mr(s,o){return s[1].data[o].pure}(h,d)?Iu(h,function ir(){const s=_t.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,m.transform,l,m):m.transform(l)}function wn(s){return o=>{setTimeout(s,void 0,o)}}const xa=class uC extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var h,m,v;let E=o,C=l||(()=>null),A=d;if(o&&"object"==typeof o){const F=o;E=null===(h=F.next)||void 0===h?void 0:h.bind(F),C=null===(m=F.error)||void 0===m?void 0:m.bind(F),A=null===(v=F.complete)||void 0===v?void 0:v.bind(F)}this.__isAsync&&(C=wn(C),E&&(E=wn(E)),A&&(A=wn(A)));const O=super.subscribe({next:E,error:C,complete:A});return o instanceof X.w0&&o.add(O),O}};function cC(){return this._results[bl()]()}class Oa{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=bl(),d=Oa.prototype;d[l]||(d[l]=cC)}get changes(){return this._changes||(this._changes=new xa)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=mn(o);(this._changesDetected=!function Wd(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bp=(()=>{class s{}return s.__NG_ELEMENT_ID__=L_,s})();const jp=Bp,F_=class extends jp{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=gh(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(l)),Xf(l,d,o),new Kr(d)}};function L_(){return Hp(gn(),Ie())}function Hp(s,o){return 4&s.type?new F_(o,s,vu(s,o)):null}let $p=(()=>{class s{}return s.__NG_ELEMENT_ID__=ai,s})();function ai(){return fC(gn(),Ie())}const tS=$p,dC=class extends tS{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return vu(this._hostTNode,this._hostLView)}get injector(){return new Es(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qi(this._hostTNode,this._hostLView);if(Hd(o)){const l=ol(o,this._hostLView),d=sl(o);return new Es(l[1].data[d+8],l)}return new Es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=hC(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const h=o.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(o,l,d,h,m){const v=o&&!function la(s){return"function"==typeof s}(o);let E;if(v)E=l;else{const F=l||{};E=F.index,d=F.injector,h=F.projectableNodes,m=F.ngModuleRef}const C=v?o:new _n($n(o)),A=d||this.parentInjector;if(!m&&null==C.ngModule&&A){const F=A.get(Wn,null);F&&(m=F)}const O=C.create(A,h,void 0,m);return this.insert(O.hostView,E),O}insert(o,l){const d=o._lView,h=d[1];if(function zu(s){return gi(s[3])}(d)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const F=d[3],q=new dC(F,F[6],F[3]);q.detach(q.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function iv(s,o,l,d){const h=10+d,m=l.length;d>0&&(l[h-1][4]=o),d<m-10?(o[4]=l[h],rc(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function sv(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,d,v,m);const E=xc(m,v),C=d[11],A=et(C,v[7]);return null!==A&&function am(s,o,l,d,h,m){d[0]=h,d[6]=o,yl(s,d,l,1,h,m)}(h,v[6],C,d,A,E),o.attachToViewContainerRef(),rc(V_(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=hC(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=Ac(this._lContainer,l);d&&(ic(V_(this._lContainer),l),y(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=Ac(this._lContainer,l);return d&&null!=ic(V_(this._lContainer),l)?new Kr(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function hC(s){return s[8]}function V_(s){return s[8]||(s[8]=[])}function fC(s,o){let l;const d=o[s.index];if(gi(d))l=d;else{let h;if(8&s.type)h=Sn(d);else{const m=o[11];h=m.createComment("");const v=Er(s,o);U(m,et(m,v),h,function ot(s,o){return En(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=Em(d,o,h,s),lu(o,l)}return new dC(l,s,o)}class ka{constructor(o){this.queryList=o,this.matches=null}clone(){return new ka(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<d;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new Tu(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Vb(o,l).matches&&this.queries[l].setDirty()}}class pC{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class U_{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new U_(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class B_{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new B_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,l,Tl(l,m)),this.matchTNodeWithReadOption(o,l,wo(l,o,m,!1,!1))}else d===Bp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,wo(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===re||h===$p||h===Bp&&4&l.type)this.addMatch(l.index,-2);else{const m=wo(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Tl(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function $h(s,o,l,d){return-1===l?function gC(s,o){return 11&s.type?vu(s,o):4&s.type?Hp(s,o):null}(o,s):-2===l?function iS(s,o,l){return l===re?vu(o,s):l===Bp?Hp(o,s):l===$p?fC(o,s):void 0}(s,o,d):Vn(s,s[1],l,o)}function j_(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,v=l.matches,E=[];for(let C=0;C<v.length;C+=2){const A=v[C];E.push(A<0?null:$h(o,m[A],v[C+1],l.metadata.read))}h.matches=E}return h.matches}function Gp(s,o,l,d){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=j_(s,o,h,l);for(let E=0;E<m.length;E+=2){const C=m[E];if(C>0)d.push(v[E/2]);else{const A=m[E+1],O=o[-C];for(let F=10;F<O.length;F++){const q=O[F];q[17]===q[3]&&Gp(q[1],q,A,d)}if(null!==O[9]){const F=O[9];for(let q=0;q<F.length;q++){const Q=F[q];Gp(Q[1],Q,A,d)}}}}}return d}function H_(s){const o=Ie(),l=Vt(),d=na();el(d+1);const h=Vb(l,d);if(s.dirty&&Qn(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Gp(l,o,d,[]):j_(l,o,h,d);s.reset(m,x_),s.notifyOnChanges()}return!0}return!1}function Yc(s,o,l){const d=Vt();d.firstCreatePass&&($_(d,new pC(s,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),Fb(d,Ie(),o)}function Rs(s,o,l,d){const h=Vt();if(h.firstCreatePass){const m=gn();$_(h,new pC(o,l,d),m.index),function Lb(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Fb(h,Ie(),l)}function Nb(){return function qp(s,o){return s[19].queries[o].queryList}(Ie(),na())}function Fb(s,o,l){const d=new Oa(4==(4&l));b0(s,o,d,d.destroy),null===o[19]&&(o[19]=new Tu),o[19].queries.push(new ka(d))}function $_(s,o,l){null===s.queries&&(s.queries=new U_),s.queries.track(new B_(o,l))}function Vb(s,o){return s.queries.getByIndex(o)}function Au(...s){}const K_=new xn("Application Initializer");let id=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Au,this.reject=Au,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Jm(m))l.push(m);else if(zv(m)){const v=new Promise((E,C)=>{m.subscribe({complete:E,error:C})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Cn(K_,8))},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})();const Wb=new xn("AppId"),IC={provide:Wb,useFactory:function dS(){return`${Y_()}${Y_()}${Y_()}`},deps:[]};function Y_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const TC=new xn("Platform Initializer"),SC=new xn("Platform ID"),AC=new xn("appBootstrapListener");let Kb=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})();const X_=new xn("LocaleId"),Ur=new xn("DefaultCurrencyCode");class Ra{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Yp=(()=>{class s{compileModuleSync(l){return new zc(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=Ss(Yn(l).declarations).reduce((v,E)=>{const C=$n(E);return C&&v.push(new _n(C)),v},[]);return new Ra(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})();const OC=(()=>Promise.resolve(0))();function ty(s){"undefined"==typeof Zone?OC.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ps{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xa(!1),this.onMicrotaskEmpty=new xa(!1),this.onStable=new xa(!1),this.onError=new xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function kC(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function pS(s){const o=()=>{!function Yb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ny(s),s.isCheckStableRunning=!0,sd(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ny(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,m,v,E)=>{try{return Qb(s),l.invokeTask(h,m,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),Xb(s)}},onInvoke:(l,d,h,m,v,E,C)=>{try{return Qb(s),l.invoke(h,m,v,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Xb(s)}},onHasTask:(l,d,h,m)=>{l.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,ny(s),sd(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ps.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ps.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,fS,Au,Au);try{return m.runTask(v,l,d)}finally{m.cancelTask(v)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const fS={};function sd(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ny(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Qb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Xb(s){s._nesting--,sd(s)}class gS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xa,this.onMicrotaskEmpty=new xa,this.onStable=new xa,this.onError=new xa}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}let Jb=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ps.assertNotInAngularZone(),ty(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ty(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Cn(Ps))},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})(),RC=(()=>{class s{constructor(){this._applications=new Map,Mu.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Mu.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})();class mS{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function Zh(s){Mu=s}let Fo,Mu=new mS;const Ii=new xn("AllowMultipleToken");class yS{constructor(o,l){this.name=o,this.token=l}}function Lo(s,o,l=[]){const d=`Platform: ${o}`,h=new xn(d);return(m=[])=>{let v=tw();if(!v||v.injector.get(Ii,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const E=l.concat(m).concat({provide:h,useValue:!0},{provide:Mv,useValue:"platform"});!function NC(s){if(Fo&&!Fo.destroyed&&!Fo.injector.get(Ii,!1))throw new Re(400,"");Fo=s.get(LC);const o=s.get(TC,null);o&&o.forEach(l=>l())}(Ms.create({providers:E,name:d}))}return function FC(s){const o=tw();if(!o)throw new Re(401,"");return o}()}}function tw(){return Fo&&!Fo.destroyed?Fo:null}let LC=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function vS(s,o){let l;return l="noop"===s?new gS:("zone.js"===s?void 0:s)||new Ps({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),C=[{provide:Ps,useValue:E}];return E.run(()=>{const A=Ms.create({providers:C,parent:this.injector,name:l.moduleType.name}),O=l.create(A),F=O.injector.get(gl,null);if(!F)throw new Re(402,"");return E.runOutsideAngular(()=>{const q=E.onError.subscribe({next:Q=>{F.handleError(Q)}});O.onDestroy(()=>{nw(this._modules,O),q.unsubscribe()})}),function bS(s,o,l){try{const d=l();return Jm(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(F,E,()=>{const q=O.injector.get(id);return q.runInitializers(),q.donePromise.then(()=>(function OT(s){st(s,"Expected localeId to be defined"),"string"==typeof s&&(NE=s.toLowerCase().replace(/_/g,"-"))}(O.injector.get(X_,Ep)||Ep),this._moduleDoBootstrap(O),O))})})}bootstrapModule(l,d=[]){const h=VC({},d);return function _S(s,o,l){const d=new zc(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const d=l.injector.get(Qp);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Re(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Cn(Ms))},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})();function VC(s,o){return Array.isArray(o)?o.reduce(VC,s):Object.assign(Object.assign({},s),o)}let Qp=(()=>{class s{constructor(l,d,h,m,v){this._zone=l,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),C=new P.y(A=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Ps.assertNotInAngularZone(),ty(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{O.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ae.T)(E,C.pipe((0,le.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Re(405,"");let h;h=l instanceof Sb?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function PC(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Wn),E=h.create(Ms.NULL,[],d||h.selector,m),C=E.location.nativeElement,A=E.injector.get(Jb,null),O=A&&E.injector.get(RC);return A&&O&&O.registerApplication(C,A),E.onDestroy(()=>{this.detachView(E.hostView),nw(this.components,E),O&&O.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;nw(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(AC,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Cn(Ps),Cn(Ms),Cn(gl),Cn(Uh),Cn(id))},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})();function nw(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let BC=!0,jC=!1;function ES(){return jC=!0,BC}function CS(){if(jC)throw new Error("Cannot enable prod mode after platform setup.");BC=!1}let $C=(()=>{class s{}return s.__NG_ELEMENT_ID__=DS,s})();function DS(s){return function GC(s,o,l){if(wd(s)&&!l){const d=qr(s.index,o);return new Kr(d,d)}return 47&s.type?new Kr(o[16],o):null}(gn(),Ie(),16==(16&s))}class ku{constructor(){}supports(o){return rp(o)}create(o){return new KC(o)}}const xS=(s,o)=>o;class KC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||xS}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,m=null;for(;l||d;){const v=!d||l&&l.currentIndex<Wh(d,h,m)?l:d,E=Wh(v,h,m),C=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const A=E-h,O=C-h;if(A!=O){for(let q=0;q<A;q++){const Q=q<m.length?m[q]:m[q]=0,be=Q+q;O<=be&&be<A&&(m[q]=Q+1)}m[v.previousIndex]=O-A}}E!==C&&o(v,E,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!rp(o))throw new Re(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)m=o[E],v=this._trackByFn(E,m),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,m,v,E)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,E),d=!0),l=l._next}else h=0,function lT(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[bl()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,E=>{v=this._trackByFn(h,E),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,E,v,h)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new OS(l,d),m,h),o}_verifyReinsertion(o,l,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new YC),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class OS{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class YC{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new kS,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wh(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class Ru{constructor(){}supports(o){return o instanceof Map||Pv(o)}create(){return new ld}}class ld{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Pv(o)))throw new Re(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const d=new QC(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class QC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XC(){return new ay([new ku])}let ay=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||XC()),deps:[[s,new dt,new Ue]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Re(901,"")}}return s.\u0275prov=hn({token:s,providedIn:"root",factory:XC}),s})();function Jp(){return new ly([new Ru])}let ly=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Jp()),deps:[[s,new dt,new Ue]]}}find(l){const d=this.factories.find(m=>m.supports(l));if(d)return d;throw new Re(901,"")}}return s.\u0275prov=hn({token:s,providedIn:"root",factory:Jp}),s})();const eD=[new Ru],uy=new ay([new ku]),tg=new ly(eD),tD=Lo(null,"core",[{provide:SC,useValue:"unknown"},{provide:LC,deps:[Ms]},{provide:RC,deps:[]},{provide:Kb,deps:[]}]),rD=[{provide:Qp,useClass:Qp,deps:[Ps,Ms,gl,Uh,id]},{provide:R_,deps:[Ps],useFactory:function Pu(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:id,useClass:id,deps:[[new Ue,K_]]},{provide:Yp,useClass:Yp,deps:[]},IC,{provide:ay,useFactory:function ds(){return uy},deps:[]},{provide:ly,useFactory:function nD(){return tg},deps:[]},{provide:X_,useFactory:function cy(s){return s||function dy(){return"undefined"!=typeof $localize&&$localize.locale||Ep}()},deps:[[new Ee(X_),new Ue,new dt]]},{provide:Ur,useValue:"USD"}];let Kh=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Cn(Qp))},s.\u0275mod=Lt({type:s}),s.\u0275inj=ci({providers:rD}),s})()},3942:(Xe,ye,R)=>{R.d(ye,{Z:()=>Re});var u=R(2090),X=R(4859),P=R(9681),ae=R(1877);class le{constructor(pe,me){this._delegate=pe,this.firebase=me,(0,P._addComponent)(pe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(pe,me=P._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const He=this._delegate.container.getProvider(pe);return!He.isInitialized()&&"EXPLICIT"===(null===(ke=He.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&He.initialize(),He.getImmediate({identifier:me})}_removeServiceInstance(pe,me=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(me)}_addComponent(pe){(0,P._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,P._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function fe(){const je=function ce(je){const pe={},me={__esModule:!0,initializeApp:function Le(Ke,we={}){const Z=P.initializeApp(Ke,we);if((0,u.r3)(pe,Z.name))return pe[Z.name];const te=new je(Z,me);return pe[Z.name]=te,te},app:He,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Ke){const we=Ke.name,Z=we.replace("-compat","");if(P._registerComponent(Ke)&&"PUBLIC"===Ke.type){const te=(he=He())=>{if("function"!=typeof he[Z])throw ie.create("invalid-app-argument",{appName:we});return he[Z]()};void 0!==Ke.serviceProps&&(0,u.ZB)(te,Ke.serviceProps),me[Z]=te,je.prototype[Z]=function(...he){return this._getService.bind(this,we).apply(this,Ke.multipleInstances?he:[])}}return"PUBLIC"===Ke.type?me[Z]:null},removeApp:function ke(Ke){delete pe[Ke]},useAsService:function tt(Ke,we){return"serverAuth"===we?null:we},modularAPIs:P}};function He(Ke){if(!(0,u.r3)(pe,Ke=Ke||P._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ke});return pe[Ke]}return me.default=me,Object.defineProperty(me,"apps",{get:function Je(){return Object.keys(pe).map(Ke=>pe[Ke])}}),He.App=je,me}(le);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(me){(0,u.ZB)(je,me)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),je}(),K=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=G;!function De(je){(0,P.registerVersion)("@firebase/app-compat","0.1.29",je)}()},9681:(Xe,ye,R)=>{R.r(ye),R.d(ye,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>fs,_DEFAULT_ENTRY_NAME:()=>st,_addComponent:()=>yr,_addOrOverwriteComponent:()=>hn,_apps:()=>In,_clearComponents:()=>Us,_components:()=>nn,_getProvider:()=>ci,_registerComponent:()=>ui,_removeServiceInstance:()=>rr,deleteApp:()=>lt,getApp:()=>xr,getApps:()=>Pe,initializeApp:()=>di,onLog:()=>rn,registerVersion:()=>Nn,setLogLevel:()=>Bi});var u=R(5861),X=R(4859),P=R(1877),ae=R(2090),le=R(8766);class ve{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function ie(B){const $=B.getComponent();return"VERSION"===(null==$?void 0:$.type)}(W)){const xe=W.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(W=>W).join(" ")}}const ce="@firebase/app",G=new P.Yd("@firebase/app"),st="[DEFAULT]",It={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},In=new Map,nn=new Map;function yr(B,$){try{B.container.addComponent($)}catch(W){G.debug(`Component ${$.name} failed to register with FirebaseApp ${B.name}`,W)}}function hn(B,$){B.container.addOrOverwriteComponent($)}function ui(B){const $=B.name;if(nn.has($))return G.debug(`There were multiple attempts to register component ${$}.`),!1;nn.set($,B);for(const W of In.values())yr(W,B);return!0}function ci(B,$){const W=B.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),B.container.getProvider($)}function rr(B,$,W=st){ci(B,$).clearInstance(W)}function Us(){nn.clear()}const Kt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rn{constructor($,W,xe){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Kt.create("app-deleted",{appName:this._name})}}const fs="9.9.0";function di(B,$={}){"object"!=typeof $&&($={name:$});const W=Object.assign({name:st,automaticDataCollectionEnabled:!1},$),xe=W.name;if("string"!=typeof xe||!xe)throw Kt.create("bad-app-name",{appName:String(xe)});const Ze=In.get(xe);if(Ze){if((0,ae.vZ)(B,Ze.options)&&(0,ae.vZ)(W,Ze.config))return Ze;throw Kt.create("duplicate-app",{appName:xe})}const bt=new X.H0(xe);for(const an of nn.values())bt.addComponent(an);const Qt=new Rn(B,W,bt);return In.set(xe,Qt),Qt}function xr(B=st){const $=In.get(B);if(!$)throw Kt.create("no-app",{appName:B});return $}function Pe(){return Array.from(In.values())}function lt(B){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(B){const $=B.name;In.has($)&&(In.delete($),yield Promise.all(B.container.getProviders().map(W=>W.delete())),B.isDeleted=!0)})).apply(this,arguments)}function Nn(B,$,W){var xe;let Ze=null!==(xe=It[B])&&void 0!==xe?xe:B;W&&(Ze+=`-${W}`);const bt=Ze.match(/\s|\//),Qt=$.match(/\s|\//);if(bt||Qt){const an=[`Unable to register library "${Ze}" with version "${$}":`];return bt&&an.push(`library name "${Ze}" contains illegal characters (whitespace or "/")`),bt&&Qt&&an.push("and"),Qt&&an.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void G.warn(an.join(" "))}ui(new X.wA(`${Ze}-version`,()=>({library:Ze,version:$}),"VERSION"))}function rn(B,$){if(null!==B&&"function"!=typeof B)throw Kt.create("invalid-log-argument");(0,P.Am)(B,$)}function Bi(B){(0,P.Ub)(B)}const Tn="firebase-heartbeat-store";let hi=null;function kl(){return hi||(hi=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(B,$)=>{0===$&&B.createObjectStore(Tn)}}).catch(B=>{throw Kt.create("storage-open",{originalErrorMessage:B.message})})),hi}function at(){return(at=(0,u.Z)(function*(B){var $;try{return(yield kl()).transaction(Tn).objectStore(Tn).get(ji(B))}catch(W){throw Kt.create("storage-get",{originalErrorMessage:null===($=W)||void 0===$?void 0:$.message})}})).apply(this,arguments)}function vt(B,$){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(B,$){var W;try{const Ze=(yield kl()).transaction(Tn,"readwrite");return yield Ze.objectStore(Tn).put($,ji(B)),Ze.done}catch(xe){throw Kt.create("storage-set",{originalErrorMessage:null===(W=xe)||void 0===W?void 0:W.message})}})).apply(this,arguments)}function ji(B){return`${B.name}!${B.options.appId}`}class zt{constructor($){this.container=$,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new Hi(W),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var $=this;return(0,u.Z)(function*(){const xe=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ze=fi();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ze&&!$._heartbeatsCache.heartbeats.some(bt=>bt.date===Ze))return $._heartbeatsCache.heartbeats.push({date:Ze,agent:xe}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(bt=>{const Qt=new Date(bt.date).valueOf();return Date.now()-Qt<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,u.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const W=fi(),{heartbeatsToSend:xe,unsentEntries:Ze}=function ft(B,$=1024){const W=[];let xe=B.slice();for(const Ze of B){const bt=W.find(Qt=>Qt.agent===Ze.agent);if(bt){if(bt.dates.push(Ze.date),j(W)>$){bt.dates.pop();break}}else if(W.push({agent:Ze.agent,dates:[Ze.date]}),j(W)>$){W.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:W,unsentEntries:xe}}($._heartbeatsCache.heartbeats),bt=(0,ae.L)(JSON.stringify({version:2,heartbeats:xe}));return $._heartbeatsCache.lastSentHeartbeatDate=W,Ze.length>0?($._heartbeatsCache.heartbeats=Ze,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),bt})()}}function fi(){return(new Date).toISOString().substring(0,10)}class Hi{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,u.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function Yt(B){return at.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var W=this;return(0,u.Z)(function*(){var xe;if(yield W._canUseIndexedDBPromise){const bt=yield W.read();return vt(W.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:bt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var W=this;return(0,u.Z)(function*(){var xe;if(yield W._canUseIndexedDBPromise){const bt=yield W.read();return vt(W.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:bt.lastSentHeartbeatDate,heartbeats:[...bt.heartbeats,...$.heartbeats]})}})()}}function j(B){return(0,ae.L)(JSON.stringify({version:2,heartbeats:B})).length}!function z(B){ui(new X.wA("platform-logger",$=>new ve($),"PRIVATE")),ui(new X.wA("heartbeat",$=>new zt($),"PRIVATE")),Nn(ce,"0.7.28",B),Nn(ce,"0.7.28","esm2017"),Nn("fire-js","")}("")},4859:(Xe,ye,R)=>{R.d(ye,{H0:()=>ce,wA:()=>P});var u=R(5861),X=R(2090);class P{constructor(G,K,ne){this.name=G,this.instanceFactory=K,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class le{constructor(G,K){this.name=G,this.container=K,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const K=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(K)){const ne=new X.BH;if(this.instancesDeferred.set(K,ne),this.isInitialized(K)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:K});qe&&ne.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(K).promise}getImmediate(G){var K;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),qe=null!==(K=null==G?void 0:G.optional)&&void 0!==K&&K;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(De){if(qe)return null;throw De}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ie(fe){return"EAGER"===fe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(K){}for(const[K,ne]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(K);try{const De=this.getOrInitializeService({instanceIdentifier:qe});ne.resolve(De)}catch(De){}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const K=Array.from(G.instances.values());yield Promise.all([...K.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...K.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:K={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ne,options:K});for(const[De,Re]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(De)&&Re.resolve(qe);return qe}onInit(G,K){var ne;const qe=this.normalizeInstanceIdentifier(K),De=null!==(ne=this.onInitCallbacks.get(qe))&&void 0!==ne?ne:new Set;De.add(G),this.onInitCallbacks.set(qe,De);const Re=this.instances.get(qe);return Re&&G(Re,qe),()=>{De.delete(G)}}invokeOnInitCallbacks(G,K){const ne=this.onInitCallbacks.get(K);if(ne)for(const qe of ne)try{qe(G,K)}catch(De){}}getOrInitializeService({instanceIdentifier:G,options:K={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=G,fe===ae?void 0:fe),options:K}),this.instances.set(G,ne),this.instancesOptions.set(G,K),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch(qe){}var fe;return ne||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const K=this.getProvider(G.name);if(K.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);K.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const K=new le(G,this);return this.providers.set(G,K),K}getProviders(){return Array.from(this.providers.values())}}},1877:(Xe,ye,R)=>{R.d(ye,{Am:()=>fe,Ub:()=>ce,Yd:()=>ie,in:()=>X});const u=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const P={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,le={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ve=(G,K,...ne)=>{if(K<G.logLevel)return;const qe=(new Date).toISOString(),De=le[K];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${K})`);console[De](`[${qe}]  ${G.name}:`,...ne)};class ie{constructor(K){this.name=K,this._logLevel=ae,this._logHandler=ve,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in X))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"==typeof K?P[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(...K){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...K),this._logHandler(this,X.DEBUG,...K)}log(...K){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...K),this._logHandler(this,X.VERBOSE,...K)}info(...K){this._userLogHandler&&this._userLogHandler(this,X.INFO,...K),this._logHandler(this,X.INFO,...K)}warn(...K){this._userLogHandler&&this._userLogHandler(this,X.WARN,...K),this._logHandler(this,X.WARN,...K)}error(...K){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...K),this._logHandler(this,X.ERROR,...K)}}function ce(G){u.forEach(K=>{K.setLogLevel(G)})}function fe(G,K){for(const ne of u){let qe=null;K&&K.level&&(qe=P[K.level]),ne.userLogHandler=null===G?null:(De,Re,...je)=>{const pe=je.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch(ke){return null}}).filter(me=>me).join(" ");Re>=(null!=qe?qe:De.logLevel)&&G({level:X[Re].toLowerCase(),message:pe,args:je,type:De.name})}}}},8766:(Xe,ye,R)=>{R.d(ye,{Lj:()=>Le,X3:()=>He});var u=R(5861);let P,ae;const ie=new WeakMap,ce=new WeakMap,fe=new WeakMap,G=new WeakMap,K=new WeakMap;let De={get(we,Z,te){if(we instanceof IDBTransaction){if("done"===Z)return ce.get(we);if("objectStoreNames"===Z)return we.objectStoreNames||fe.get(we);if("store"===Z)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return me(we[Z])},set:(we,Z,te)=>(we[Z]=te,!0),has:(we,Z)=>we instanceof IDBTransaction&&("done"===Z||"store"===Z)||Z in we};function pe(we){return"function"==typeof we?function je(we){return we!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(we)?function(...Z){return we.apply(ke(this),Z),me(ie.get(this))}:function(...Z){return me(we.apply(ke(this),Z))}:function(Z,...te){const he=we.call(ke(this),Z,...te);return fe.set(he,Z.sort?Z.sort():[Z]),me(he)}}(we):(we instanceof IDBTransaction&&function qe(we){if(ce.has(we))return;const Z=new Promise((te,he)=>{const _e=()=>{we.removeEventListener("complete",Oe),we.removeEventListener("error",se),we.removeEventListener("abort",se)},Oe=()=>{te(),_e()},se=()=>{he(we.error||new DOMException("AbortError","AbortError")),_e()};we.addEventListener("complete",Oe),we.addEventListener("error",se),we.addEventListener("abort",se)});ce.set(we,Z)}(we),((we,Z)=>Z.some(te=>we instanceof te))(we,function le(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(we,De):we)}function me(we){if(we instanceof IDBRequest)return function ne(we){const Z=new Promise((te,he)=>{const _e=()=>{we.removeEventListener("success",Oe),we.removeEventListener("error",se)},Oe=()=>{te(me(we.result)),_e()},se=()=>{he(we.error),_e()};we.addEventListener("success",Oe),we.addEventListener("error",se)});return Z.then(te=>{te instanceof IDBCursor&&ie.set(te,we)}).catch(()=>{}),K.set(Z,we),Z}(we);if(G.has(we))return G.get(we);const Z=pe(we);return Z!==we&&(G.set(we,Z),K.set(Z,we)),Z}const ke=we=>K.get(we);function He(we,Z,{blocked:te,upgrade:he,blocking:_e,terminated:Oe}={}){const se=indexedDB.open(we,Z),yt=me(se);return he&&se.addEventListener("upgradeneeded",Ft=>{he(me(se.result),Ft.oldVersion,Ft.newVersion,me(se.transaction))}),te&&se.addEventListener("blocked",()=>te()),yt.then(Ft=>{Oe&&Ft.addEventListener("close",()=>Oe()),_e&&Ft.addEventListener("versionchange",()=>_e())}).catch(()=>{}),yt}function Le(we,{blocked:Z}={}){const te=indexedDB.deleteDatabase(we);return Z&&te.addEventListener("blocked",()=>Z()),me(te).then(()=>{})}const Je=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],tt=new Map;function Ke(we,Z){if(!(we instanceof IDBDatabase)||Z in we||"string"!=typeof Z)return;if(tt.get(Z))return tt.get(Z);const te=Z.replace(/FromIndex$/,""),he=Z!==te,_e=Ae.includes(te);if(!(te in(he?IDBIndex:IDBObjectStore).prototype)||!_e&&!Je.includes(te))return;const Oe=function(){var se=(0,u.Z)(function*(yt,...Ft){const Dn=this.transaction(yt,_e?"readwrite":"readonly");let st=Dn.store;return he&&(st=st.index(Ft.shift())),(yield Promise.all([st[te](...Ft),_e&&Dn.done]))[0]});return function(Ft){return se.apply(this,arguments)}}();return tt.set(Z,Oe),Oe}!function Re(we){De=we(De)}(we=>uN(lN({},we),{get:(Z,te,he)=>Ke(Z,te)||we.get(Z,te,he),has:(Z,te)=>!!Ke(Z,te)||we.has(Z,te)}))},5861:(Xe,ye,R)=>{function u(P,ae,le,ve,ie,ce,fe){try{var G=P[ce](fe),K=G.value}catch(ne){return void le(ne)}G.done?ae(K):Promise.resolve(K).then(ve,ie)}function X(P){return function(){var ae=this,le=arguments;return new Promise(function(ve,ie){var ce=P.apply(ae,le);function fe(K){u(ce,ve,ie,fe,G,"next",K)}function G(K){u(ce,ve,ie,fe,G,"throw",K)}fe(void 0)})}}R.d(ye,{Z:()=>X})}},Xe=>{Xe(Xe.s=6158)}]);